<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet ekr_test?>
<leo_file>
<leo_header file_format="2" tnodes="0" max_tnode_index="0" clone_windows="0"/>
<globals body_outline_ratio="0.5" body_secondary_ratio="0.5">
	<global_window_position top="50" left="50" height="500" width="700"/>
	<global_log_window_position top="0" left="0" height="0" width="0"/>
</globals>
<preferences/>
<find_panel_settings/>
<vnodes>
<v t="ekr.20041211035618"><vh>Startup</vh>
<v t="ekr.20050217093214"><vh>@settings</vh>
<v t="ekr.20050328101812"><vh>@page http plugin</vh>
<v t="ekr.20050328101812.1"><vh>@bool http_active = False</vh></v>
<v t="ekr.20050328101812.2"><vh>@int  port = 8080</vh></v>
<v t="ekr.20050328101812.3"><vh>@string rst_http_attributename = rst_http_attribute</vh></v>
</v>
<v t="ekr.20100910115903.5597"><vh>screenshot settings</vh>
<v t="ekr.20100910115903.5599"><vh>@string screenshot-bin = "c:\Program Files (x86)\Inkscape\inkscape.exe"</vh></v>
</v>
</v>
<v t="ekr.20060924180348"><vh>buttons</vh>
<v t="ekr.20050724100334"><vh>@@button Beautify</vh></v>
<v t="ekr.20080519084304.2"><vh>@@button change leo imports</vh></v>
<v t="ekr.20050819055746"><vh>@@button Save</vh></v>
<v t="ekr.20060827163237"><vh>@@button scripts.leo</vh></v>
<v t="ekr.20060109114710"><vh>@@button settings.leo</vh></v>
<v t="ekr.20051025144116"><vh>@@button Spell</vh></v>
</v>
<v t="ekr.20080515173014.1"><vh>regex: replace w.bind by c.bind(w...)</vh></v>
<v t="ekr.20100102164842.5328"><vh>Script: count pages</vh></v>
<v t="ekr.20101110084839.5680"><vh>Script: plugins not in this file</vh></v>
</v>
<v t="ekr.20090430075506.4"><vh>Notes &amp; to-do</vh>
<v t="ekr.20090430075506.3"><vh>@file leoPluginNotes.txt</vh></v>
</v>
<v t="ekr.20100909111553.5583"><vh>Unit tests</vh>
<v t="ekr.20100909121239.5797"><vh>@ignore</vh>
<v t="ekr.20100909121239.5670"><vh>@test get_directive_path</vh></v>
<v t="ekr.20100909121239.5951"><vh>@test find_at_screenshot_tree_node</vh></v>
<v t="ekr.20100909193419.5596"><vh>set g.app.unitTestGui</vh></v>
</v>
<v t="ekr.20100909111553.5588"><vh>@mark-for-unit-tests</vh></v>
</v>
<v t="edream.110203113231.618"><vh>Plugins</vh>
<v t="EKR.20040517090508"><vh>  Enable plugins using @enabled-plugins nodes</vh></v>
<v t="ekr.20050303051035"><vh> Templates: these show recommended ways of defining plugins.</vh>
<v t="ekr.20041114102139"><vh>Notes</vh>
<v t="ekr.20041114103913"><vh>About comments in the style guide</vh></v>
<v t="ekr.20041114102139.1"><vh>About the root node</vh></v>
<v t="ekr.20041114103913.1"><vh>About defining functions in separate nodes</vh></v>
<v t="ekr.20041114102139.2"><vh>About the &lt;&lt; imports &gt;&gt; section</vh></v>
<v t="ekr.20050306072156"><vh>About exceptions</vh></v>
</v>
<v t="ekr.20050306071629"><vh>Template for plugin that overrides commander methods</vh>
<v t="ekr.20050306071629.1"><vh>&lt;&lt; docstring &gt;&gt;</vh></v>
<v t="ekr.20050306071629.2"><vh>&lt;&lt; version history &gt;&gt;</vh></v>
<v t="ekr.20050306071629.3"><vh>&lt;&lt; imports &gt;&gt;</vh></v>
<v t="ekr.20050306071629.4"><vh>init</vh></v>
<v t="ekr.20050306071540"><vh>onStart2</vh></v>
</v>
<v t="ekr.20050303051035.2"><vh>Template for Tk plugin with per-commander controller class</vh>
<v t="ekr.20050303051035.3"><vh>&lt;&lt; docstring &gt;&gt;</vh></v>
<v t="ekr.20050303051035.4"><vh>&lt;&lt; version history &gt;&gt;</vh></v>
<v t="ekr.20050303051035.5"><vh>&lt;&lt; imports &gt;&gt;</vh></v>
<v t="ekr.20050303051101"><vh>init</vh></v>
<v t="ekr.20050303051150"><vh>onCreate</vh></v>
<v t="ekr.20050303051222"><vh>class pluginController</vh>
<v t="ekr.20050303051222.1"><vh>__init__</vh></v>
</v>
</v>
</v>
<v t="ekr.20100103093121.5365"><vh>Auto completion</vh>
<v t="ekr.20091118065749.5261"><vh>@file ctagscompleter.py</vh></v>
<v t="ville.20091204224145.5355"><vh>@file codewisecompleter.py</vh></v>
</v>
<v t="ekr.20040722135402.1"><vh>Body pane</vh>
<v t="edream.110403140857.8"><vh>@file color_markup.py</vh></v>
<v t="edream.110203113231.753"><vh>@file image.py</vh></v>
<v t="edream.110203113231.925"><vh>@file script_io_to_body.py</vh></v>
<v t="ekr.20080619090226.4"><vh>rClick plugin</vh>
<v t="bobjack.20080321133958.6"><vh>@file rClick.py</vh></v>
<v t="bobjack.20080619110105.2"><vh>@file rClickBasePluginClasses.py</vh></v>
</v>
</v>
<v t="edream.110203113231.667"><vh>Commands &amp; directives</vh>
<v t="edream.110203113231.668"><vh> Importing Cisco configuration files</vh>
<v t="edream.110203113231.669"><vh>@file import_cisco_config.py</vh></v>
</v>
<v t="edream.110203113231.741"><vh>@file add_directives.py</vh></v>
<v t="timo.20050213160555"><vh>@file bibtex.py</vh></v>
<v t="ekr.20040916073636"><vh>@file ConceptualSort.py</vh></v>
<v t="TL.20090225102340.32"><vh>@file nodeActions.py</vh></v>
<v t="ekr.20040915105758.13"><vh>@file FileActions.py</vh></v>
<v t="mork.20041018131258.1"><vh>@file groupOperations.py</vh></v>
<v t="ekr.20050328092641.4"><vh>@file Library.py</vh></v>
<v t="ekr.20040916084945"><vh>@file macros.py</vh></v>
<v t="ekr.20050301083306"><vh>@file mod_read_dir_outline.py</vh></v>
<v t="edream.110203113231.727"><vh>@file mod_timestamp.py</vh></v>
<v t="edream.110203113231.720"><vh>@file outline_export.py</vh></v>
<v t="danr7.20060912105041.1"><vh>@file paste_as_headlines.py</vh></v>
<v t="ekr.20041021120118"><vh>@file pretty_print.py</vh></v>
<v t="tbrown.20070117104409"><vh>@file quickMove.py</vh></v>
<v t="ekr.20040331153923"><vh>@file scheduler.py</vh></v>
<v t="mork.20041022090036.1"><vh>@file templates.py</vh></v>
<v t="danr7.20061010105952.1"><vh>@file word_count.py</vh></v>
<v t="edream.110203113231.722"><vh>mod_autosave</vh>
<v t="edream.110203113231.724"><vh>@file mod_autosave.py</vh></v>
</v>
<v t="ekr.20041110104350"><vh>table plugin: requires tktable</vh>
<v t="ekr.20041017035937"><vh>@file table.py</vh></v>
</v>
</v>
<v t="edream.110203113231.729"><vh>Debugging</vh>
<v t="edream.110203113231.730"><vh>@file dump_globals.py</vh></v>
<v t="edream.110203113231.732"><vh>@file enable_gc.py</vh></v>
<v t="edream.110203113231.734"><vh>@file quit_leo.py</vh></v>
<v t="ekr.20051016160700"><vh>@file testRegisterCommand.py</vh></v>
<v t="edream.110203113231.735"><vh>@file trace_gc_plugin.py</vh></v>
<v t="edream.110203113231.736"><vh>@file trace_keys.py</vh></v>
<v t="edream.110203113231.738"><vh>@file trace_tags.py</vh></v>
<v t="ekr.20040205071616"><vh>@file mnplugins.py</vh></v>
<v t="ekr.20060513122613"><vh>xcc plugin</vh>
<v t="ekr.20060513122613.1"><vh>Examples</vh>
<v t="ekr.20060513122613.2"><vh>@xcc OpenGl.h</vh>
<v t="ekr.20060513122613.3"><vh>USE_OPENGL</vh></v>
<v t="ekr.20060513122613.4"><vh>Data Types</vh></v>
<v t="ekr.20060513122613.5"><vh>1.1</vh>
<v t="ekr.20060513122613.6"><vh>Defs</vh></v>
<v t="ekr.20060513122613.7"><vh>Procs</vh></v>
</v>
<v t="ekr.20060513122613.8"><vh>1.2</vh>
<v t="ekr.20060513122613.9"><vh>Defs</vh></v>
<v t="ekr.20060513122613.10"><vh>Procs</vh></v>
</v>
<v t="ekr.20060513122613.11"><vh>1.3</vh>
<v t="ekr.20060513122613.12"><vh>Defs</vh></v>
<v t="ekr.20060513122613.13"><vh>Procs</vh></v>
</v>
<v t="ekr.20060513122613.14"><vh>1.4</vh>
<v t="ekr.20060513122613.15"><vh>Defs</vh></v>
<v t="ekr.20060513122613.16"><vh>Procs</vh></v>
</v>
<v t="ekr.20060513122613.17"><vh>1.5</vh>
<v t="ekr.20060513122613.18"><vh>Defs</vh></v>
<v t="ekr.20060513122613.19"><vh>Procs</vh></v>
</v>
<v t="ekr.20060513122613.20"><vh>WGL</vh></v>
</v>
<v t="ekr.20060513122613.21"><vh>@xcc cltest\testprog</vh>
<v t="ekr.20060513122613.22"><vh>program</vh>
<v t="ekr.20060513122613.23"><vh>Header Directives</vh></v>
<v t="ekr.20060513122613.24"><vh>int WINAPI WinMain(HINSTANCE hinstance,HINSTANCE hprevinstance,LPSTR lpcmdline,int ncmdshow);!</vh></v>
</v>
</v>
<v t="ekr.20060513122613.25"><vh>@xcc gcctest\testprog</vh>
<v t="ekr.20060513122613.22"></v>
</v>
</v>
<v t="ekr.20060514125256"><vh>Recent</vh>
<v t="ekr.20060513122450.295"><vh>Selected Node Funcs</vh>
<v t="ekr.20060513122450.296"><vh>sGatherInfo NOT CALLED</vh>
<v t="ekr.20060513122450.297"><vh>Head</vh></v>
<v t="ekr.20060513122450.298"><vh>Dicts</vh></v>
<v t="ekr.20060513122450.299"><vh>File Creation</vh></v>
<v t="ekr.20060513122450.300"><vh>Compilation</vh></v>
<v t="ekr.20060513122450.301"><vh>Execution</vh></v>
<v t="ekr.20060513122450.302"><vh>Debugging</vh></v>
</v>
<v t="ekr.20060513122450.303"><vh>sExtractHeadInfo</vh></v>
<v t="ekr.20060513122450.304"><vh>sGetBrowseInfo</vh></v>
<v t="ekr.20060513122450.305"><vh>sGetWriteInfo</vh></v>
<v t="ekr.20060513122450.306"><vh>sGetCompileInfo</vh></v>
<v t="ekr.20060513122450.307"><vh>sGetDebugInfo</vh></v>
<v t="ekr.20060513122450.308"><vh>sGetExecInfo</vh></v>
<v t="ekr.20060513122450.309"><vh>sGoToError</vh></v>
<v t="ekr.20060513122450.310"><vh>sGo</vh></v>
<v t="ekr.20060513122450.311"><vh>sSet</vh></v>
<v t="ekr.20060513122450.312"><vh>sGet</vh></v>
<v t="ekr.20060513122450.313"><vh>sIsDict</vh></v>
<v t="ekr.20060513122450.314"><vh>sGetDict</vh></v>
<v t="ekr.20060513122450.315"><vh>sInitDict</vh></v>
<v t="ekr.20060513122450.316"><vh>sSelect</vh></v>
<v t="ekr.20060513122450.317"><vh>sSync</vh></v>
<v t="ekr.20060513122450.318"><vh>sShow</vh></v>
<v t="ekr.20060513122450.319"><vh>sHide</vh></v>
<v t="ekr.20060513122450.320"><vh>sSetText</vh></v>
<v t="ekr.20060513122450.321"><vh>sAddText</vh></v>
</v>
<v t="ekr.20060513122450.53"><vh>class ConfigClass</vh>
<v t="ekr.20060513122450.82"><vh>  __init__</vh></v>
<v t="ekr.20060513122450.54"><vh>  class PageClass</vh>
<v t="ekr.20060513122450.55"><vh>class CHECK</vh>
<v t="ekr.20060513122450.56"><vh>__init__</vh></v>
<v t="ekr.20060513122450.57"><vh>Get</vh></v>
<v t="ekr.20060513122450.58"><vh>Set</vh></v>
</v>
<v t="ekr.20060513122450.59"><vh>class ENTRY</vh>
<v t="ekr.20060513122450.60"><vh>__init__</vh></v>
<v t="ekr.20060513122450.61"><vh>Get</vh></v>
<v t="ekr.20060513122450.62"><vh>Set</vh></v>
</v>
<v t="ekr.20060513122450.63"><vh>class TEXT</vh>
<v t="ekr.20060513122450.64"><vh>__init__</vh></v>
<v t="ekr.20060513122450.65"><vh>Get</vh></v>
<v t="ekr.20060513122450.66"><vh>Set</vh></v>
</v>
<v t="ekr.20060513122450.67"><vh>class LABEL</vh>
<v t="ekr.20060513122450.68"><vh>__init__</vh></v>
</v>
<v t="ekr.20060513122450.69"><vh>class HELP</vh>
<v t="ekr.20060513122450.70"><vh>__init__</vh></v>
<v t="ekr.20060513122450.71"><vh>Help</vh></v>
</v>
<v t="ekr.20060513122450.72"><vh>__init__</vh></v>
<v t="ekr.20060513122450.73"><vh>AddObject</vh></v>
<v t="ekr.20060513122450.74"><vh>BBox</vh></v>
<v t="ekr.20060513122450.75"><vh>AddSep</vh></v>
<v t="ekr.20060513122450.76"><vh>CreateObjects</vh></v>
<v t="ekr.20060513122450.77"><vh>SaveObjects</vh></v>
<v t="ekr.20060513122450.78"><vh>LoadObjects</vh></v>
<v t="ekr.20060513122450.79"><vh>ClearObjects</vh></v>
<v t="ekr.20060513122450.80"><vh>Hide</vh></v>
<v t="ekr.20060513122450.81"><vh>Show</vh></v>
</v>
<v t="ekr.20060513122450.126"><vh> class CodePageClass</vh>
<v t="ekr.20060513122450.127"><vh>__init__</vh></v>
<v t="ekr.20060513122450.128"><vh>CreateObjects</vh>
<v t="ekr.20060513122450.129"><vh>Entries</vh></v>
</v>
</v>
<v t="ekr.20060513122450.99"><vh> class CplPageClass</vh>
<v t="ekr.20060513122450.100"><vh>__init__</vh></v>
<v t="ekr.20060513122450.101"><vh>Browse</vh></v>
<v t="ekr.20060513122450.102"><vh>AddPath</vh></v>
<v t="ekr.20060513122450.103"><vh>CreateObjects</vh>
<v t="ekr.20060513122450.104"><vh>Executable</vh></v>
<v t="ekr.20060513122450.105"><vh>Arguments</vh></v>
<v t="ekr.20060513122450.106"><vh>Paths</vh></v>
<v t="ekr.20060513122450.107"><vh>Symbols</vh></v>
<v t="ekr.20060513122450.108"><vh>Error Detection</vh></v>
</v>
</v>
<v t="ekr.20060513122450.109"><vh> class DbgPageClass</vh>
<v t="ekr.20060513122450.110"><vh>__init__</vh></v>
<v t="ekr.20060513122450.111"><vh>Browse</vh></v>
<v t="ekr.20060513122450.112"><vh>CreateObjects</vh>
<v t="ekr.20060513122450.113"><vh>Executable</vh></v>
<v t="ekr.20060513122450.114"><vh>Arguments</vh></v>
<v t="ekr.20060513122450.115"><vh>Piping</vh></v>
<v t="ekr.20060513122450.116"><vh>Symbols</vh></v>
<v t="ekr.20060513122450.117"><vh>Startup Task</vh></v>
<v t="ekr.20060513122450.118"><vh>Target PID</vh></v>
<v t="ekr.20060513122450.119"><vh>Break info</vh></v>
<v t="ekr.20060513122450.120"><vh>Misc RE</vh></v>
</v>
</v>
<v t="ekr.20060513122450.121"><vh> class ExePageClass</vh>
<v t="ekr.20060513122450.122"><vh>__init__</vh></v>
<v t="ekr.20060513122450.123"><vh>CreateObjects</vh>
<v t="ekr.20060513122450.124"><vh>Args</vh></v>
<v t="ekr.20060513122450.125"><vh>Dll Caller</vh></v>
</v>
</v>
<v t="ekr.20060513122450.94"><vh> class OptPageClass</vh>
<v t="ekr.20060513122450.95"><vh>__init__</vh></v>
<v t="ekr.20060513122450.96"><vh>CreateObjects</vh>
<v t="ekr.20060513122450.97"><vh>Actions Switches</vh></v>
<v t="ekr.20060513122450.98"><vh>Import</vh></v>
</v>
</v>
<v t="ekr.20060513122450.93"><vh>AddPages</vh></v>
<v t="ekr.20060513122450.92"><vh>Apply</vh></v>
<v t="ekr.20060513122450.87"><vh>ClearConfig</vh></v>
<v t="ekr.20060513122450.84"><vh>GetButton</vh></v>
<v t="ekr.20060513122450.83"><vh>GetPage</vh></v>
<v t="ekr.20060513122450.85"><vh>Hide</vh></v>
<v t="ekr.20060513122450.90"><vh>LoadFromFile</vh></v>
<v t="ekr.20060513122450.88"><vh>LoadFromNode</vh></v>
<v t="ekr.20060513122450.91"><vh>SaveToFile</vh></v>
<v t="ekr.20060513122450.89"><vh>SaveToNode</vh></v>
<v t="ekr.20060513122450.86"><vh>Show</vh></v>
</v>
</v>
<v t="ekr.20060513122450"><vh>@file xcc_nodes.py</vh></v>
</v>
</v>
<v t="ekr.20060703162826"><vh>Dialogs</vh>
<v t="ekr.20060703162506"><vh>@file keybindings.py</vh></v>
</v>
<v t="ekr.20041030092101"><vh>Dyna plugins by e</vh>
<v t="ekr.20060110125615"><vh>@url http://rclick.netfirms.com/dyna_menu.py.html  (dyna plugin)</vh></v>
</v>
<v t="ekr.20040722141148"><vh>Examples</vh>
<v t="edream.110203113231.916"><vh>@file examples/__overrideClasses.py</vh></v>
<v t="edream.110203113231.919"><vh>@file examples/override_commands.py</vh></v>
<v t="edream.110203113231.921"><vh>@file examples/redefine_put.py</vh></v>
<v t="ekr.20060621123339"><vh>@file examples/print_cp.py</vh></v>
<v t="ekr.20040828105233"><vh>@file examples/chinese_menu.py</vh></v>
<v t="EKR.20040517080202.3"><vh>@file examples/french_fm.py</vh></v>
</v>
<v t="ekr.20040722134535"><vh>Experimental</vh>
<v t="ekr.20040918165427.4"><vh>Autocompletion dictionary files</vh></v>
</v>
<v t="EKR.20040517075715"><vh>External editors &amp; Open With</vh>
<v t="EKR.20040517075715.1"><vh>@file mod_tempfname.py</vh></v>
<v t="EKR.20040517080049.4"><vh>@file open_shell.py</vh></v>
<v t="bob.20071218121513"><vh>@file open_with.py</vh></v>
<v t="EKR.20040517075715.10"><vh>@file vim.py</vh></v>
<v t="EKR.20040517075715.12"><vh>@file xemacs.py</vh></v>
<v t="EKR.20040517075715.13"><vh>Word export</vh>
<v t="EKR.20040517075715.14"><vh>@file word_export.py</vh></v>
<v t="EKR.20040517075715.20"><vh>@file-nosent word_export.ini</vh></v>
</v>
<v t="ville.20090503124249.1"><vh>@file tomboy_import.py</vh></v>
</v>
<v t="EKR.20040517080049"><vh>Files</vh>
<v t="EKR.20040517080049.1"><vh>@file empty_leo_file.py</vh></v>
<v t="danr7.20060902215215.1"><vh>@file leo_to_html.py</vh></v>
<v t="danr7.20060902083957"><vh>@file leo_to_rtf.py</vh></v>
<v t="ekr.20040419105219"><vh>@file lineNumbers.py</vh></v>
<v t="mork.20041018204908.1"><vh>@file multifile.py</vh></v>
<v t="ekr.20040331151007"><vh>@file niceNosent.py</vh></v>
<v t="ekr.20090622063842.5264"><vh>@file projectwizard.py</vh></v>
<v t="ekr.20081214160729.1"><vh>@file setHomeDirectory.py</vh></v>
</v>
<v t="ekr.20071006112739"><vh>Graph world</vh>
<v t="tbrown.20081223111325.3"><vh>@file backlink.py</vh></v>
<v t="tbrown.20090206153748.1"><vh>@shadow graphcanvas.py</vh></v>
<v t="ekr.20071004090250"><vh>@file graphed.py</vh></v>
</v>
<v t="ekr.20081121105001.2080"><vh>Gui plugins</vh></v>
<v t="ekr.20040722135402"><vh>Icon and status areas</vh>
<v t="ekr.20060328125925"><vh>@file chapter_hoist.py</vh></v>
<v t="ekr.20040331072607"><vh>@file hoist.py</vh></v>
<v t="edream.110203113231.758"><vh>@file nav_buttons.py</vh></v>
<v t="ville.20090518182905.5419"><vh>@file nav_qt.py</vh></v>
<v t="pap.20051010170720"><vh>@file newButtons.py</vh></v>
<v t="ekr.20040108062655"><vh>@file nodenavigator.py</vh></v>
<v t="ekr.20040108095351"><vh>@file rowcol.py</vh></v>
<v t="ekr.20040107092135.2"><vh>@file searchbox.py</vh></v>
<v t="ekr.20060601151845"><vh>@file shortcut_button.py</vh></v>
<v t="bobjack.20080424190315.2"><vh>@file toolbar.py</vh></v>
</v>
<v t="ekr.20080203083146"><vh>IPython bridge</vh>
<v t="ekr.20080201143145"><vh>@file ipython.py</vh></v>
</v>
<v t="ekr.20050402080206"><vh>LeoN</vh>
<v t="ekr.20050402080206.1"><vh>Readme file.</vh></v>
<v t="ekr.20050402080206.2"><vh>Overview</vh>
<v t="ekr.20050402080206.3"><vh>&lt;&lt; Step four, Realtime interaction &gt;&gt;</vh>
<v t="ekr.20050402080206.4"><vh>Design notes</vh>
<v t="ekr.20050402080206.5"><vh>LeoN devellopment status III</vh></v>
<v t="ekr.20050402080206.6"><vh>LeoN devellopment status IV</vh></v>
</v>
<v t="ekr.20050402080206.7"><vh>Notes</vh></v>
</v>
</v>
<v t="ekr.20050402080206.8"><vh>@file LeoN.py</vh></v>
</v>
<v t="EKR.20040517080555"><vh>Menus &amp; translations</vh>
<v t="ekr.20090701111504.5294"><vh>@file contextmenu.py</vh></v>
<v t="ekr.20040828122150"><vh>@file pie_menus.py</vh></v>
<v t="EKR.20040517080555.36"><vh>@file scripts_menu.py</vh></v>
</v>
<v t="ekr.20060530091119"><vh>New colorizer</vh>
<v t="ekr.20071010193720"><vh>@file threading_colorizer.py	</vh></v>
<v t="ekr.20080707101341.1"><vh>@file ../modes/forth.py</vh></v>
</v>
<v t="edream.110203113231.872"><vh>Nodes...</vh>
<v t="tbrown.20080613095157.2"><vh>@file active_path.py</vh></v>
<v t="edream.110203113231.873"><vh>@file at_folder.py</vh></v>
<v t="ekr.20040915085351"><vh>@file at_produce.py</vh></v>
<v t="ktenney.20041211072654.1"><vh>@file at_view.py</vh></v>
<v t="tbrown.20091029123555.5319" descendentVnodeUnknownAttributes="7d71005803000000302e3571017d710258040000007465737471037d710458050000005f6564697471057d7106580400000074686973710758120000006f6b20686f77206120626f757420746869737108737373732e"><vh>@file attrib_edit.py</vh></v>
<v t="mork.20041020082242.1"><vh>@file base64Packager.py</vh></v>
<v t="tbrown.20070322113635"><vh>@file bookmarks.py</vh></v>
<v t="ekr.20060807103814.1"><vh>@file datenodes.py</vh></v>
<v t="ajones.20070122153625"><vh>@file expfolder.py</vh></v>
<v t="mork.20041018091414.1"><vh>@file fastGotoNode.py</vh></v>
<v t="tbrown.20091214233510.5347"><vh>@file geotag.py</vh></v>
<v t="tbrown.20100228141752.5691"><vh>@file leocursor.py</vh></v>
<v t="dan.20090217132953.1"><vh>@file mime.py</vh></v>
<v t="ekr.20050301095332"><vh>@file mod_labels.py</vh></v>
<v t="edream.110203113231.876"><vh>@file read_only_nodes.py</vh></v>
<v t="ekr.20040910070811.1"><vh>@file run_nodes.py</vh></v>
<v t="ekr.20060831165821"><vh>@file slideshow.py</vh></v>
<v t="ekr.20040828103325"><vh>@file startfile.py</vh></v>
<v t="ajones.20070122160142"><vh>@file textnode.py</vh></v>
<v t="ekr.20050329082101"><vh>AutoTrees</vh>
<v t="ekr.20050329082101.1"><vh>AutoTrees plugin</vh>
<v t="ekr.20050329082101.2"><vh>Introduction</vh></v>
<v t="ekr.20050329082101.3"><vh>Why use this?</vh></v>
<v t="ekr.20050329082101.4"><vh>Details</vh></v>
<v t="ekr.20050329082101.5"><vh>How do I create my own handlers?</vh></v>
</v>
<v t="ekr.20050329082101.6"><vh>Example handlers</vh>
<v t="ekr.20050329082101.7"><vh>Testing</vh>
<v t="ekr.20050329082101.8"><vh>@auto-test something</vh>
<v t="ekr.20050329082101.9"><vh>one</vh></v>
<v t="ekr.20050329082101.10"><vh>two</vh></v>
<v t="ekr.20050329082101.11"><vh>three</vh>
<v t="ekr.20050329082101.12"><vh>three-one</vh></v>
<v t="ekr.20050329082101.13"><vh>three-two</vh></v>
<v t="ekr.20050329082101.14"><vh>three-three</vh></v>
</v>
</v>
</v>
<v t="ekr.20050329082101.15"><vh>RSS</vh>
<v t="ekr.20050329082101.16"><vh>@auto-rss http://news.bbc.co.uk/rss/newsonline_uk_edition/world/rss091.xml</vh>
<v t="ekr.20050329092553"><vh>Hundreds die in Indonesia quake</vh></v>
<v t="ekr.20050329092553.1"><vh>Ousted Kyrgyz president defiant</vh></v>
<v t="ekr.20050329092553.2"><vh>Hair 'good source of stem cells'</vh></v>
<v t="ekr.20050329092553.3"><vh>Ashdown sacks top Bosnian Croat</vh></v>
<v t="ekr.20050329092553.4"><vh>Splits paralyse Iraqi parliament</vh></v>
<v t="ekr.20050329092553.5"><vh>Mongolians protest for new poll</vh></v>
<v t="ekr.20050329092553.6"><vh>Libya's Bulgarian medics appeal</vh></v>
<v t="ekr.20050329092553.7"><vh>Schiavo rivals 'agree to autopsy'</vh></v>
<v t="ekr.20050329092553.8"><vh>Would-be sex tourist, 87, jailed</vh></v>
<v t="ekr.20050329092553.9"><vh>Golf: Funk claims Players title</vh></v>
<v t="ekr.20050329092553.10"><vh>Cricket: Series win for Aussies</vh></v>
<v t="ekr.20050329092553.11"><vh>Angola says virus 'under control'</vh></v>
<v t="ekr.20050329092553.12"><vh>Mugabe criticises MDC 'traitors'</vh></v>
<v t="ekr.20050329092553.13"><vh>Ex-US diplomats round on Bolton</vh></v>
<v t="ekr.20050329092553.14"><vh>Brazil quits loan accord with IMF</vh></v>
<v t="ekr.20050329092553.15"><vh>Japanese economy hit by weak data</vh></v>
<v t="ekr.20050329092553.16"><vh>Donors pledge $40m for KR trials</vh></v>
<v t="ekr.20050329092553.17"><vh>Three Romanians missing in Iraq</vh></v>
<v t="ekr.20050329092553.18"><vh>Wolfowitz 'to meet EU officials'</vh></v>
<v t="ekr.20050329092553.19"><vh>Knesset rejects Gaza referendum</vh></v>
<v t="ekr.20050329092553.20"><vh>Militants to attend PLO meeting</vh></v>
<v t="ekr.20050329092553.21"><vh>South Asia cancels tsunami alerts</vh></v>
<v t="ekr.20050329092553.22"><vh>Devastation as Afghan dam bursts</vh></v>
<v t="ekr.20050329092553.23"><vh>Kyrgyzstan's friendly revolution</vh></v>
</v>
<v t="ekr.20050329082101.40"><vh>@auto-rss http://slashdot.org/index.rss</vh>
<v t="ekr.20050329092553.24"><vh>Followup on MS and Brazil in NY Times</vh></v>
<v t="ekr.20050329092553.25"><vh>A9.com with Syndicated Search</vh></v>
<v t="ekr.20050329092553.26"><vh>What's Next At Apple</vh></v>
<v t="ekr.20050329092553.27"><vh>Berkeley Grads' Identity Data Stolen</vh></v>
<v t="ekr.20050329092553.28"><vh>South Korean Gov't. Advocates Linux</vh></v>
<v t="ekr.20050329092553.29"><vh>MS, EU Agree on Name for Windows Sans Media Player</vh></v>
<v t="ekr.20050329092553.30"><vh>Blackbox (Finally) Updated</vh></v>
<v t="ekr.20050329092553.31"><vh>Your Face On the Big Screen</vh></v>
<v t="ekr.20050329092553.32"><vh>Ars Technica Builds Make Magazine's Steadicam</vh></v>
<v t="ekr.20050329092553.33"><vh>New Photovoltaics Made with Titanium Foil</vh></v>
</v>
<v t="ekr.20050329082101.51"><vh>@auto-rss http://www.python.org/channews.rdf</vh>
<v t="ekr.20050329082101.52"><vh>Python 2.4.1 (release candidate 1)</vh></v>
<v t="ekr.20050329082101.53"><vh>Greg Stein, of Google and Apache Software Foundation, to deliver keynote at PyCon</vh></v>
<v t="ekr.20050329082101.54"><vh>New RSS feed for python-dev summaries</vh></v>
<v t="ekr.20050329082101.55"><vh>Guido van Rossum speaking in Palo Alto</vh></v>
<v t="ekr.20050329082101.56"><vh>Python 2.3.5 (final)</vh></v>
<v t="ekr.20050329082101.57"><vh>Security advisory for SimpleXMLRPCServer.py.</vh></v>
<v t="ekr.20050329082101.58"><vh>Deadline for OSCON proposals</vh></v>
<v t="ekr.20050329082101.59"><vh>PyCon abstracts now available</vh></v>
<v t="ekr.20050329082101.60"><vh>PyCon preliminary schedule now available</vh></v>
<v t="ekr.20050329082101.61"><vh>PSF has awarded three grants</vh></v>
<v t="ekr.20050329082101.62"><vh>Python for Nokia Series 60 now available</vh></v>
<v t="ekr.20050329082101.63"><vh>Python 2.4 (final)</vh></v>
<v t="ekr.20050329082101.64"><vh>PyZine issue 7</vh></v>
<v t="ekr.20050329082101.65"><vh>PyCon 2005 Call for Proposals</vh></v>
<v t="ekr.20050329082101.66"><vh>Cameron Laird receives the Frank Willison Award</vh></v>
</v>
</v>
<v t="ekr.20050329082101.67"><vh>Remote</vh>
<v t="ekr.20050329082101.68"><vh>@auto-remote http://www.bbc.co.uk/news.html</vh></v>
</v>
<v t="ekr.20050329082101.69"><vh>Documentation</vh>
<v t="ekr.20050329082101.70"><vh>@auto-doc docutils.core</vh>
<v t="ekr.20050329082101.71"><vh>Component</vh>
<v t="ekr.20050329082101.72"><vh>component_type</vh></v>
<v t="ekr.20050329082101.73"><vh>default_transforms</vh></v>
<v t="ekr.20050329082101.74"><vh>supports</vh></v>
</v>
<v t="ekr.20050329082101.75"><vh>ConfigParser</vh>
<v t="ekr.20050329082101.76"><vh>OPTCRE</vh></v>
<v t="ekr.20050329082101.77"><vh>SECTCRE</vh></v>
<v t="ekr.20050329082101.78"><vh>add_section</vh></v>
<v t="ekr.20050329082101.79"><vh>standard_config_files</vh></v>
<v t="ekr.20050329082101.80"><vh>validation</vh></v>
</v>
<v t="ekr.20050329082101.81"><vh>OptionParser</vh>
<v t="ekr.20050329082101.82"><vh>default_error_encoding_error_handler</vh></v>
<v t="ekr.20050329082101.83"><vh>relative_path_settings</vh></v>
<v t="ekr.20050329082101.84"><vh>settings_defaults</vh></v>
<v t="ekr.20050329082101.85"><vh>settings_spec</vh></v>
<v t="ekr.20050329082101.86"><vh>standard_option_list</vh></v>
<v t="ekr.20050329082101.87"><vh>threshold_choices</vh></v>
<v t="ekr.20050329082101.88"><vh>thresholds</vh></v>
<v t="ekr.20050329082101.89"><vh>version_template</vh></v>
</v>
<v t="ekr.20050329082101.90"><vh>Publisher</vh></v>
<v t="ekr.20050329082101.91"><vh>default_description</vh></v>
<v t="ekr.20050329082101.92"><vh>default_usage</vh></v>
<v t="ekr.20050329082101.93"><vh>frontend</vh></v>
<v t="ekr.20050329082101.94"><vh>io</vh></v>
<v t="ekr.20050329082101.95"><vh>parsers</vh></v>
<v t="ekr.20050329082101.96"><vh>publish_cmdline</vh></v>
<v t="ekr.20050329082101.97"><vh>publish_file</vh></v>
<v t="ekr.20050329082101.98"><vh>publish_string</vh></v>
<v t="ekr.20050329082101.99"><vh>readers</vh></v>
<v t="ekr.20050329082101.100"><vh>sys</vh></v>
<v t="ekr.20050329082101.101"><vh>writers</vh></v>
</v>
</v>
<v t="ekr.20050329082101.102"><vh>News Reader</vh>
<v t="ekr.20050329082101.103"><vh>@auto-news news-server.houston.rr.com/comp.lang.python</vh>
<v t="ekr.20050329082101.104"><vh>@auto-newsitem 356970 - Easy way to check modules for python version compatibility?</vh></v>
<v t="ekr.20050329082101.105"><vh>@auto-newsitem 356972 - Q: Module Shared Data</vh></v>
<v t="ekr.20050329082101.106"><vh>@auto-newsitem 356978 - Re: __contains__ inconsistencies between Python 2.2 and 2.3</vh></v>
<v t="ekr.20050329082101.107"><vh>@auto-newsitem 356979 - Re: [Numeric] column vector faster than row vector in mat multiply?</vh></v>
<v t="ekr.20050329082101.108"><vh>@auto-newsitem 356986 - Python 2.4 removes None data type?</vh></v>
<v t="ekr.20050329082101.109"><vh>@auto-newsitem 356987 - Re: Integer From A Float List?!?</vh></v>
<v t="ekr.20050329082101.110"><vh>@auto-newsitem 356988 - Suspicious header</vh></v>
<v t="ekr.20050329082101.111"><vh>@auto-newsitem 356991 - Re: Suspicious header</vh></v>
<v t="ekr.20050329082101.112"><vh>@auto-newsitem 356992 - survey</vh></v>
<v t="ekr.20050329082101.113"><vh>@auto-newsitem 356993 - Re: Python 2.4 removes None data type?</vh></v>
</v>
</v>
</v>
<v t="ekr.20050329082101.114"><vh>AutoTrees Code</vh>
<v t="ekr.20050329082101.115"><vh>@file autotrees.py</vh></v>
<v t="ekr.20050329082101.145"><vh>@file trees\pluginsManager.txt</vh></v>
<v t="ekr.20050329082101.146"><vh>Example tree handlers</vh>
<v t="ekr.20050329082101.147"><vh>@file trees\test.py</vh></v>
<v t="ekr.20050329082101.150"><vh>@file trees\rss.py</vh></v>
<v t="ekr.20050329082101.153"><vh>@file trees\news.py</vh></v>
<v t="ekr.20050329082101.162"><vh>@file trees\remote.py</vh></v>
<v t="ekr.20050329082101.165"><vh>@file trees\doc.py</vh></v>
</v>
</v>
</v>
</v>
<v t="ekr.20041009112303"><vh>Plugins manager, updater &amp; menu</vh>
<v t="EKR.20040517080555.1"><vh> Plugins menu</vh>
<v t="EKR.20040517080555.2"><vh>@file plugins_menu.py</vh></v>
<v t="EKR.20040517080555.25"><vh>@file pluginsTest.py</vh></v>
<v t="EKR.20040517080555.32"><vh>Notes re plugins menu</vh>
<v t="EKR.20040517080555.33"><vh> Changes made by E.K.Ream</vh></v>
<v t="EKR.20040517080555.34"><vh> Design</vh></v>
<v t="EKR.20040517080555.35"><vh> Initial suggestion from Paul Paterson</vh></v>
</v>
</v>
<v t="ekr.20071029090815"><vh> Plugins manager</vh>
<v t="pap.20041006184225"><vh>@@file old_plugin_manager.py</vh>
<v t="pap.20041006184225.2"><vh>&lt;&lt; version history &gt;&gt;</vh></v>
<v t="ekr.20050329035844"><vh>&lt;&lt; define importLeoGlobals &gt;&gt;</vh></v>
<v t="pap.20041006184225.3"><vh>&lt;&lt; imports &gt;&gt;</vh></v>
<v t="pap.20041009141528"><vh>&lt;&lt; todo &gt;&gt;</vh></v>
<v t="ekr.20060107092833"><vh>Module-level Functions</vh>
<v t="ekr.20050213122944"><vh>init</vh></v>
<v t="ekr.20041231134702"><vh>topLevelMenu</vh></v>
</v>
<v t="pap.20041006193459"><vh>Error Classes</vh></v>
<v t="pap.20050305144720"><vh>inColumns</vh></v>
<v t="pap.20041009140132"><vh>UI</vh>
<v t="pap.20041008224318"><vh>class PluginView</vh>
<v t="pap.20041008224318.1"><vh>PluginView.__init__</vh>
<v t="pap.20041008230728"><vh>Name</vh></v>
<v t="pap.20041008230728.2"><vh>Version</vh></v>
<v t="pap.20041008231028"><vh>Status</vh></v>
<v t="pap.20050305151106"><vh>Group</vh></v>
<v t="pap.20041008230728.1"><vh>Filename</vh></v>
<v t="pap.20041008231930"><vh>Has INI</vh></v>
<v t="pap.20041009135426"><vh>Has Top level</vh></v>
<v t="pap.20041009135426.1"><vh>Priority</vh></v>
<v t="pap.20041008231028.1"><vh>Description &amp; Versions</vh>
<v t="pap.20050305170921"><vh>&lt;&lt; Description &gt;&gt;</vh></v>
<v t="pap.20050305170921.1"><vh>&lt;&lt; Version History &gt;&gt;</vh></v>
</v>
<v t="pap.20041008231028.2"><vh>Commands</vh></v>
<v t="pap.20041008231028.3"><vh>Handlers</vh></v>
<v t="pap.20041009224739"><vh>Requires</vh></v>
</v>
<v t="pap.20041008224625"><vh>showPlugin</vh></v>
</v>
<v t="pap.20041008225226"><vh>class PluginList</vh>
<v t="pap.20041008225226.1"><vh>__init__</vh></v>
<v t="pap.20041006215903"><vh>onClick</vh></v>
<v t="pap.20041008223406"><vh>populateList</vh></v>
<v t="pap.20041008233733"><vh>getSelectedPlugin</vh></v>
<v t="pap.20050305160811"><vh>setSecondFilterList</vh></v>
<v t="pap.20050605192322"><vh>getAllPlugins</vh></v>
</v>
<v t="pap.20051102233259"><vh>class LoadOrderView</vh>
<v t="pap.20051102233259.1"><vh>__init__</vh></v>
<v t="pap.20051103000804"><vh>initList</vh></v>
<v t="pap.20051102233801"><vh>moveFirst</vh></v>
<v t="pap.20051102233937"><vh>moveUp</vh></v>
<v t="pap.20051102233937.1"><vh>moveDown</vh></v>
<v t="pap.20051102233937.2"><vh>moveLast</vh></v>
<v t="pap.20051103002306"><vh>onClick</vh></v>
<v t="pap.20051103001707"><vh>save</vh></v>
<v t="pap.20051103002808"><vh>getSelection</vh></v>
</v>
<v t="pap.20041009013256"><vh>class LocalPluginList</vh></v>
<v t="pap.20041009013556"><vh>class RemotePluginList</vh></v>
<v t="pap.20041006215108"><vh>class ManagerDialog</vh>
<v t="pap.20041006215108.1"><vh>ManagerDialog._init__</vh>
<v t="ekr.20041010110321"><vh>&lt;&lt; create top level window &gt;&gt; ManagerDialog</vh></v>
<v t="ekr.20041010110321.1"><vh>&lt;&lt; create frames &gt;&gt;</vh></v>
<v t="pap.20041006223915.1"><vh>&lt;&lt; create pluginView &gt;&gt;</vh></v>
<v t="pap.20041006223915"><vh>&lt;&lt; create PluginList &gt;&gt;</vh></v>
<v t="pap.20051102225718"><vh>&lt;&lt; create order &gt;&gt;</vh></v>
<v t="pap.20041006223915.2"><vh>&lt;&lt; create local buttons &gt;&gt;</vh></v>
<v t="pap.20041009020000"><vh>&lt;&lt; create remote buttons &gt;&gt;</vh></v>
<v t="pap.20041006224808"><vh>&lt;&lt; create message bar &gt;&gt;</vh></v>
</v>
<v t="pap.20041006224151"><vh>enablePlugin</vh></v>
<v t="ekr.20050329080427"><vh>setPaths</vh></v>
<v t="pap.20041006224206"><vh>disablePlugin</vh></v>
<v t="pap.20041006221212"><vh>initLocalCollection</vh></v>
<v t="pap.20041006224216"><vh>checkUpdates</vh>
<v t="ekr.20041010111700.1"><vh>&lt;&lt; define callbackPrint &gt;&gt;</vh></v>
<v t="pap.20041009163613"><vh>&lt;&lt; put up a connection failed dialog &gt;&gt;</vh></v>
<v t="pap.20041009163613.1"><vh>&lt;&lt; put up a file error dialog &gt;&gt;</vh></v>
</v>
<v t="pap.20041009020000.1"><vh>installPlugin</vh></v>
<v t="pap.20041009020000.2"><vh>viewPlugin</vh></v>
<v t="pap.20051103001158"><vh>selectPage</vh></v>
<v t="pap.20041009025708"><vh>checkConflicts</vh></v>
</v>
<v t="pap.20041009233937"><vh>class ListReportDialog</vh>
<v t="pap.20041009233937.1"><vh>ListReportDialog.__init__</vh>
<v t="ekr.20041010111700"><vh>&lt;&lt; create the top level frames &gt;&gt;</vh></v>
<v t="pap.20041009234256"><vh>&lt;&lt; create the ScrolledListBox &gt;&gt;</vh></v>
<v t="pap.20041009234256.1"><vh>&lt;&lt; create the OptionMenu &gt;&gt;</vh></v>
</v>
<v t="pap.20041009234850"><vh>getFilterOptions</vh></v>
<v t="pap.20041009235457"><vh>populateList</vh></v>
</v>
</v>
<v t="pap.20041009140132.1"><vh>Implementation</vh>
<v t="pap.20051103001707.1"><vh>class OrderedDict</vh>
<v t="pap.20051103002042"><vh>__init__</vh></v>
<v t="pap.20051103001707.3"><vh>__getitem__</vh></v>
<v t="pap.20051104224633"><vh>__setitem__</vh></v>
<v t="pap.20051103001922"><vh>__iter__</vh></v>
<v t="pap.20051103004807"><vh>__contains__</vh></v>
<v t="pap.20051104224544"><vh>get</vh></v>
<v t="pap.20051103001743"><vh>keys</vh></v>
<v t="pap.20051104221348"><vh>values</vh></v>
<v t="pap.20051103003310"><vh>moveFirst</vh></v>
<v t="pap.20051103004312"><vh>moveUp</vh></v>
<v t="pap.20051103004312.1"><vh>moveDown</vh></v>
<v t="pap.20051103003447"><vh>moveLast</vh></v>
</v>
<v t="pap.20041006184225.6"><vh>class Plugin</vh>
<v t="pap.20041006185727.1"><vh>__init__</vh></v>
<v t="pap.20041006193013"><vh>initFrom</vh></v>
<v t="ekr.20041113095851"><vh>Must be overridden in subclasses...</vh>
<v t="pap.20041006212105"><vh>getName</vh></v>
<v t="pap.20041006193239"><vh>getContents</vh></v>
</v>
<v t="pap.20050317183038"><vh>getNiceName</vh></v>
<v t="pap.20051001230822"><vh>getSummary</vh></v>
<v t="pap.20041006194759"><vh>getDetails</vh></v>
<v t="pap.20041006200000"><vh>hasPattern</vh></v>
<v t="pap.20041009230351"><vh>hasImport</vh></v>
<v t="ekr.20050121183012"><vh>getMatch (new)</vh></v>
<v t="pap.20041006194759.1"><vh>getPattern</vh></v>
<v t="pap.20041006194917"><vh>getPatterns</vh></v>
<v t="pap.20041006220611"><vh>asString</vh></v>
<v t="pap.20041009023004"><vh>writeTo</vh></v>
<v t="pap.20051001232117"><vh>ensureDetails</vh></v>
<v t="pap.20050305165333"><vh>getVersionHistory</vh></v>
<v t="pap.20041009225149"><vh>getRequiredModules</vh>
<v t="pap.20041009230050"><vh>&lt;&lt; Check UI toolkits &gt;&gt;</vh></v>
<v t="pap.20041009230652"><vh>&lt;&lt; Check other plugins &gt;&gt;</vh></v>
<v t="pap.20041009230953"><vh>&lt;&lt; Directives &gt;&gt;</vh></v>
</v>
</v>
<v t="pap.20041006192557"><vh>class LocalPlugin(Plugin)</vh>
<v t="pap.20041006212131"><vh>getName</vh></v>
<v t="pap.20041006193459.1"><vh>getContents</vh></v>
</v>
<v t="pap.20041006203049"><vh>class CVSPlugin</vh>
<v t="pap.20041006212238"><vh>getName</vh></v>
<v t="pap.20041006213006"><vh>getContents</vh></v>
<v t="pap.20041009224435"><vh>getViewFilename</vh></v>
</v>
<v t="pap.20041006190628"><vh>class PluginCollection</vh>
<v t="pap.20041006192257"><vh>__init__</vh></v>
<v t="pap.20041006191239"><vh>initFrom</vh></v>
<v t="pap.20051001231439"><vh>getPluginDetails</vh></v>
<v t="pap.20041006191829"><vh>getAllFiles</vh></v>
<v t="pap.20041006221438"><vh>sortedNames</vh></v>
<v t="pap.20041008220723"><vh>setEnabledStateFrom</vh></v>
<v t="pap.20041008233947"><vh>enablePlugin</vh></v>
<v t="pap.20041008234033"><vh>disablePlugin</vh></v>
<v t="pap.20041009025708.1"><vh>getConflicts</vh></v>
<v t="pap.20050305161126"><vh>getGroups</vh></v>
</v>
<v t="pap.20041006190817"><vh>class LocalPluginCollection</vh>
<v t="ekr.20060107092833.1"><vh>ctor</vh></v>
<v t="pap.20041006191803"><vh>getFilesMatching</vh></v>
<v t="pap.20041006191803.1"><vh>getAllFiles</vh></v>
<v t="pap.20051002002852"><vh>enablePlugin</vh>
<v t="pap.20051007193759"><vh>&lt;&lt; Hooks to send &gt;&gt;</vh></v>
<v t="pap.20051002004135"><vh>&lt;&lt; Send hooks &gt;&gt;</vh></v>
<v t="pap.20051008005923"><vh>&lt;&lt; Add plugin menu &gt;&gt;</vh></v>
</v>
</v>
<v t="pap.20041006201849"><vh>class CVSPluginCollection</vh>
<v t="pap.20041006202102"><vh>getFilesMatching</vh></v>
<v t="pap.20041006202703"><vh>getListingPage</vh></v>
<v t="pap.20041009021201"><vh>setEnabledStateFrom</vh></v>
</v>
<v t="pap.20041006232717"><vh>class EnableManager</vh>
<v t="pap.20041006232717.1"><vh>initFrom</vh></v>
<v t="pap.20041009003552"><vh>writeFile</vh></v>
<v t="pap.20041008200028"><vh>parseManagerText</vh></v>
<v t="pap.20041008234256"><vh>updateState</vh></v>
<v t="pap.20051104222141"><vh>_updateItemState</vh></v>
<v t="pap.20051104220845"><vh>storeOrder</vh></v>
</v>
</v>
</v>
</v>
<v t="pap.20050605183206"><vh>@file leoupdate.py</vh></v>
</v>
<v t="ekr.20041001210557"><vh>Scripting</vh>
<v t="ekr.20060328125248"><vh>@file mod_scripting.py</vh></v>
<v t="tbrown.20090513125417.5244"><vh>@file interact.py</vh></v>
<v t="tbrown.20100226095909.12777"><vh>@file leoscreen.py</vh></v>
<v t="ville.20090815203828.5235"><vh>@file spydershell.py</vh></v>
</v>
<v t="ekr.20050111122605"><vh>Servers</vh>
<v t="ekr.20100907114130.5503"><vh>example leoremote client</vh></v>
<v t="EKR.20040517080250.1"><vh>@file mod_http.py</vh></v>
<v t="ville.20091009202416.10040"><vh>@file leoremote.py</vh></v>
</v>
<v t="ekr.20101004082701.5674"><vh>Slideshows and screenshots</vh>
<v t="ekr.20100908110845.5505"><vh>@file screenshots.py</vh></v>
</v>
<v t="ekr.20071113084440"><vh>Testing</vh>
<v t="ekr.20071113084440.1"><vh>@file test/syntax_error_plugin.py</vh></v>
<v t="ekr.20071113085315"><vh>@file test/failed_to_load_plugin.py</vh></v>
<v t="ekr.20050130120433"><vh>@file test/failed_import.py</vh></v>
<v t="ekr.20080214092357"><vh>@file test/ekr_test.py</vh></v>
</v>
<v t="ekr.20050306081349"><vh>Text formatting</vh>
<v t="mork.20041010095009"><vh>@file xsltWithNodes.py</vh></v>
<v t="ekr.20040331071919"><vh>Leo to AsciiDoc</vh>
<v t="ekr.20050128070307"><vh>@url http://www.marshallresearch.com/michael-dawson/os/leo.html</vh></v>
<v t="ekr.20040331071919.38"><vh>Leo 2 AsciiDoc Users Guide</vh>
<v t="ekr.20040331071919.2"><vh>About this document</vh>
<v t="ekr.20040331071919.3"><vh>License</vh>
<v t="ekr.20040331071919.4"><vh>License document</vh></v>
</v>
</v>
<v t="ekr.20040331071919.39"><vh>Installation</vh></v>
<v t="ekr.20040331071919.40"><vh>Operation</vh>
<v t="ekr.20040331071919.41"><vh>Directives</vh>
<v t="ekr.20040331071919.42"><vh>Configuration</vh></v>
</v>
<v t="ekr.20040331071919.43"><vh>Markup</vh>
<v t="ekr.20040331071919.44"><vh>Standard AsciiDoc Markup</vh>
<v t="ekr.20040331071919.45"><vh>Headings</vh></v>
<v t="ekr.20040331071919.46"><vh>Lists</vh></v>
<v t="ekr.20040331071919.47"><vh>URLs</vh></v>
</v>
</v>
</v>
</v>
<v t="ekr.20040331071919.1"><vh>Leo 2 AsciiDoc Developers Guide</vh>
<v t="ekr.20040331071919.2"></v>
<v t="ekr.20040331071919.5"><vh>Version, Requirements</vh></v>
<v t="ekr.20040331071919.6"><vh>The General Approach</vh>
<v t="ekr.20040331071919.7"><vh>Markup Added</vh></v>
</v>
<v t="ekr.20040331071919.8"><vh>&lt;&lt; root of mod_leo2ascd.py &gt;&gt;</vh>
<v t="ekr.20040331071919.9"><vh>&lt;&lt; Key Functions &gt;&gt;</vh></v>
<v t="ekr.20040331071919.10"><vh>&lt;&lt; Declarations and Utilities &gt;&gt;</vh>
<v t="ekr.20040331071919.11"><vh>&lt;&lt; The Code -- Declarations and Utilities &gt;&gt;</vh></v>
</v>
<v t="ekr.20040331071919.12"><vh>&lt;&lt; Write the outline tree as AsciiDoc file &gt;&gt;</vh>
<v t="ekr.20040331071919.13"><vh>&lt;&lt; Write a node &gt;&gt;</vh></v>
</v>
</v>
<v t="ekr.20040331071919.14"><vh>Other programs</vh></v>
<v t="ekr.20040331071919.15"><vh>&lt;&lt;Appendix: AsciiDoc &gt;&gt;</vh>
<v t="ekr.20040331071919.16"><vh>&lt;&lt; Configuration file &gt;&gt;</vh></v>
<v t="ekr.20040331071919.17"><vh>&lt;&lt; Patches &gt;&gt;</vh></v>
</v>
<v t="ekr.20040331071919.18"><vh>&lt;&lt;Appendix: DocBook&gt;&gt;</vh>
<v t="ekr.20040331071919.19"><vh>&lt;&lt; Tool Chain &gt;&gt;</vh></v>
<v t="ekr.20040331071919.20"><vh>&lt;&lt; Make File &gt;&gt;</vh></v>
<v t="ekr.20040331071919.21"><vh>&lt;&lt; Style Sheets &gt;&gt;</vh>
<v t="ekr.20040331071919.22"><vh>&lt;&lt; General &gt;&gt;</vh></v>
<v t="ekr.20040331071919.23"><vh>&lt;&lt; Customize &gt;&gt;</vh></v>
<v t="ekr.20040331071919.24"><vh>&lt;&lt; HTML: One File &gt;&gt;</vh></v>
<v t="ekr.20040331071919.25"><vh>&lt;&lt; HTML: Individual Pages &gt;&gt;</vh></v>
<v t="ekr.20040331071919.26"><vh>&lt;&lt; HTML: base css style sheet &gt;&gt;</vh></v>
<v t="ekr.20040331071919.27"><vh>&lt;&lt; HTML: css style sheet &gt;&gt;</vh></v>
<v t="ekr.20040331071919.28"><vh>&lt;&lt; HTML: common &gt;&gt;</vh></v>
<v t="ekr.20040331071919.29"><vh>&lt;&lt; PDF &gt;&gt;</vh></v>
</v>
</v>
<v t="ekr.20040331071919.30"><vh>&lt;&lt;Appendix: XEmacs Text Editor&gt;&gt;</vh>
<v t="ekr.20040331071919.31"><vh>&lt;&lt; Open_With Plugin &gt;&gt;</vh></v>
<v t="ekr.20040331071919.32"><vh>&lt;&lt; Open_Tree Plugin &gt;&gt;</vh></v>
<v t="ekr.20040331071919.33"><vh>&lt;&lt; Filename modification &gt;&gt;</vh></v>
<v t="ekr.20040331071919.34"><vh>&lt;&lt; Kill Temporary Buffers &gt;&gt;</vh></v>
<v t="ekr.20040331071919.35"><vh>&lt;&lt; MMM-mode &gt;&gt;</vh></v>
<v t="ekr.20040331071919.36"><vh>&lt;&lt; Insert indexterm &gt;&gt;</vh></v>
<v t="ekr.20040331071919.37"><vh>&lt;&lt; Indent Leo comments &gt;&gt;</vh></v>
</v>
</v>
</v>
<v t="ekr.20050817132814"><vh>rst3</vh>
<v t="ekr.20090704103932.5160"><vh>@file leo_pdf.py</vh></v>
<v t="ekr.20050805162550"><vh>@file rst3.py</vh></v>
</v>
<v t="tbrown.20100318101414.5990"><vh>@file viewrendered.py</vh></v>
<v t="ekr.20100103093121.5329"><vh>@file stickynotes.py</vh></v>
<v t="ekr.20100103093121.5339"><vh>@file stickynotes_plus.py</vh></v>
<v t="ekr.20070119094733.1"><vh>@file dtest.py</vh></v>
</v>
<v t="ekr.20061023142737"><vh>UNL plugin</vh>
<v t="rogererens.20041014110709"><vh>To do</vh></v>
<v t="ekr.20061023142737.1"><vh>Tests</vh>
<v t="rogererens.20041130095659"><vh>@url 'file: ./../../plugins/leoPlugins.leo#Plugins--&gt;UNL plugin--&gt;To do'</vh></v>
<v t="ekr.20061023141638"><vh>@url 'file:./../doc/leoDocs.leo#Users Guide--&gt; Chapter 8: Customizing Leo'</vh></v>
<v t="ekr.20061023141459"><vh>@url 'Plugins--&gt;UNL plugin--&gt;@file UNL.py'</vh></v>
</v>
<v t="rogererens.20041013082304"><vh>@file UNL.py</vh></v>
</v>
<v t="ekr.20040915073259"><vh>Windows</vh>
<v t="ekr.20050227071948"><vh> cleo</vh>
<v t="ekr.20050227072121"><vh>Notes</vh>
<v t="ekr.20050227071948.1"><vh>TODO</vh>
<v t="ekr.20050227071948.2"><vh>pixmap icons</vh></v>
<v t="ekr.20050227071948.3"><vh>colour selector</vh></v>
<v t="ekr.20050227071948.4"><vh>popup location</vh></v>
<v t="ekr.20050227071948.7"><vh>group annotations</vh></v>
<v t="ekr.20050227071948.8"><vh>archetype based search,navigation</vh></v>
<v t="ekr.20050227071948.9"><vh>sort by type</vh></v>
<v t="ekr.20050227071948.10"><vh>fonts</vh></v>
<v t="ekr.20050227071948.11"><vh>question marks</vh></v>
</v>
<v t="ekr.20050227071948.12"><vh>Done</vh>
<v t="ekr.20050227071948.13"><vh>Clear All markings</vh></v>
<v t="ekr.20050227071948.15"><vh>arbitary colouring</vh></v>
<v t="ekr.20050227071948.16"><vh>rename to cleo</vh></v>
<v t="ekr.20050227071948.17"><vh>headline colours</vh></v>
<v t="ekr.20050227071948.18"><vh>priority colouring</vh></v>
<v t="ekr.20050227071948.19"><vh>archtetype colouring</vh></v>
</v>
<v t="ekr.20050227071948.20"><vh>Problems</vh>
<v t="ekr.20050227071948.6"><vh>No attributes for @file nodes</vh></v>
<v t="ekr.20050227071948.21"><vh>features are not orthogonal</vh></v>
<v t="ekr.20050227071948.22"><vh>Too many colours !!</vh></v>
</v>
<v t="ekr.20050227071948.23"><vh>BUGS</vh>
<v t="ekr.20050227071948.24"><vh>popup location</vh></v>
</v>
<v t="ekr.20050227071948.27"><vh>colour table</vh></v>
<v t="ekr.20050227071948.28"><vh>Notes</vh>
<v t="ekr.20050227071948.29"><vh>drawing hooks</vh></v>
</v>
</v>
<v t="tbrown.20060828111141"><vh>@file cleo.py</vh></v>
</v>
<v t="ekr.20050303080042"><vh> footprints</vh>
<v t="ekr.20050303080236"><vh>To do</vh></v>
<v t="ekr.20050303080042.1"><vh>@nosent footprints.ini</vh></v>
<v t="pap.20041020001240"><vh>@file footprints.py</vh></v>
</v>
<v t="ville.20090310191936.10"><vh>@file colorize_headlines.py</vh></v>
<v t="ekr.20060506070443.1"><vh>@file detect_urls.py</vh></v>
<v t="mork.20041018162155.1"><vh>@file EditAttributes.py</vh></v>
<v t="ekr.20040915073259.1"><vh>@file maximizeNewWindows.py</vh></v>
<v t="mork.20041022155742.1"><vh>@file nodebar.py</vh></v>
<v t="ville.20090314215508.4"><vh>@file quicksearch.py</vh></v>
<v t="edream.110203113231.924"><vh>@file redirect_to_log.py</vh></v>
<v t="ekr.20101104190737.5629"><vh>@file scrolledmessage.py</vh></v>
<v t="tbrown.20090119215428.2"><vh>@file todo.py</vh></v>
<v t="ekr.20040915075530"><vh>@file UASearch.py</vh></v>
<v t="ekr.20040831122004"><vh>@file UniversalScrolling.py</vh></v>
<v t="ekr.20040831115238"><vh>@file URLloader.py</vh></v>
<v t="tbrown.20090322083202.1"><vh>NOTE: todo.py is qt verion of cleo.py (which is tk)</vh></v>
</v>
<v t="ekr.20101110084839.5681"><vh>New plugins</vh>
<v t="ekr.20101110084839.5682"><vh>@file bzr_qcommands.py</vh></v>
<v t="ekr.20101110091234.5689"><vh>@file debugger_pudb.py</vh></v>
<v t="ekr.20101110091234.5700"><vh>@file leo_interface.py</vh></v>
<v t="ekr.20101110092851.5742"><vh>@file leoOPML.py</vh></v>
<v t="ekr.20101110092851.5812"><vh>@file initinclass.py</vh></v>
<v t="ekr.20101110093301.5818"><vh>@file mod_framesize.py</vh></v>
<v t="ekr.20101110093449.5822"><vh>@file mod_leo2ascd.py</vh></v>
<v t="ekr.20101110094759.5843"><vh>@file mod_speedups.py</vh></v>
<v t="ekr.20101110095202.5852"><vh>@file searchbar.py</vh></v>
<v t="ekr.20101110095202.5882"><vh>@file zenity_file_dialogs.py</vh></v>
</v>
</v>
</vnodes>
<tnodes>
<t tx="EKR.20040517075715"></t>
<t tx="EKR.20040517075715.13"></t>
<t tx="EKR.20040517075715.20">[Main]
use_styles = Yes
use_section_numbers = Yes
use_current_document = Yes
max_headings = 6
header_style = Heading

</t>
<t tx="EKR.20040517080049"></t>
<t tx="EKR.20040517080555"></t>
<t tx="EKR.20040517080555.1"></t>
<t tx="EKR.20040517080555.32">@nocolor</t>
<t tx="EKR.20040517080555.33">Reorganized the code so I can find various classes more easily.
Used @others to simply the outline.

Sorted all entries in dialogs.
Sorted all entries in Plugins menu, regardless of whether they are configurable.

For all dialogs:
    Added top ivar and removed root/master params and ivars.
    Added Leo icon and title.
    Centered dialogs.

Ctors now run all dialogs as modal dialogs: this could easily be undone.

Used a grid in the properties dialog to align widgets.</t>
<t tx="EKR.20040517080555.34">- We will use a new settings file called leoSettings.txt:
- Each setting will have its _own section_ in leoSettings.txt with the following items (most optional)
    val = present value of settings: Use parent setting if this does not exist.
    help = help string (displayed near setting if it exists)
    prompt = prompt string (defaults to setting name, i.e., the section name)
    group = name of group dialog containing this item (use general section if this does not exist)
    type = one of the following:
        value			meaning
        bool			followed by True/False prompts for radio buttons
        color			color picker
        font			font picker
        parent			name of parent config file (set/get setting in that file)
        entry			followed by arbitrary text in an entry widget
        text			followed by arbitrary text in a text widget
        number			any number, or followed by a range of valid values for an entry widget.
        numberlist  followed by a list valid values for a listbox.
        list			followed by a list of valid strings in a listbox.
Notes:
- We could use yaml or ConfigParser or Pickle.  yaml might be best.
- The options dialog will have a separate frame for each group or subgroup.
- We will want a Create Options file command (useful for converting old leoConfig.txt files)
- All options may have a use parent settings (for all widgets?)
- The separate "Groups" section may indicate which groups are subgroups of other groups for multi-level displays.</t>
<t tx="EKR.20040517080555.35">I wrote myself a plug-in which would automatically save the Leo file every so often and in doing so realized that it would be useful to be able to configure the interval between saves. Anyway, to cut a long story short, I generalized the idea and came up with the attached patch. 
 
All code resides under the "Plug in changes" node. The additions are all under the "create the plug-in menu" node with another couple of lines in "createMenuBar". Structurally this is ugly - but it helps keep all the changes in one place!
 
The basic idea is to allow plug-ins to be configured and also allow them to expose additional functions which can be accessed by a menu item. The advantage is that people don't have to mess with adding menus to Leo. Existing plug-ins don't need to be changed in any way to work with the new patch.
 
Ok, here's what it does	
 
1. A new "Plug-ins" menu item is added
 
2. Each plug-in gets an "About x	" entry.
 
    - clicking on "About x..." brings up an about box which shows name, version and documentation for the plug in
    - name comes from the module name
    - version is the module __version__ if present
    - documentation is the module docstring 
 
3. If the plug-in is configurable then a sub menu is created
 
    - configurable means that a corresponding ".ini" file is found with the same names as the plug-in (ie mod_image.py has mod_image.ini)
    - the sub menu contains
        - the "About x..." as before
        - a "Properties..." menu entry to edit the properties (*)
 
4. A further search is made for plug-in specific commands
 
    - we look for functions called "cmd_*" in the module
    - if found we add them to the plug-in menu
    - when you click on the menu item the function is called with a single parameter
 
(*) How does the property window work,
 
5. The property window reads the ini file which is assumed to be in standard ini file format (ie sections and parameters)
    - each section gets a frame in the window
    - each property gets an entry box
 
6. From the property window the user can "Cancel" or "OK", which saves changes
 
7. If the module contains an "applyConfiguration" function then there is also an "Apply" button on the form. The apply configuration function is called with the current configuration when the "Apply" button is pressed.
</t>
<t tx="EKR.20040517090508">@nocolor

Enable plugins by creating @enabled-plugins nodes in leoSettings files, typically myLeoSettings.leo.  See the node

Users Guide--&gt;Chapter 8: Customizing Leo--&gt;@rst html\customizing.html--&gt;Specifying settings--&gt;Complex settings nodes

in LeoDocs.leo for full details.

**Important**: Leo no longer uses pluginsManager.txt to enable or disable plugins.

@color</t>
<t tx="edream.110203113231.618">@ It is usually best _not_ to catch exceptions in plugins:
doHook catches all exceptions and disables further calls to plugins.

If a plugin catches exceptions during startup it should either:

- raise the exception again.
- provide an init function at the top level that reports the failure.
@c

@language python
@tabwidth -4
@pagewidth 80
</t>
<t tx="edream.110203113231.667"></t>
<t tx="edream.110203113231.668"></t>
<t tx="edream.110203113231.722"></t>
<t tx="edream.110203113231.729"></t>
<t tx="edream.110203113231.872"></t>
<t tx="ekr.20040331071919"></t>
<t tx="ekr.20040331071919.1">@language plain
@ascfile "doc/mod_asc_dev.asc"
@doc                
@ascskip # Time-stamp: "Mon, Jan 19 15:30 CST 2004  michael@redpriest Leo_AsciiDoc_Developers_Guide_141612300.txt"
Preface
-------

Leo2AsciiDoc is a small Python program which has been built to be used as
a plugin module for the Leo outlining editor.

This is the Developer Documentation and source code listing of
Leo2AsciiDoc.

Leo2AsciiDoc enables the contents of Leo outlines to be published to
HTML or PDF via the DocBook XML set of publishing tools.  Plain text
from the Leo outline is transformed into a final result that has:

    - typeset body text, in which bulleted and numbered lists,
      variable lists, page numbers, URLs, index terms,and bold and
      italic text are automatically recognized.
    - typeset Headings
    - a Table of Contents
    - an Index containing any items marked by the user, and any
      Python classes or functions.

indexterm:[Literate Programming]
For programmers, Leo2AsciiDoc enables a simplified version of
Literate Programming: all the documentation and code for a program
can be written in a Leo outline, and published with just a few
keystrokes.  As is normal for a Leo outline, Leo can also extract
the source code from the outline and package it into text files,
ready to be run or compiled.

Specifically, what the Leo2AsciiDoc program does is:

    - wait to be called by the Leo menu (File; Export; Export to
      AsciiDoc), and then
    - read a part of a Leo outline, and
    - write the contents to a text file that can be understood by
      the AsciiDoc program.

From there:

    - the xref:AsciiDoc[] program can then convert that text file to
      another text file that is in the DocBook XML format.
    - the standard collection of xref:DocBook[] tools can then format the
      text in HTML (web page) files or as a typeset PDF file.
    - Once set up, the whole process happens quickly and
      automatically, usually with a simple "make" command.

Here are some web locations for the items I've referenced above:

Leo::    
    http://webpages.charter.net/edreamleo/front.html[]
Python::
    http://www.python.org[]
Docbook::    
    http://docbook.org/[]
Literate Programming::
    http://www.literateprogramming.com/[]
AsciiDoc::
    http://www.methods.co.nz/asciidoc/[]
PDF::
    Adobe provides a free program, Adobe Acrobat Reader (Windows &amp;
    Linux), that is used to read and print documents produced in the
    Adobe Portable Document Format.
    http://www.adobe.com/products/acrobat/readermain.html[]

---
Michael Dawson
Marshall Research
michael_dawson at marshallresearch dot com
---
@code</t>
<t tx="ekr.20040331071919.10">@doc
@ascskip # Time-stamp: "Tue, Nov 25 11:25 CST 2003  michael@redpriest _Declarations_and_Utilities__140958380.py"

Next, we define new directives to control the way we export the Leo
text, as seen in this extract from the main code.  Directives start
with an "@" character as the first character in the line.

@code
&lt;&lt;New Leo2AsciiDoc directives&gt;&gt;=
patternAscDirectiveConfig = re.compile(r'^@ascconfig\W+(\w+)\s+(\S+)')
patternAscDirectiveFile = re.compile(r'^@ascfile *"*([\w\\/\.]*)"*')
patternAscDirectiveExit = re.compile(r"^@ascexit")
patternAscDirectiveIgnore = re.compile(r"^@ascignore")
patternAscDirectiveSkip = re.compile(r"^@ascskip")
patternAscDirectiveSkipToggle = re.compile(r"^@ascskip\s*(\w+)+.*")
@doc

Next, a class to simulate constants, and make it easy to use
them. We create a class whose variables can be assigned, but not
reassigned inadvertently. As well, the "Next" function gives us an
easy way to acquire a variable of unique value when we don't care
what that value actually is, just that it is unique.

@code
&lt;&lt;Simulate Python constants&gt;&gt;=
class   _AssignUniqueConstantValue:
    """ Provide unique value to be used as a constant """
    def __init__(self):
        self.UniqueInternalValue = 0
        self.Assign_at_start()

    class ConstError(TypeError): pass
    def __setattr__(self,name,value):
        if self.__dict__.has_key(name):
            if name != "UniqueInternalValue":
                raise self.ConstError("Can't rebind const(%s)"%name)
        self.__dict__[name]=value

    def Assign_at_start(self):
        self.END_PROGRAM = self.Next()   # signal abort
        self.LINE_WAS_NONE = self.Next() # describe last line printed
        self.LINE_WAS_CODE = self.Next()
        self.LINE_WAS_DOC  = self.Next()
        self.LINE_WAS_HEAD = self.Next()
        self.LINE_PENDING_NONE  = self.Next() # describe next line to be printed
        self.LINE_PENDING_CODE  = self.Next()
        self.LINE_PENDING_DOC   = self.Next()

    def Next(self):
        self.UniqueInternalValue += 1
        return(self.UniqueInternalValue)
@doc
@ascexit
@code
&lt;&lt;The Code -- Declarations and Utilities&gt;&gt;</t>
<t tx="ekr.20040331071919.11">@
@ascskip # Time-stamp: "Fri, Dec 19 10:42 CST 2003  michael@redpriest _The_Code_Declarations_and_Utilities__140568852.py"

Here we begin the Python program, importing the modules we need, and
signing on as the Leo2AsciiDoc module in the Leo log window.
@c

import leo.core.leoGlobals as g

import re
import os

# g.es("---mod_leo2asc 0.4-------")

@
Next, a class to hold our configuration data. Users can change the
Leo2AsciiDoc configuration by including an "@ascconfig" directive in the
body text of a Leo outline, either in the root node or in the same
node as an "@ascfile" directive.  User directives in the root node
override the Leo2AsciiDoc defaults. Further, directives in an ascfile
node not only override the Leo2AsciiDoc defaults, but also any user
directives in the root node.
@c

&lt;&lt;Simulate Python constants&gt;&gt;

class _ConfigOptions:
    """Hold current configuration options."""
    def __init__(self):
        self.current = {}
        self.default = {}
        self.default["maxCodeLineLength"] = '76'
        self.default["delimiterForCodeStart"] = '~-~--- code starts --------'
        self.default["delimiterForCodeEnd"]   = '~-~--- code ends ----------'
        self.default["delimiterForCodeSectionDefinition"] = '*example*'
        self.default["headingUnderlines"] = '=-~^+'
        self.default["asciiDocSectionLevels"] = '5'
        self.default["PrintHeadings"] = "on"

    def __GetNodeOptions(self, vnode):
        bodyString = vnode.bodyString()
        lines = bodyString.splitlines()
        for line in lines:
            containsAscConfigDirective = patternAscDirectiveConfig.match(line)
            if containsAscConfigDirective:
                # Leo uses unicode, convert to plain ascii
                name = str(containsAscConfigDirective.group(1))
                value = str(containsAscConfigDirective.group(2))
                if self.current.has_key(name):
                    self.current[name] = value
                else:
                    g.es(vnode.headString())
                    g.es("  No such config option: %s" % name)

    def GetCurrentOptions(self,c,vnode):
        self.current.clear()
        self.current = self.default.copy()
        v = c.rootVnode()
        self.__GetNodeOptions(v)             # root node
        self.__GetNodeOptions(vnode)         # current node

# ----- assign constants ---------------------------------------------------
CV = _AssignUniqueConstantValue()
CV.NODE_IGNORE = CV.Next()              # demo of adding in code
Conf = _ConfigOptions()

# ----- globals ------------------------------------------------------------
#   compile the patterns we'll be searching for frequently
patternSectionName = re.compile("\&lt;\&lt; *(.+?) *\&gt;\&gt;")
patternSectionDefinition = re.compile("(\&lt;\&lt; *)(.+?)( *\&gt;\&gt;)(=)")
patternDirective = re.compile(r"^@")
patternCodeDirective = re.compile(r"^(@c *$)|(@code)")
patternDocDirective = re.compile(r"^(@ |@doc)(.*)")
patternRootDirective = re.compile(r"^@root\s+(.+)")
patternAscDirective = re.compile(r"^@asc")
&lt;&lt;New Leo2AsciiDoc directives&gt;&gt;
@doc

AsciiDoc recognizes titles and section headings by the underlining (a
line of characters on the next line after the text) with a line
of flag characters.  This function calculates the section level
(considering the ascfile node to be the top or "book" level) and
creates the appropriate string of flag characters.

@code
def SectionUnderline(h,level,v):
    'Return a section underline string.'
    asciiDocSectionLevels = int(Conf.current["asciiDocSectionLevels"])
    if level &lt; 0:
        g.es("Section level is less than 1:\n  %s" % v.headString())
        level = 1
    elif level &gt; asciiDocSectionLevels - 1:
        g.es("Section level is more than maximum Section Levels: %d\n  %s" \
           % (asciiDocSectionLevels, v.headString()))
        level = asciiDocSectionLevels - 1
    str = Conf.current["headingUnderlines"][level]  #'
    return str*max(len(h),1)
@doc

GetAscFilename is a frequently used function that checks a node for
the presence of an "@ascfile" directive, which specifies the name
and location of the Leo2AsciiDoc output file.

Leo2AsciiDoc will not export text without finding a file name. If no path
is given, the file will be created in the same directory as the Leo
outline.

@code
def GetAscFilename(c,vnode):
    'Checks a node for a filename directive.'
    # f is the Leo outline
    ascFileName = None
    bodyString = vnode.bodyString()
    lines = bodyString.splitlines()
    for line in lines:
        containsAscFileDirective = patternAscDirectiveFile.match(line)
        if containsAscFileDirective:
            ascFileName = containsAscFileDirective.group(1)
            if (ascFileName != None):
                base = os.path.split(c.mFileName)[0]  # linux or windows
                if (((base[0]=="/") and (ascFileName[0] != "/")) or 
                   ((base[1]==":") and (ascFileName[1] != ":"))): 
                    # no full pathname specified
                    ascFileName = os.path.join(base, ascFileName)
                Conf.GetCurrentOptions(vnode)
    return ascFileName
        
@doc

CodeChunk splits a line of text into chunks of a maximum length.
This is used in exporting source code sections of the Leo outline
for publication.

@code
def CodeChunk(text, width=72):
    """Split a line of text into a list of chunks not longer
    than width."""
    chunkList = []
    chunkStart = 0
    chunkEnd = 0
    lastSpacePosition = 0
    shortWidth = width - 4
    prefix = ''
    suffix = ' \\'
    textLen = len(text)
    if width &gt; textLen:
        chunkList.append(text)
    else:
        while chunkEnd &lt; textLen:
            if len(chunkList) &gt; 0:
                prefix = '  '
            chunkEnd = chunkStart + shortWidth
            if chunkEnd &gt; textLen:
                chunkList.append(prefix + text[chunkStart:])
                chunkEnd = textLen          # get out of jail
            else:
                lastSpacePosition = text.rfind(' ',chunkStart, chunkEnd +1)
                if lastSpacePosition != -1:  # success
                    chunkList.append(prefix + text[chunkStart:lastSpacePosition] + ' \\')
                    chunkStart = lastSpacePosition + 1
                else:
                    chunkEnd = chunkStart + shortWidth
                    chunkList.append(prefix + text[chunkStart:chunkEnd] + ' \\')
                    chunkStart = chunkEnd
    return chunkList</t>
<t tx="ekr.20040331071919.12">@doc
@ascskip # Time-stamp: "Thu, Dec  4 15:28 CST 2003  michael@redpriest _Write_the_outline_tree_as_AsciiDoc_file__141131100.py"

This function opens the output file and walks the tree of outline
nodes under the node that is passed as the first parameter.  At each
node, it calls our workhorse "WriteNode".


@code
def WriteTreeAsAsc(vnode, ascFileN):
    'Writes the tree under vnode to the file ascFile'
    def CleanUp():
        'Cleanup on exit'
        ascFile.close()

    writeNodeReturnValue = None
    startinglevel = vnode.level()
    try:
        ascFile = file(ascFileN,'w')
    except IOError:
        g.es("Could not open output file: %s" % ascFileN)
        return
    stopHere = vnode.nodeAfterTree()
    v = vnode
    while v != stopHere:
        writeNodeReturnValue = WriteNode(v, startinglevel, ascFile)
        if  writeNodeReturnValue == CV.END_PROGRAM:
            CleanUp()
            return
        elif  writeNodeReturnValue == CV.NODE_IGNORE:
            v = v.nodeAfterTree()       # ran into an @ascignore
        else:
            v = v.threadNext()

    CleanUp()
    g.es('Wrote: '+ repr(ascFileN))





</t>
<t tx="ekr.20040331071919.13">@doc
@ascskip # Time-stamp: "Fri, Jan  9 13:58 CST 2004  michael@redpriest _Write_a_node__140596620.py"

This is the workhorse of the program, exporting the text in a node
to the output file in a way that the AsciiDoc program will
recognize.

The basic activity is:
    - output the node headline as a DocBook section heading (Book,
      Chapter, Section1, Section2, etc.)
    - scan each line of the body text for directives, and take the
      appropriate action.  Regular expressions do the heavy lifting.
    - mark the code sections and documentation sections, so that
      DocBook can print them in the correct styles.
    - ensure that code lines do not exceed a maximum length.



@code
def WriteNode(v,startinglevel, ascFile):

    'Writes the contents of the node v to the ascFile.'

    containsAscIignore = None          # initialize
    skippingDocLines = False
    startingCodeExtract = False
    inCodeExtract = False
    statusOfWriteOutputLine = None

    def WriteOutputLine(lineString):

        'Writes a line of text to the output file.'
        try:
            ascFile.write("%s\n" % lineString)
        except IOError:
            g.es("Could not write to output file: %s" % ascFile.name)
            statusOfWriteOutputLine = CV.END_PROGRAM


    # ----- get the headline text ------------------------------------------
    h = v.headString()
    markedupAsSection = patternSectionName.match(h)
    if markedupAsSection:
        h = markedupAsSection.group(1) # dump the angle brackets

    # ----- put the body text into a list of lines -------------------------
    bodyString = v.bodyString()
    lines = bodyString.splitlines()

    lastLinePrintedType = CV.LINE_WAS_NONE
    # ----- by default, nodes start with a code section --------------------
    pendinglineType = CV.LINE_PENDING_CODE

    for line in lines:
        containsRootDirective = None

@doc

If this line starts a code extract, called a Section Definition
here, then extract the text to use as the title and set the
"startingCodeExtract" flag to guide further processing.

@code
        containsSectionDefinition = patternSectionDefinition.match(line)
        if containsSectionDefinition:
            # dump the angle brackets, etc.
#             line = containsSectionDefinition.group(2)  + '\n' + \
#                    (SectionUnderline(containsSectionDefinition.group(2),2,v))
            line = '.' + containsSectionDefinition.group(2)
            pendinglineType = CV.LINE_PENDING_CODE
            startingCodeExtract = True
@doc

Check if this line starts a @doc or @code section.

@code
        containsCodeDirective = patternCodeDirective.match(line)
        if containsCodeDirective:
            pendinglineType = CV.LINE_PENDING_CODE
            skippingDocLines = False
            continue                    # don't print this line

        containsDocDirective = patternDocDirective.match(line)
        if containsDocDirective:
            pendinglineType = CV.LINE_PENDING_DOC
            if containsDocDirective.group(2):
                # it is legal to have text on the same line
                # as a doc directive.
                line = containsDocDirective.group(2)
            else:
                continue
@doc

Check line for a Leo2AsciiDoc directive, and if so, act on it.

@code
        containsAscDirective = patternAscDirective.match(line)
        if containsAscDirective:
            containsAscIignore = patternAscDirectiveIgnore.match(line)
            if containsAscIignore:
                break

            containsAscExit = patternAscDirectiveExit.match(line)
            if containsAscExit:
                break

            containsAscSkip = patternAscDirectiveSkip.match(line)
            if containsAscSkip:
                containsAscSkipDirectiveToggle = patternAscDirectiveSkipToggle.match(line)
                if containsAscSkipDirectiveToggle:
                    if containsAscSkipDirectiveToggle.group(1).lower() == "on":
                        skippingDocLines = True
                    elif containsAscSkipDirectiveToggle.group(1).lower() == "off":
                        skippingDocLines = False
                continue

        containsOtherDirective = patternDirective.match(line)
        if containsOtherDirective:
            containsRootDirective = patternRootDirective.match(line)
            if containsRootDirective:
                line = "*note*\nThe code sections that follow, when extracted from a " + \
                       "Leo outline, will be located in: %s\n*note*" % \
                       containsRootDirective.group(1)
            else:
                continue

        # ----- we have something to print, so print heading ---------------
        if lastLinePrintedType == CV.LINE_WAS_NONE:
            if (len(h) &gt; 0) and (Conf.current["PrintHeadings"] == "on"):
                WriteOutputLine("\n\n%s" % h)
                WriteOutputLine(SectionUnderline(h,v.level()-startinglevel,v))
                lastLinePrintedType = CV.LINE_WAS_HEAD
@doc

Here we manage the transitions between code and doc sections.

@code
        if pendinglineType == CV.LINE_PENDING_DOC:
            if lastLinePrintedType != CV.LINE_WAS_DOC and \
               lastLinePrintedType != CV.LINE_WAS_HEAD:
                WriteOutputLine("%s" % Conf.current["delimiterForCodeEnd"])
                if inCodeExtract:
                    WriteOutputLine("\n%s" % Conf.current["delimiterForCodeSectionDefinition"])
                    inCodeExtract = False
                lastLinePrintedType = CV.LINE_WAS_DOC
            if skippingDocLines:
                if not containsRootDirective: # always document a root directive
                    continue

        if pendinglineType == CV.LINE_PENDING_CODE:
            if lastLinePrintedType != CV.LINE_WAS_CODE:
                if startingCodeExtract:
                    WriteOutputLine("\n%s" % line)
                    WriteOutputLine("%s" % Conf.current["delimiterForCodeSectionDefinition"])
                    inCodeExtract = True
                    line = ''
                WriteOutputLine("%s" % Conf.current["delimiterForCodeStart"])
                lastLinePrintedType = CV.LINE_WAS_CODE
                if startingCodeExtract:
                    startingCodeExtract = False
                    continue
@doc

Check for maximum code line length.  Finally, output the text to the
export file.

@code
            maxCodeLineLength = int(Conf.current["maxCodeLineLength"])
            if len(line) &lt;= maxCodeLineLength:
                WriteOutputLine("%s" % line)
            elif len(line.rstrip()) &lt;= maxCodeLineLength:
                WriteOutputLine("%s" % line.rstrip())
            else:
                lineList = CodeChunk(line, maxCodeLineLength)
                for ln in lineList:
                    WriteOutputLine("%s" % ln)
            lastLinePrintedType = CV.LINE_WAS_CODE
        else:
            WriteOutputLine("%s" % line)

        if statusOfWriteOutputLine != None:
            return statusOfWriteOutputLine

@doc

Before we leave, make sure that any ending code section is marked as
ended.

@code
    if lastLinePrintedType == CV.LINE_WAS_CODE:
        WriteOutputLine("%s" % Conf.current["delimiterForCodeEnd"])
        if inCodeExtract:
            WriteOutputLine("\n%s" % Conf.current["delimiterForCodeSectionDefinition"])
            inCodeExtract = False

    if containsAscIignore != None:
        return CV.NODE_IGNORE                        # flag ignore tree to caller

@doc

</t>
<t tx="ekr.20040331071919.14">@doc
@ascskip # Time-stamp: "Tue, Jan 13 11:09 CST 2004  michael@redpriest Other_programs_140636444.txt"

The appendices are about other programs that are used with Leo.
I'm including them because they are examples of how my setup works,
for those who may be interested in setting up something similar.

    - AsciiDoc is the program that processes the output from Leo2AsciiDoc
      into a DocBook-ready XML file.
    - Setting up DocBook is a topic that is far too large for this
      little manual, but the DocBook section which follows contains
      documentation of exactly how my working system is configured.
    - The XEmacs text editor is the one I prefer, but it is not
      necessary for the use of Leo2AsciiDoc.  Others who also use XEmacs
      might find the documentation of my Leo integration and
      multi-mode support to be useful.
@code</t>
<t tx="ekr.20040331071919.15">@language plain
@ascskip Time-stamp: "Thu, Oct 30 10:58 CST 2003  michael@redpriest Appendix_AsciiDoc__140954356.txt"
@doc
anchor:AsciiDoc[AsciiDoc]

The AsciiDoc program is written by Stuart Rackham and has its own
web site at http://www.methods.co.nz/asciidoc/[], with full
documentation.

AsciiDoc is a small program, written in Python, that reads text
which is in the AsciiDoc text format. Generally speaking, ordinary
text (such as you would write in an email message) is already in the
AsciiDoc format.  The AsciiDoc program produces (among other
choices) output in the DocBook XML format.

Text exported from a Leo outline by Leo2AsciiDoc is ready to be processed
by AsciiDoc, once AsciiDoc has been configured to recognize it.

Leo2AsciiDoc comes with an AsciiDoc configuration file that will enable
AsciiDoc to process all Leo2AsciiDoc features.  The following section
describes that configuration file.

Of course, you don't need to read or understand the configuration
file to use it.  Simply put it (leo-docbook.conf) in the same
directory as AsciiDoc's "docbook.conf" file.  When you invoke
AsciiDoc (see the xref:Makefile[] section in the DocBook appendix for
examples), give the "leo-docbook.conf" file as the configuration
parameter ("-f leo-docbook.conf".)

@ascskip on
&lt;&lt; Appendix: AsciiDoc &gt;&gt;
@code
</t>
<t tx="ekr.20040331071919.16">@language python
@tabwidth -4

@doc
@ascskip # Time-stamp: "Tue, Jan 13 11:58 CST 2004  michael@redpriest _Configuration_file__140640380.py"

AsciiDoc is customized through the use of configuration files, which
cascade, so that you can include other configuration files and
then proceed to add your changes.

The main elements of the configuration file below:

    - adds chapter and web site document types
    - switches code listings to use the DocBook "programlisting"
      element 

    *note*

    If you choose to export this configuration file from the Leo
    outline, you will have to remove escape charactersfrom some
    lines after you have exported it.

    Specifically, some lines begin with the character "\".  That
    character should be removed.

    *note*

@ascskip on
@root "other/asciidoc/leo-docbook.conf"
&lt;&lt; Configuration File &gt;&gt;
@code
# Start with the standard docbook back end configuration.
# ensure the next line is uncommented before installing
\include::docbook.conf[]

@doc

I want tabs interpreted as 4 spaces.

@code
[options]
tabsize=4
@doc

Interpret an indented paragraph as a simple paragraph.

@code
[indentedparagraph]
&lt;simpara&gt;|&lt;/simpara&gt;


@doc

For our code listings we invent a new markup that will use the
DocBook programlisting element.

@code
[blockdef-leocode]
delimiter=^\~\-~--- code(.*?)$
section=programlistingblock
presubs=specialcharacters, replacements

[programlistingblock]
&lt;programlisting&gt;
|
&lt;/programlisting&gt;

@doc

We add new markup to signify the DocBook "note" element.  This
predates AsciiDoc 5.0, and is still useful.

@code
[blockdef-note]
delimiter=^ *\*note\*$
section=noteblock
presubs=specialcharacters,quotes,specialwords,replacements,macros,glossary

# Block macro
[noteblock]
&lt;note&gt;
|
&lt;/note&gt;

[blockdef-example]
delimiter=^ *\*example\*$
options=section
section=exampleblock
presubs=replacements

# Block macro
[exampleblock]
&lt;example&gt;
&lt;title&gt;{title}&lt;/title&gt;
|
&lt;/example&gt;


@doc

The following replacements ensure basic Python code indexing.

@code
[replacements]
#----- indexing markup -----------------------------------------------------
# using regular expressions because I don't want to introduce a filter, which
# would slow things down.
#
# index python classes and defs
^(def +)(.+?)(\(.+:)=\1\2\3&lt;indexterm&gt;&lt;primary&gt;Python code, functions&lt;/primary&gt;&lt;secondary&gt;\2&lt;/secondary&gt;&lt;/indexterm&gt; 
^(class +)(.+?)(:)=\1\2\3&lt;indexterm&gt;&lt;primary&gt;Python code, classes&lt;/primary&gt;&lt;secondary&gt;\2&lt;/secondary&gt;&lt;/indexterm&gt; 
^( +def +)(.+?)(\(.+:)=\1\2\3&lt;indexterm&gt;&lt;primary&gt;Python code, methods and nested functions&lt;/primary&gt;&lt;secondary&gt;\2&lt;/secondary&gt;&lt;/indexterm&gt; 

# index code extracts
(\&amp;lt\;\&amp;lt\;)(.+?)(\&amp;gt\;\&amp;gt\;\=)=\2&lt;indexterm&gt;&lt;primary&gt;Python code, extracts explained&lt;/primary&gt;&lt;secondary&gt;\2&lt;/secondary&gt;&lt;/indexterm&gt;
(\&amp;lt\;\&amp;lt\;)(.+?)(\&amp;gt\;\&amp;gt\;)(\s*$)=\1\2\3\4&lt;indexterm&gt;&lt;primary&gt;Python code, extracts used&lt;/primary&gt;&lt;secondary&gt;\2&lt;/secondary&gt;&lt;/indexterm&gt; 

@doc

Change the standard AsciiDoc article, book and manpage definition to
use the DocBook 4.2 DTD.  Add an empty index element to the end of
the book definition so that DocBook will automatically generate an
index.

@code
#---------------------------------------------------------------------------
#----- article -------------------------------------------------------------
#---------------------------------------------------------------------------

# changing to our version of the docbook dtd
\ifdef::doctype-article[]

[header]
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE article
        PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
        "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"&gt;

&lt;article lang="en"&gt;
&lt;articleinfo&gt;
    &lt;title&gt;{doctitle}&lt;/title&gt;
    &lt;date&gt;{date}&lt;/date&gt;
    &lt;author&gt;
        &lt;firstname&gt;{firstname}&lt;/firstname&gt;
        &lt;othername&gt;{middlename}&lt;/othername&gt;
        &lt;surname&gt;{lastname}&lt;/surname&gt;
        &lt;affiliation&gt;
            &lt;address&gt;
                &lt;email&gt;{email}&lt;/email&gt;
            &lt;/address&gt;
        &lt;/affiliation&gt;
    &lt;/author&gt;
    &lt;authorinitials&gt;{authorinitials}&lt;/authorinitials&gt;
    &lt;revhistory&gt;&lt;revision&gt;&lt;revnumber&gt;{revision}&lt;/revnumber&gt;&lt;date&gt;{date}&lt;/date&gt;&lt;/revision&gt;&lt;/revhistory&gt;
    &lt;corpname&gt;{companyname}&lt;/corpname&gt;
&lt;/articleinfo&gt;

\endif::doctype-article[]


#---------------------------------------------------------------------------
#----- book ----------------------------------------------------------------
#---------------------------------------------------------------------------
# change to our version of docbook dtd

\ifdef::doctype-book[]

[header]
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE book
        PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
        "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"&gt;

&lt;book lang="en"&gt;
&lt;bookinfo&gt;
    &lt;title&gt;{doctitle}&lt;/title&gt;
    &lt;date&gt;{date}&lt;/date&gt;
    &lt;author&gt;
        &lt;firstname&gt;{firstname}&lt;/firstname&gt;
        &lt;othername&gt;{middlename}&lt;/othername&gt;
        &lt;surname&gt;{lastname}&lt;/surname&gt;
        &lt;affiliation&gt;
            &lt;address&gt;
                &lt;email&gt;{email}&lt;/email&gt;
            &lt;/address&gt;
        &lt;/affiliation&gt;
    &lt;/author&gt;
    &lt;authorinitials&gt;{authorinitials}&lt;/authorinitials&gt;
    &lt;revhistory&gt;&lt;revision&gt;&lt;revnumber&gt;{revision}&lt;/revnumber&gt;&lt;date&gt;{date}&lt;/date&gt;&lt;/revision&gt;&lt;/revhistory&gt;
    &lt;corpname&gt;{companyname}&lt;/corpname&gt;
&lt;/bookinfo&gt;


[footer]
&lt;index/&gt;
&lt;/book&gt;

\endif::doctype-book[]

#---------------------------------------------------------------------------
#----- manpage -------------------------------------------------------------
#---------------------------------------------------------------------------
\ifdef::doctype-manpage[]

[header]
&lt;!DOCTYPE refentry
        PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
        "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"&gt;
&lt;refentry&gt;
# The refentryinfo element is legal and should not normally be printed.
# Unfortunately some docbook processors do print it.
&lt;refentryinfo&gt;
    &lt;title&gt;{doctitle}&lt;/title&gt;
    &lt;date&gt;{date}&lt;/date&gt;
    &lt;author&gt;
        &lt;firstname&gt;{firstname}&lt;/firstname&gt;
        &lt;othername&gt;{middlename}&lt;/othername&gt;
        &lt;surname&gt;{lastname}&lt;/surname&gt;
        &lt;affiliation&gt;
            &lt;address&gt;
                &lt;email&gt;{email}&lt;/email&gt;
            &lt;/address&gt;
        &lt;/affiliation&gt;
    &lt;/author&gt;
    &lt;authorinitials&gt;{authorinitials}&lt;/authorinitials&gt;
    &lt;revhistory&gt;&lt;revision&gt;&lt;revnumber&gt;{revision}&lt;/revnumber&gt;&lt;date&gt;{date}&lt;/date&gt;&lt;/revision&gt;&lt;/revhistory&gt;
    &lt;corpname&gt;{companyname}&lt;/corpname&gt;
&lt;/refentryinfo&gt;
&lt;refmeta&gt;
&lt;refentrytitle&gt;{mantitle}&lt;/refentrytitle&gt;
&lt;manvolnum&gt;{manvolnum}&lt;/manvolnum&gt;
&lt;/refmeta&gt;
&lt;refnamediv&gt;
    &lt;refname&gt;{manname}&lt;/refname&gt;
    &lt;refpurpose&gt;{manpurpose}&lt;/refpurpose&gt;
&lt;/refnamediv&gt;

\endif::doctype-manpage[]



@doc

Add chapter and website document types.

@code
#---------------------------------------------------------------------------
#----- new: chapter --------------------------------------------------------
#---------------------------------------------------------------------------
\ifdef::doctype-chapter[]

[header]
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE chapter
        PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
        "http://www.oasis-open.org/docbook/xml/4.0/docbookx.dtd"&gt;
&lt;chapter&gt;
&lt;title&gt;{doctitle}&lt;/title&gt;

[footer]
&lt;/chapter&gt;


# Section macros
# Using &lt;abstract&gt; semantics restricts preface to &lt;simpara&gt; elements.
[preface]
|

[sect1]
&lt;sect1&gt;
&lt;title&gt;{title}&lt;/title&gt;
|
&lt;/sect1&gt;

[sect2]
&lt;sect2&gt;
&lt;title&gt;{title}&lt;/title&gt;
|
&lt;/sect2&gt;

[sect3]
&lt;sect3&gt;
&lt;title&gt;{title}&lt;/title&gt;
|
&lt;/sect3&gt;

[options]
outfilesuffix=.xml

\endif::doctype-chapter[]

@doc

Website requires a unique id for each page.  I've changed AsciiDoc
to provide the HTML filename as the id, and we use it here. We'll
use the date the XML file was created as the update date.

@code
#---------------------------------------------------------------------------
#----- new: website --------------------------------------------------------
#---------------------------------------------------------------------------
\ifdef::doctype-website[]
[header]
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE webpage SYSTEM "website-full.dtd"&gt;
&lt;webpage id="{infilebase}"&gt;
  &lt;head&gt;
    &lt;title&gt;{doctitle}&lt;/title&gt;
  &lt;/head&gt;
  &lt;config param="rcsdate" value="Updated: {localdate}  {localtime}"/&gt;
[footer]
&lt;/webpage&gt;

[options]
outfilesuffix=.xml

\endif::doctype-website[]

</t>
<t tx="ekr.20040331071919.17">@silent
@doc
@ascskip # Time-stamp: "Tue, Jan 13 14:11 CST 2004  michael@redpriest _Patches__140641532.txt"

I've patched the source code for AsciiDoc (asciidoc.py) with a few
small changes to allow AsciiDoc to process chapters and DocBook
web site documents as well as the DocBook book format.  Since I use
Linux, I also changed the default line-ending code to the Linux
default.

For the exact changes I made, the following output at the end of
this section was created by GNU diff (version 2.8.4) with the
command

---
LC_ALL=C TZ=UTC0 diff -Naur 5.0.2-original 5.0.2-mrc-patched \
    &gt;mrc-asciidoc-5.0.2-patch-diff
---

I include this mainly so that you can see the exact changes I made.
However, you may want to patch a copy of the original in exactly the
same way. 

To patch a copy of the original asciidoc.py (version 5.0.2), one
would use the patch command as follows (when in the same directory
as the copy of asciidoc.py and mrc-asciidoc-5.0.2-patch-diff)

---
patch -Np1 &lt;mrc2-asciidoc-5.0.2-patch-diff
---

@ascskip on
@root "other/asciidoc/mrc-asciidoc-5.0.2-patch-diff"
&lt;&lt; Patches &gt;&gt;
@code
diff -Naur 5.0.2-original/asciidoc.py 5.0.2-mrc-patched/asciidoc.py
--- 5.0.2-original/asciidoc.py	2003-12-16 00:16:28.000000000 +0000
+++ 5.0.2-mrc-patched/asciidoc.py	2004-01-08 17:45:37.000000000 +0000
@@ -838,12 +838,15 @@
         '''Set predefined glossary entries that follow configuration file
         loading.'''
         self.glossary['infile'] = reader.fname
+        # mwd Monday, June 23, 2003 for use in website
+        self.glossary['infilebase'] = os.path.splitext(os.path.split(reader.fname)[1]) [0]
         self.glossary['outfile'] = reader.fname
         s = os.path.splitext(writer.fname)[1][1:]   # Output file extension.
         self.glossary['filetype'] = s
         self.glossary['filetype-'+s] = ''
     def translate(self):
-        assert self.doctype in ('article','manpage','book'), \
+        # mwd 2003-Jun-23 assert self.doctype in ('article','manpage','book'), \
+        assert self.doctype in ('article','chapter','website','manpage', 'book'), \
             'illegal document type'
         assert self.level == 0
         reader.tabsize = config.tabsize
@@ -864,7 +867,8 @@
             if not config.suppress_headers:
                 hdr = config.subs_section('header',{})
                 writer.write(hdr)
-            if self.doctype in ('article','book'):
+            # mwd 2003-Jun-23 if self.doctype in ('article','book'):
+            if self.doctype in ('article','book','chapter','website'):
                 # Translate 'preamble' (untitled elements between header
                 # and first section title).
                 if Lex.next() is not Title:
@@ -952,7 +956,7 @@
                 # Parse revision line.
                 s = reader.read()
                 s = subs_glossary([s])[0]
-                # Match RCS/CVS $Id: leoPluginsRef.leo,v 1.63 2008/02/18 21:53:38 edream Exp $ marker format.
+                # Match RCS/CVS $Id: leoPluginsRef.leo,v 1.63 2008/02/18 21:53:38 edream Exp $ marker format.
                 mo = re.match(r'^\$Id: \S+ (?P&lt;revision&gt;\S+)' \
                     ' (?P&lt;date&gt;\S+) \S+ \S+ \S+ \$$',s)
                 if not mo:
@@ -2573,7 +2577,8 @@
 
 class Writer:
     '''Writes lines to output file.'''
-    EOL = '\r\n'    # End of line terminator.
+    # mwd 2003-Jun-23 EOL = '\r\n'    # End of line terminator.
+    EOL = '\n'    # End of line terminator.
     f = None        # Output file object.
     fname= None     # Output file name.
     lines_out = 0   # Number of lines written.
@@ -3068,7 +3073,8 @@
     The AsciiDoc document is read from file object src the translated
     DocBook file written to file object dst.'''
     try:
-        if doctype not in ('article','manpage','book'):
+        # mwd-2004-Jan-05 if doctype not in ('article','manpage','book'):
+        if doctype not in ('article','chapter','website','manpage', 'book'):
             raise EAsciiDoc,'illegal document type'
         if backend == 'linuxdoc' and doctype != 'article':
             raise EAsciiDoc,'%s %s documents are not supported' \
</t>
<t tx="ekr.20040331071919.18">@language plain
@ascskip Time-stamp: "Fri, Dec 19 11:48 CST 2003  michael@redpriest Appendix_DocBook_140578660.txt"
@doc

anchor:DocBook[DocBook]
DocBook is a project that provides:

    - a specification for the text markup (DTD) of DocBook XML
      documents, and
    - a set of XSLT stylesheets that can be used by an XSLT engine
      to transform those XML documents to HTML, PDF, etc.
      
If you create your text documents using the rules in the DocBook
DTD, you can use the DocBook XSLT stylesheets to produce various
output formats, such as HTML and PDF.

The DocBook project is designed for the production of computer
documentation, but is actually used for a wide variety of documents.

Some web resources:

    - the official home page for DocBook: The Definitive Guide:
        http://docbook.org/[]
    - DocBook Basics:
        http://www.dpawson.co.uk/docbook/reference.html[]
    - DocBook Open Repository:
        http://sourceforge.net/projects/docbook/[]
    - DocBook XSL: The Complete Guide:
        http://www.sagehill.net/docbookxsl/index.html[]

I include this section as documentation of one setup that works --
it translates Leo2AsciiDoc output to HTML and PDF.

This is not a guide to the installation, setup and operation of
DocBook, just an example of a working system.

@ascskip on
&lt;&lt; Appendix: DocBook &gt;&gt;
@code
</t>
<t tx="ekr.20040331071919.19">@doc
@ascskip # Time-stamp: "Thu, Jan  8 13:57 CST 2004  michael@redpriest _Tool_Chain__140810780.txt"

Documents go through a number of stages in their creation.  Each
stage may involve one or more tools or programs, which form a tool
chain: each performing some processing and handing off to the next.

As a simple example, for this document:


    - text creation was handled by XEmacs, a text
      editor (which functioned as a Leo plugin.)
      indexterm:[XEmacs]
      indexterm:[GNU Make]
      indexterm:[AsciiDoc]
      indexterm:[xsltproc]
      indexterm:[FOP]
    - text storage and organization was handled by Leo, an outlining
      editor.
    - text was exported from Leo to a plain-text file, using the
      Leo2AsciiDoc program.
    - from there, all transformations are automated by the
      GNU Make program.
    - the DocBook XML document was created by the
      AsciiDoc program, which transformed the
      plain-text file to XML.
    - The HTML pages were created by the
      xsltproc program. xsltproc read the XML
      document, and the DocBook XSLT stylesheets, and then created
      each HTML page.
    - To make the PDF file, the xsltproc program used the same
      process as for the HTML pages, except that it created a
      Formatting Objects (FO) file instead.  Then the
      FOP program processed the FO file, producing
      the final PDF file.  This process was also automated.

All I did was type in text for each section, arranging it much as I
usually do for email.  The rest was handled automatically by
clicking on a Leo menu, or entering a short command at the console.
For example: "make all".

There are many, many choices of tools to put in your DocBook tool
chain.  You can even purchase complete packages, from text editing
to PDF generation.

@code</t>
<t tx="ekr.20040331071919.2">@doc
@ascskip # Time-stamp: "Fri, Jan  9 15:19 CST 2004  michael@redpriest About_this_document_140583820.txt"

If you are reading this document in HTML (in a web browser) or as a
PDF file (usually in Adobe Acrobat Reader), it may interest you to
know that this document was generated from a Leo outline.

The Leo outline (in the file mod_leo2ascd.leo) contained the
Leo2AsciiDoc Users Guide, the Leo2AsciiDoc Developers Guide, and all
the Leo2AsciiDoc source code.  All of them were created by simply
typing plain text.

The working source code was exported by Leo using the "File; Tangle;
Tangle" menu selection, which created the Python program file
"mod_leo2ascd.py".

The Users Guide and the Developers Guide were created by exporting
the text from Leo, using the menu selection "File; Export; Export
All to AsciiDoc".  This created the plain text files
"mod_asc_user.asc" and "mod_asc_dev.asc" (which are the file names I
told Leo to use.)

I then typed "make all" at the console in the directory, and the
make program:

    - ran the AsciiDoc program to produce the DocBook XML files.
    - ran the xsltproc program to produce the HTML files from the
      XML files.
    - ran the xsltproc program to produce "fo" files, and ran the
      fop program to produce PDF files from the fo files.

Everything was generated automatically without any further work on
my part.

@code</t>
<t tx="ekr.20040331071919.20">@language plain
@tabwidth 4
@doc
@ascskip # Time-stamp: "Thu, Jan 15 15:39 CST 2004  michael@redpriest _Make_File__140651828.txt"

anchor:Makefile[Makefile]
In my case, I use a standard unix-style "make" setup for processing
the text exported from a Leo outline.  It simply automates the
commands which I would otherwise have to type at the command line.

After Leo2AsciiDoc exports the text from the Leo outline to a disk file,
the Make program takes over.  It reads rules in a file named
"Makefile" and calls the necessary programs to make the
requested output.

This Makefile takes over where Leo2AsciiDoc leaves off.  It directs the
AsciiDoc conversion of the Leo2AsciiDoc text file to XML, and then the
DocBook conversion of the XML file to HTML pages or a PDF document.

indexterm:[GNU Make]
I use GNU Make.  For example, assuming I am in xterm and located in
the same directory as the Makefile, I just enter the command

---
make pdf-dev
---
and the make program guides the creation of the PDF version of The
Developers Guide, using the instructions in this Makefile.  The PDF
is available within seconds.

The Makefile instructions, in brief:

    - the AsciiDoc program is called to make an XML file.
    - the xsltproc program is called to process the XML file to
      either HTML or a Formatting Objects file for further
      translation to PDF
        * various XSLT style sheets (html.xsl, man.xsl, etc.) are
          used by xsltproc to guide the transformation of the XML
          file.  Typically, they call the DocBook stylesheets for
          the heavy lifting, and set a few simple options.
    - the FOP program is used to process the intermediate fo file to
      the final PDF file.

This is by no means a model Makefile.  It is included because it
works for me in my office, and may thus be useful as an example for
other people who want to set up Make for this purpose.

@ascskip xemacs-makefile-mode-on
@ascskip on
@root "doc/Makefile"
&lt;&lt; Make File &gt;&gt;
@code
#----- global variables -----------------------------------------
DEVGUIDE=mod_asc_dev
USERGUIDE=mod_asc_user
CSS=dbstyle.css

MAN=${DOC}.1
STYLESHEET_MAN=man.xsl
# default docbook, located by /etc/xml/catalog
STYLESHEET_MAN_HTML=docbook.xsl
MAN_OUTPUT_DIR=man

STYLESHEET_HTML=html.xsl
HTML_DEV_OUTPUT_DIR=html-dev
HTML_USER_OUTPUT_DIR=html-user
STYLESHEET_CHUNK=chunkit.xsl
CHUNK_DEV_OUTPUT_DIR=chunk-dev
CHUNK_USER_OUTPUT_DIR=chunk-user

STYLESHEET_FO_FOP=fo-fop.xsl
PDF_DEV_OUTPUT_DIR=pdf-dev
PDF_USER_OUTPUT_DIR=pdf-user

ASCIIDOC_COMMAND=python asciidoc/asciidoc.py -v -b docbook -d book
ASCIIDOC_CONFIG=asciidoc/leo-docbook.conf

#   $@ target file name
#   $&lt; name of the first prerequisite
#   $* stem that rule matched

#----- pattern rules -------------------------------------------------------
%.xml	:	%.asc
#	asciidoc -b docbook -d book -f ${ASCIIDOC_CONFIG} -o $@ $&lt;
    ${ASCIIDOC_COMMAND}  -f ${ASCIIDOC_CONFIG} -o $@ $&lt;
    xsltproc --output $*.final.xml customize.xsl $@


%.html	:	%.xml css
    xsltproc --xinclude --output ${OUTPUT} ${STYLESHEET}  $*.final.xml
    touch $*.xml

%.pdf	:	%.xml
    xsltproc --xinclude  --output ${OUTPUT}/$*.fo $(STYLESHEET) $*.final.xml
    fop -fo  ${OUTPUT}/$*.fo  -pdf ${OUTPUT}/$*.pdf 
    -$(RM) ${OUTPUT}/$*.fo

#----- usage ---------------------------------------------------------------
usage	:
    @echo; echo "primary make modules: html-dev chunk-dev pdf-dev"
    @echo       "                      html-user chunk-user pdf-user"
    @echo



#---------------------------------------------------------------------------
#----- modules -------------------------------------------------------------
#---------------------------------------------------------------------------

# docbook
#---------------------------------------------------------------------------

all	:	css pdf-dev html-dev sub-chunk-dev html-user sub-chunk-user pdf-user

#----- DocBook html stylesheet ---------------------------------------------
css:
    cat base.css   &gt;  $(CSS)
    cat docstyle.css &gt;&gt; $(CSS)

#----- Developers Guide ----------------------------------------------------
#   #----- one page -----------------------------------------------------
html-dev	:	STYLESHEET=$(STYLESHEET_HTML)
html-dev	:	OUTPUT=${HTML_DEV_OUTPUT_DIR}/$*.html
html-dev	:	mkdirhtmldev ${DEVGUIDE}.html
    cp ${CSS} ${HTML_DEV_OUTPUT_DIR}

mkdirhtmldev	:	cleanhtmldev
    mkdir ${HTML_DEV_OUTPUT_DIR}

#   #----- individual pages ------------------------------------------------
chunk-dev	:	STYLESHEET=$(STYLESHEET_CHUNK)
chunk-dev	:	OUTPUT=$(CHUNK_DEV_OUTPUT_DIR)/
chunk-dev	:	mkdirchunkdev ${DEVGUIDE}.html
    cp chunk-dev-frame*.html ${CHUNK_DEV_OUTPUT_DIR}
    cp ${CSS} ${CHUNK_DEV_OUTPUT_DIR}
    cp frametoc.css ${CHUNK_DEV_OUTPUT_DIR}
    cp -r ../graphics ${CHUNK_DEV_OUTPUT_DIR}
# put in frame target line
    sed -f sed-dev-frame ${CHUNK_DEV_OUTPUT_DIR}/index.html &gt;${CHUNK_DEV_OUTPUT_DIR}/chunk-dev-frame-toc.html

mkdirchunkdev	:	cleanchunkdev
    mkdir ${CHUNK_DEV_OUTPUT_DIR}

sub-chunk-dev	:
    ${MAKE} chunk-dev

#----- Users Guide ---------------------------------------------------------
#   #----- one page -----------------------------------------------------
html-user	:	STYLESHEET=$(STYLESHEET_HTML)
html-user:	OUTPUT=${HTML_USER_OUTPUT_DIR}/$*.html
html-user:	mkdirhtmluser ${USERGUIDE}.html
    cp ${CSS} ${HTML_USER_OUTPUT_DIR}

mkdirhtmluser	:	cleanhtmluser
    mkdir ${HTML_USER_OUTPUT_DIR}

#   #----- individual pages ------------------------------------------------
chunk-user	:	STYLESHEET=$(STYLESHEET_CHUNK)
chunk-user	:	OUTPUT=$(CHUNK_USER_OUTPUT_DIR)/
chunk-user	:	cleanchunkuser ${USERGUIDE}.html
    cp chunk-user-frame*.html ${CHUNK_USER_OUTPUT_DIR}
    cp ${CSS} ${CHUNK_USER_OUTPUT_DIR}
    cp frametoc.css ${CHUNK_USER_OUTPUT_DIR}
    cp -r ../graphics ${CHUNK_USER_OUTPUT_DIR}
# put in frame target line
    sed -f sed-user-frame ${CHUNK_USER_OUTPUT_DIR}/index.html &gt;${CHUNK_USER_OUTPUT_DIR}/chunk-user-frame-toc.html

mkdirchunkuser	:	cleanchunkuser
    mkdir ${CHUNK_USER_OUTPUT_DIR}

sub-chunk-user	:
    ${MAKE} chunk-user

#   #----- pdf -------------------------------------------------------------
pdf-dev		:	STYLESHEET=$(STYLESHEET_FO_FOP)
pdf-dev		:	OUTPUT=$(PDF_DEV_OUTPUT_DIR)
pdf-dev		:	mkdirpdf ${DEVGUIDE}.pdf

pdf-user		:	STYLESHEET=$(STYLESHEET_FO_FOP)
pdf-user		:	OUTPUT=$(PDF_USER_OUTPUT_DIR)
pdf-user		:	mkdirpdf ${USERGUIDE}.pdf

#   mkdirpdf exists only to make an empty directory for the pdf working files
mkdirpdf	:
    -mkdir $(PDF_DEV_OUTPUT_DIR)
    -mkdir $(PDF_USER_OUTPUT_DIR)




#----- clean ---------------------------------------------------------------
clean	: cleanhtml cleanchunk cleanpdf cleanman cleanclutter 

cleanhtml	:	cleanhtmluser cleanhtmldev

cleanhtmluser	:
    -$(RM) -r $(HTML_USER_OUTPUT_DIR)

cleanhtmldev	:
    -$(RM) -r $(HTML_DEV_OUTPUT_DIR)

cleanchunk	:	cleanchunkuser cleanchunkdev

cleanchunkuser	:
    -$(RM) -r $(CHUNK_USER_OUTPUT_DIR)

cleanchunkdev	:
    -$(RM) -r $(CHUNK_DEV_OUTPUT_DIR)

cleanpdf	:
    -$(RM) -r $(PDF_OUTPUT_DIR)

cleanman	:
    -$(RM) -r $(MAN_OUTPUT_DIR)

cleanclutter: 
    -$(RM) -r *.xml

.PRECIOUS	:	%.xml
@doc
@ascskip xemacs-makefile-mode-off
@code
</t>
<t tx="ekr.20040331071919.21">@silent
@doc
@ascskip # Time-stamp: "Wed, Oct  1 15:33 CST 2003  michael@redpriest _Style_Sheets__140741140.txt"

When the Makefile calls the xsltproc program, it gives it the name
of an XSLT stylesheet to guide the production of the result.

Following are simple XSLT stylesheets that are used to:
    - set formatting options, and
    - call the main DocBook XSLT stylesheets.

The stylesheets cascade (each adding its options to the total), with
the original stylesheet including others as needed, and always
calling the main DocBook stylesheets at some point.

@code
</t>
<t tx="ekr.20040331071919.22">@comment &lt;!-- --&gt;
@silent
@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:01 CST 2004  michael@redpriest _General__139758588.txt"

indexterm:[Stylesheets, common-links.xsl]
This is the entire common-links style sheet ("common-links.xsl"),
which sets basic Table of Contents and chapter cross-reference
preferences.

This stylesheet is called by both HTML and PDF stylesheets.

@ascskip on
@ascskip xemacs-xsl-mode-on
@root "doc/common-links.xsl"
&lt;&lt; General &gt;&gt;
@code
&lt;?xml version='1.0'?&gt; 
&lt;xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0"&gt; 

&lt;!--===== 
    This changes a chapter cross-reference to include the chapter
    title text. 
--&gt;
&lt;xsl:param name="local.l10n.xml" select="document('')"/&gt; 
&lt;l:i18n xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"&gt; 
  &lt;l:l10n language="en"&gt; 
    &lt;l:context name="xref"&gt; 
      &lt;l:template name="chapter" text="Chapter %n: &amp;#8220;%t&amp;#8221;"/&gt; 
    &lt;/l:context&gt;   
  &lt;/l:l10n&gt;
&lt;/l:i18n&gt;

&lt;xsl:param name="generate.toc"&gt;
book      toc,title,figure,table,example,equation
chapter   title
&lt;/xsl:param&gt;

&lt;!-- only 1 toc in the doc --&gt;
&lt;xsl:param name="generate.section.toc.level" select="1"/&gt;

&lt;!-- toc shows 3 levels of sections --&gt;
&lt;xsl:param name="toc.section.depth"&gt;3&lt;/xsl:param&gt;

&lt;xsl:param name="generate.index" select="1"&gt;&lt;/xsl:param&gt;

&lt;!--===== omit the title for notes, tips ================================--&gt;
&lt;xsl:param name="admon.textlabel" select="0"&gt;&lt;/xsl:param&gt;

&lt;/xsl:stylesheet&gt;
@doc
@ascskip xemacs-xsl-mode-off


</t>
<t tx="ekr.20040331071919.23">@comment &lt;!-- --&gt;
@silent
@doc
@ascskip # Time-stamp: "Tue, Jan 20 11:42 CST 2004  michael@redpriest _Customize__141637044.txt"


indexterm:[customize.xsl]
This is the entire customize style sheet ("customize.xsl", which is
used by the Makefile to make changes to the standard xml file
produced from the AsciiDoc output.  It results in a file suffixed
".final.xml" which is used by both the HTML and PDF stylesheets.

Currently, the stylesheet copies the xml file:

    - changing any chapter elements that have a title beginning
      with "Appendix: " to DocBook appendix elements.  This is from
      AsciiDoc 3.2 days, when AsciiDoc didn't know about appendix
      elements. I haven't yet modified Leo2AsciiDoc to take
      advantage of the automatic appendix elements in AsciiDoc 5.0.
    - adding custom bookinfo elements

I've used XSLT for this, but it could have been done with python,
AWK, sed, or other tools.

@ascskip on
@ascskip xemacs-xsl-mode-on
@root "doc/customize.xsl"
&lt;&lt; Customize &gt;&gt;
@code
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="1.0"&gt;

&lt;xsl:variable name="AppendBegin"&gt;Appendix: &lt;/xsl:variable&gt;

&lt;!--~~~~~~ copy everything ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~--&gt;
&lt;xsl:template match="@*|node()"&gt;
   &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
   &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;!--~~~~~~ delete the appendix string from the title ~~~~~~~~~~~~~~~~~~~~--&gt;
&lt;xsl:template match="/book/chapter/title[starts-with(text(),$AppendBegin)]"&gt;
  &lt;title&gt;
  &lt;xsl:value-of select="substring-after(text(),$AppendBegin)"/&gt;
  &lt;/title&gt;
  &lt;xsl:apply-templates select="*" /&gt; 
&lt;/xsl:template&gt;

&lt;!--~~~~~~ change appendix chapter element to appendix element ~~~~~~~~~~--&gt;
&lt;xsl:template match="/book/chapter[starts-with(title,$AppendBegin)]"&gt;
  &lt;appendix&gt;
    &lt;xsl:apply-templates select="*" /&gt; 
  &lt;/appendix&gt;
&lt;/xsl:template&gt;

&lt;!--~~~~~~ bookinfo ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~--&gt;
&lt;!--
From Leo2AsciiDoc, only the bookinfo title is filled in, with a
blank author.  Here, we replace the author element with any and all
bookinfo elements we please.
--&gt;
  
&lt;xsl:template match="/book/bookinfo/author"&gt;
  &lt;author&gt;
    &lt;firstname&gt;Michael&lt;/firstname&gt;&lt;surname&gt;Dawson&lt;/surname&gt;
    &lt;affiliation&gt;
      &lt;address&gt;
        &lt;otheraddr&gt;
          &lt;ulink url="http://www.marshallresearch.com/contact.html"&gt;
            at Marshall Research
          &lt;/ulink&gt;
        &lt;/otheraddr&gt;
      &lt;/address&gt;
    &lt;/affiliation&gt;
  &lt;/author&gt;
  &lt;revhistory&gt;
    &lt;revision&gt;
      &lt;revnumber&gt;0.4a&lt;/revnumber&gt;
      &lt;date&gt;Jan 21 2004&lt;/date&gt;
      &lt;authorinitials&gt;mwd&lt;/authorinitials&gt;
      &lt;revremark&gt;Formatting enhancements&lt;/revremark&gt;
    &lt;/revision&gt;
    &lt;revision&gt;
      &lt;revnumber&gt;0.4&lt;/revnumber&gt;
      &lt;date&gt;Jan 19 2004&lt;/date&gt;
      &lt;authorinitials&gt;mwd&lt;/authorinitials&gt;
      &lt;revremark&gt;First release&lt;/revremark&gt;
    &lt;/revision&gt;
  &lt;/revhistory&gt;
&lt;/xsl:template&gt;


&lt;/xsl:stylesheet&gt;

@doc
@ascskip xemacs-xsl-mode-off

</t>
<t tx="ekr.20040331071919.24">@silent
@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:02 CST 2004  michael@redpriest _HTML_One_File__139289780.txt"

indexterm:[Stylesheets,html.xsl]
For one long page of HTML, we simply import the DocBook stylesheets
and our small custom stylesheets that set our standard options.
This is the "html.xsl" stylesheet.

@ascskip on
@ascskip xemacs-xsl-mode-on
@root "doc/html.xsl"
&lt;&lt; HTML: One File &gt;&gt;
@code
&lt;?xml version='1.0'?&gt; 
&lt;xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0"&gt; 

&lt;!--===== the catalog (/etx/xml/catalog) will convert this to the local pathname --&gt;
&lt;xsl:import href="docbook.xsl"/&gt;

&lt;xsl:import href="common-links.xsl"/&gt;
&lt;xsl:import href="common-html.xsl"/&gt;

&lt;/xsl:stylesheet&gt; 
@doc
@ascskip xemacs-xsl-mode-off


</t>
<t tx="ekr.20040331071919.25">@silent
@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:40 CST 2004  michael@redpriest _HTML_Individual_Pages__141001292.txt"

For individual section pages of HTML, we import the DocBook stylesheets
and our small custom stylesheets that set our standard options.

Then we set our chunking options, and tell the web pages where to
find the header and footer graphics.

indexterm:[Stylesheets,chunkit.xsl]
The following code is the entire chunkit style sheet
("chunkit.xsl").

@ascskip on
@ascskip xemacs-xsl-mode-on
@root "doc/chunkit.xsl"
&lt;&lt; HTML: Individual Pages &gt;&gt;
@code
&lt;?xml version='1.0'?&gt; 
&lt;xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0"&gt; 

&lt;xsl:import href="chunk.xsl"/&gt;

&lt;xsl:import href="common-links.xsl"/&gt;
&lt;xsl:import href="common-html.xsl"/&gt;

&lt;xsl:param name="navig.graphics" select="1"/&gt;
&lt;xsl:param name=
  "navig.graphics.path"&gt;graphics/&lt;/xsl:param&gt;
    &lt;!--  "navig.graphics.path"&gt;/usr/share/xml/docbook/docbook-xsl-1.59.1/images/&lt;/xsl:param&gt;--&gt;
    &lt;!--&lt;xsl:param name="navig.graphics.path"&gt;graphics/dbook/navicons/&lt;/xsl:param&gt;--&gt;
&lt;xsl:param name="navig.graphics.extension"&gt;.png&lt;/xsl:param&gt;
&lt;xsl:param name="navig.showtitles"&gt;1&lt;/xsl:param&gt;

&lt;xsl:param name="chunk.first.sections" select="1"&gt;&lt;/xsl:param&gt;
&lt;xsl:param name="chunk.section.depth" select="2"&gt;&lt;/xsl:param&gt;
&lt;xsl:param name="section.autolabel" select="0"&gt;&lt;/xsl:param&gt;

&lt;xsl:param name="css.decoration"&gt;1&lt;/xsl:param&gt;

&lt;/xsl:stylesheet&gt;

@doc
@ascskip xemacs-xsl-mode-off
</t>
<t tx="ekr.20040331071919.26">@silent
@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:58 CST 2004  michael@redpriest _HTML_base_css_style_sheet__141160708.txt"

css style sheet

@ascskip on
@ascskip xemacs-css-mode-on
@root "doc/base.css"
&lt;&lt; HTML: base css style sheet &gt;&gt;
@code
/* base from http://www.w3.org/TR/CSS21/sample.html */

address,
blockquote,
body, dd, div,
dl, dt, fieldset, form,
frame, frameset,
h1, h2, h3, h4,
h5, h6, noframes,
ol, p, ul, center,
dir, hr, menu, pre   { display: block }
li              { display: list-item }
head            { display: none }
table           { display: table }
tr              { display: table-row }
thead           { display: table-header-group }
tbody           { display: table-row-group }
tfoot           { display: table-footer-group }
col             { display: table-column }
colgroup        { display: table-column-group }
td, th          { display: table-cell; }
caption         { display: table-caption }
th              { font-weight: bolder; text-align: center }
caption         { text-align: center }
body            { padding: 8px; line-height: 1.12em }
h1              { font-size: 2em; margin: .67em 0 }
h2              { font-size: 1.5em; margin: .75em 0 }
h3              { font-size: 1.17em; margin: .83em 0 }
h4, p,
blockquote, ul,
fieldset, form,
ol, dl, dir,
menu            { margin: 1.12em 0 }
h5              { font-size: .83em; margin: 1.5em 0 }
h6              { font-size: .75em; margin: 1.67em 0 }
h1, h2, h3, h4,
h5, h6, b,
strong          { font-weight: bolder }
blockquote      { margin-left: 40px; margin-right: 40px }
i, cite, em,
var, address    { font-style: italic }
pre, tt, code,
kbd, samp       { font-family: monospace }
pre             { white-space: pre }

/            * comment             */
/* http://www.w3.org/TR/CSS21/visuren.html#propdef-display lists inline-block */
button, textarea,
input, object, 
select, img { display:inline-block; }

big             { font-size: 1.17em }
small, sub, sup { font-size: .83em }
sub             { vertical-align: sub }
sup             { vertical-align: super }
s, strike, del  { text-decoration: line-through }
hr              { border: 1px inset }
ol, ul, dir,
menu, dd        { margin-left: 40px }
ol              { list-style-type: decimal }
ol ul, ul ol,
ul ul, ol ol    { margin-top: 0; margin-bottom: 0 }
u, ins          { text-decoration: underline }
/*br:before       { content: "\A" }*/
center          { text-align: center }

/            * changed             */
/*
abbr, acronym   { font-variant: small-caps; letter-spacing: 0.1em }
*/

:link, :visited { text-decoration: underline }
:focus          { outline: thin dotted invert }

/* Begin bidirectionality settings (do not change) */
BDO[DIR="ltr"]  { direction: ltr; unicode-bidi: bidi-override }
BDO[DIR="rtl"]  { direction: rtl; unicode-bidi: bidi-override }

*[DIR="ltr"]    { direction: ltr; unicode-bidi: embed }
*[DIR="rtl"]    { direction: rtl; unicode-bidi: embed }

@media print {
  h1            { page-break-before: always }
  h1, h2, h3,
  h4, h5, h6    { page-break-after: avoid }
  ul, ol, dl    { page-break-before: avoid }
}



@doc
@ascskip xemacs-css-mode-off
</t>
<t tx="ekr.20040331071919.27">@silent
@doc
@ascskip # Time-stamp: "Wed, Jan 21 09:13 CST 2004  michael@redpriest _HTML_css_style_sheet__140659188.txt"

css style sheet

@ascskip on
@ascskip xemacs-css-mode-on
@root "doc/docstyle.css"
&lt;&lt; HTML: css style sheet &gt;&gt;
@code

html, body {
  background-color: #CCCCCC;
  font-family: "Verdana", arial;
}

body {
  font-size: 9pt;
  line-height: 125%;
/*   margin: 1em; */
  padding: 2em;
  margin-top: 1em;
  margin-left: 3em;
/*   width: 39em; */
  min-height: 60em;
/*   margin-right: 0.5em; */
  background-color: white;
  border-top: 1px solid black;
  border-left: 1px solid black;
/*   border-right: 2px solid black; */
/*   border-bottom: 2px solid black; */
}

.strong {
  font-weight: bold;
}

h1, h2, h3, h4, h5, h6,
p
{
  margin-bottom: 0.5em;
  margin-top: 0.5em;
  line-height: 125%;
}

h1 { font-size: 2em;}
h2 { font-size: 1.4em; }
h3 { font-size: 1.2em; }
h4 { font-size: 1.0em; }
h5 { font-size: 1.0em; }
h6 { font-size: 1.0em; }

h1, h2, h3, h4, h5, h6 {
  color: #660000;
  margin-right: 20%;
}

* &gt; h1 {
  padding-top: 0.5em;
}

/* h2, h3 */
/* { */
/*   margin-right: 10em; */
/* } */

h1.title 
{
  margin-top: 3em;
  border-top: 3px solid #660000;
  border-bottom: 3px solid #660000;
  border-color: #660000;
  padding: .4em;
  text-align: center;
}

h2.title 
{
  margin-top: 3em;
  border-top: 3px solid #660000;
  border-bottom: 3px solid #660000;
  border-color: #660000;
  padding: .4em;
}

div.toc {
    line-height: 100%;
}

div.list-of-examples {
    margin-top: 3em;
}

div.sect1 h2 {
  font-size: 1.5em;
  margin-top: 4em;
  margin-left: 0em;
  margin-right: 25%;
  margin-bottom: 1em;
  /* border-color: #660000; */
  border-top: 0em;
  border-bottom: 1px solid;
  padding: 0em;
}

div.sect2 h3 {
  font-size: 1em;
  margin-top: 4em;
  margin-bottom: 1em;
  margin-right: 25%;
  /* border-color: #660000; */
  border-top: 0em;
  border-bottom: 1px solid;
}

div.sect3 h4 {
  font-size: small;
  color: black;
  margin-top: 4em;
  margin-bottom: 1em;
  margin-right: 25%;
  /* border-color: #660000; */
  border-top: 0em;
  border-bottom: 1px solid;
}

div.note
{
  margin-top: 1em;
  margin-bottom: 1em;
}
div.note .title
{
  color: black;
  font-size: x-small;
  margin-top: 0em;
  margin-bottom: 0em;
}
/* ----- links ---------------------------------------------------------- */
:link {
  color: #660000;
  text-decoration: none;
  font-weight: bold;
}

:visited {
  color: #333333;
  text-decoration: none;
  font-weight: bold;
}


div.toc :link, :visited {
  font-weight: normal;
 }

div.list-of-examples :link, :visited {
  font-weight: normal;
 }


a:link img {border-style: none;}
a:visited img {border-style: none;}

div.toc dd, dl
{
  margin-top: 0em;
  margin-bottom: 0em;
}
div.toc dt
{
  margin-top: 0.2em;
}

ul, ol
{
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.para {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.sect1,
.toplevel.section
{
  padding-bottom: 0.25em;
}


tt,pre {
    font-family: Courier New,Courier,monospace;
    font-size: smaller;
}

.programlisting {
    margin-top: 8pt;
    margin-bottom: 8pt;
    margin-left: 1em;
    background-color: #FFFFCC;
    white-space: pre;
    border-style: solid;
    border-width: 1pt;
    border-color: #999999;
    padding-left: 6pt;
    padding-top: 2pt;
    padding-bottom: 2pt;
    width: 100%;
    line-height: 100%;
}

table{
    background-color: #FFFFFF;
    width: 99.6%;
}

div.example {
    margin-top: 0pt;
    margin-bottom: 0pt;
    padding-top: 0pt;
    padding-bottom: 0pt;
}

div.example .title {
    color: black;
    margin-top: 0pt;
    margin-bottom: 0pt;
    padding-top: 8pt;
    padding-bottom: 0pt;
}

div.sidebar .title {
  font-weight: bold;
  color: black;
}

div.sidebar  {
  font-size: x-small;
  margin-top: 2em;
  margin-bottom: 0.5em;
  /* margin-left: 1em; */
  margin-right: 33%; 
  padding: 4pt;
  border-top: 1px solid black;
  border-bottom: 1px solid black;
  border-left: 1px solid black;
  border-right: 1px solid black;
}


h1 &gt; a,
h2 &gt; a {
  padding-top: 0.5em;
}

ol.vert, ol.inline {
  list-style-type: none;
  padding-left: 0;
  margin-left: 0;
}

hr, .toc, .title
{ color: #660000 
}


.navfooter
{
  margin-top: 2em;
}
.navheader
{
  margin-bottom: 1em;

}

/* ------ title page ---------------------------------------------------- */
h3.author
{
  padding: 0em;
  margin-top: 0em;
  margin-bottom: -1em;
}

.affiliation
{
  padding: 0em;
  margin-top: 0em;
  margin-bottom: 0em;
  font-size: smaller;
}


div.revhistory table, tr, td
{
  border-collapse: collapse;
  border: hidden;
  font-size: x-small;
 }

div.revhistory table
{
  width: auto;
  }

div.revhistory td[colspan="3"]
{
  padding-left: 2em;  
 }


/* div.draft { */
/*   background-image: url('pics/draft.png'); */
/* } */


@doc
@ascskip xemacs-css-mode-off

</t>
<t tx="ekr.20040331071919.28">@comment &lt;!-- --&gt;
@silent
@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:03 CST 2004  michael@redpriest _HTML_common__140982180.txt"
@ascskip xemacs-xsl-mode-off

indexterm:[Stylesheets,common-html.xsl]
The following section is the entire common-html style sheet
("common-html.xsl"), which sets basic HTML options.

@ascskip on
@ascskip xemacs-xsl-mode-on
@root "doc/common-html.xsl"
&lt;&lt; HTML: common&gt;&gt;
@code
&lt;?xml version='1.0'?&gt; 
&lt;xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0"&gt; 
&lt;!--===== ==========================================================--&gt;
&lt;xsl:param name="default.table.width" select="'100%'"&gt;&lt;/xsl:param&gt;
&lt;xsl:param name="html.stylesheet" select="'dbstyle.css'"/&gt;
&lt;xsl:param name="shade.verbatim" select="1"/&gt;
&lt;xsl:attribute-set name="shade.verbatim.style"&gt;
  &lt;xsl:attribute name="border"&gt;0&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="bgcolor"&gt;#F3F3F3&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;


&lt;/xsl:stylesheet&gt;
@doc
@ascskip xemacs-xsl-mode-off
</t>
<t tx="ekr.20040331071919.29">@comment &lt;!-- --&gt;
@silent
@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:03 CST 2004  michael@redpriest _PDF__139549436.txt"

indexterm:[Stylesheets, fo-fop.xsl]
This is the Formatting Objects style sheet ("fo-fop.xsl", which sets
the options for all printed output.

The actual output is a file with the ".fo" extension, which will be
used by a Formatting Object processor to produce a PDF file.

@ascskip on
@ascskip xemacs-xsl-mode-on
@root "doc/fo-fop.xsl"
&lt;&lt; PDF &gt;&gt;
@code
&lt;?xml version='1.0'?&gt; 
&lt;xsl:stylesheet  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  version="1.0"&gt; 
&lt;!--===== ==========================================================--&gt;

&lt;!--===== catalog will convert the url to our file location =========--&gt;
&lt;xsl:import href="fo-docbook.xsl"/&gt;
&lt;xsl:import href="common-links.xsl"/&gt;

&lt;!--===== using the fop pdf processor ===================================--&gt;
&lt;xsl:param name="fop.extensions" select="1"/&gt;

&lt;!--===== single sided pages ============================================--&gt;
&lt;xsl:param name="double.sided" select="0"&gt;&lt;/xsl:param&gt;

&lt;!--===== body print ====================================================--&gt;
&lt;xsl:param name="body.font.master"&gt;12&lt;/xsl:param&gt;
&lt;xsl:param name="alignment"&gt;left&lt;/xsl:param&gt;
&lt;xsl:param name="hyphenate"&gt;true&lt;/xsl:param&gt;

&lt;!--===== set page margins ==============================================--&gt;
&lt;xsl:param name="page.margin.inner"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$double.sided != 0"&gt;1.25in&lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;1.5in&lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:param&gt;

&lt;xsl:param name="body.margin.top" select="'.75in'"&gt;&lt;/xsl:param&gt;

&lt;!--===== set title fonts ===============================================
     Title fonts require replacing the standard
     titlepage.templates.xsl with a custom version.  This is done
     here by copying the fo/titlepage.templates.xml to
     mrc.titlepage.templates.xsl, editing it, and then processing it
     with
      xsltproc -output mrc.titlepage.templates.xsl \
         /usr/share/xml/docbook/docbook-xsl-1.60.1/template/titlepage.xsl  \
         mrc.titlepage.templates.xml
     Now we replace the old titlepage.templates.xsl with our new
     mrc.titlepage.templates.xsl
--&gt;
&lt;xsl:include href="mrc.titlepage.templates.xsl"/&gt;

&lt;!--===== blank verso titlepage =========================================--&gt;
&lt;xsl:template name="book.titlepage.verso"/&gt;

&lt;!--===== outdent titles ================================================--&gt;
&lt;xsl:param name="title.margin.left" select="'-2pc'"/&gt;

&lt;!--===== set section font, break ======================================--&gt;
&lt;xsl:attribute-set name="section.title.level1.properties"&gt;
  &lt;xsl:attribute name="font-size"&gt;14pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="break-before"&gt;page&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="border-bottom"&gt;1pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="border-bottom-style"&gt;solid&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="border-bottom-color"&gt;black&lt;/xsl:attribute&gt;  
  &lt;xsl:attribute name="margin-right"&gt;6em&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;
&lt;xsl:attribute-set name="section.title.level2.properties"&gt;
  &lt;xsl:attribute name="break-before"&gt;page&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;
&lt;xsl:attribute-set name="section.title.level3.properties"&gt;
  &lt;xsl:attribute name="break-before"&gt;page&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;

&lt;!--===== Code extract titles are sidebars ==============================--&gt;
&lt;xsl:attribute-set name="sidebar.properties" use-attribute-sets="formal.object.properties"&gt;
  &lt;xsl:attribute name="border-style"&gt;solid&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="border-width"&gt;1pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="border-color"&gt;black&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="background-color"&gt;#EDEDED&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="padding-left"&gt;12pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="padding-right"&gt;12pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="padding-top"&gt;2pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="padding-bottom"&gt;4pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="margin-left"&gt;0pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="margin-right"&gt;4em&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="margin-top"&gt;2pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="margin-bottom"&gt;2pt&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;
&lt;!--===== code (verbatim) font and spacing ==============================--&gt;
&lt;xsl:attribute-set name="verbatim.properties"&gt;
  &lt;xsl:attribute name="space-before.minimum"&gt;0.1pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-before.optimum"&gt;2pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-before.maximum"&gt;3pt&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-after.minimum"&gt;0.4em&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-after.optimum"&gt;.5em&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="space-after.maximum"&gt;1.2em&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;
&lt;xsl:attribute-set name="monospace.verbatim.properties"
    use-attribute-sets="verbatim.properties monospace.properties"&gt;
  &lt;xsl:attribute name="text-align"&gt;start&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="font-size"&gt;9pt&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;
    &lt;!--===== 2003-Oct-01 FOP does not appear to support shade.verbatim yet =--&gt;
&lt;xsl:param name="shade.verbatim" select="1"/&gt;
&lt;xsl:attribute-set name="shade.verbatim.style"&gt;
  &lt;xsl:attribute name="border"&gt;1&lt;/xsl:attribute&gt;
  &lt;xsl:attribute name="bgcolor"&gt;#E0E0E0&lt;/xsl:attribute&gt;
&lt;/xsl:attribute-set&gt;

    &lt;!--===== FOP did not like this =========================================--&gt;
&lt;!--&lt;xsl:attribute-set name="xref.properties"&gt;--&gt;
&lt;!--  &lt;xsl:attribute name="font-size"&gt;14pt&lt;/xsl:attribute&gt;--&gt;
&lt;!--  &lt;xsl:attribute name="font-style"&gt;bold&lt;/xsl:attribute&gt;--&gt;
&lt;!--&lt;/xsl:attribute-set&gt;--&gt;

&lt;/xsl:stylesheet&gt;

@doc
@ascskip xemacs-xsl-mode-off




</t>
<t tx="ekr.20040331071919.3">@doc
@ascskip # Time-stamp: "Mon, Jan 19 15:28 CST 2004  michael@redpriest License_141615068.txt"

This is part of the Leo2AsciiDoc software package, which is released
as open source.  

The license is the most "open" I know of, and is sometimes referred
to as the "X11" or "MIT" license.  Boiled down, in non-legal terms:

    - the software is yours for free -- to run, modify and
      distribute as you will
    - I have no legal liability for any of it
    - you may not use my name.

Michael Dawson
Marshall Research
michael_dawson at marshallresearch dot com

NOTE: The following license is often referred to as the "MIT/X
Consortium License", as the "MIT license" and as the "X11" license.
My source for the exact wording is the copy at the Open Source
Initiative:  http://opensource.org/licenses/mit-license.html[]


@code
</t>
<t tx="ekr.20040331071919.30">@language plain
@doc
@ascskip # Time-stamp: "Tue, Jan 13 10:21 CST 2004  michael@redpriest Appendix_XEmacs_Text_Editor_140657924.txt"

You can use Leo to enter all the text in an outline, but Leo also
allows you to use your familiar editing environment.  In my case,
that is XEmacs.  Fortunately, Leo integrates with XEmacs quite well.

The following items are code I use, some Leo Python plugins and some
XEmacs elisp functions.  You may find them useful.

@ascskip on
&lt;&lt; Appendix: XEmacs Text Editor &gt;&gt;
@code</t>
<t tx="ekr.20040331071919.31">@language python
@tabwidth -4

@doc
@ascskip # Time-stamp: "Tue, Jan 13 10:10 CST 2004  michael@redpriest _OpenWith_Plugin__140659092.py"

Leo's Open_With plugin can be modified so that the body text of any
outline node can be edited in XEmacs by choosing "File; OpenWith;
XEmacs" or "File; OpenWith; XEmacs - noshow"  from the menu.

What actually happens is that Leo places the text in a temporary
file, and calls XEmacs with the address of that temporary file.  Leo
then watches for changes in the temporary file.  When and if the
temporary file changes, Leo copies the contents to the body text of
the Leo node.
      
Below is the standard open_with.py plugin that came with Leo 4.1-rc3
The only modification I've made is to insert
@code
&lt;&lt;call XEmacs&gt;&gt;=
table = (
    ("X&amp;Emacs", "Alt+Shift+O", ("os.system","/usr/bin/gnuclient -q ", None)),
    ("X&amp;Emacs - noshow", "Ctrl+Shift+O", ("os.system","/mrc2/linux-bin/gnuclient-noshow ", None))
    )
@doc
as noted below.  A similar alteration should work for future
versions.

Note: this alteration is for XEmacs running under Linux, but a
similar command should work in the Windows environment.

I use the "gnuclient-noshow" selection to load the temporary open_with file in
the background.  It is a small bash shell script:
---
#!/bin/bash
gnuclient -eval "(find-file-noselect \"${1}\")"
---

To implement this, edit a copy of the open_with.py file that comes
with your version of Leo.  Move the original copy to a safe place,
and put your edited copy in the Leo plugins directory.  Check to see
it is included in "pluginsManager.txt" in that directory.
@ascskip on
@root "other/xemacs/open_with.py"
&lt;&lt; Open_With Plugin&gt;&gt;
@code
"""Create menu for Open With command and handle the resulting commands"""

import leo.core.leoGlobals as g
Tk = g.importExtension('Tkinter',pluginName=__name__,verbose=True)

import os

if Tk: # Register the handlers...

    def on_idle (tag,keywords):
        a = g.app
        if g.app.killed: return
        for dict in a.openWithFiles:
            path = dict.get("path")
            c = dict.get("c")
            encoding = dict.get("encoding",None)
            v = dict.get("v")
            old_body = dict.get("body")
            if path and os.path.exists(path):
                try:
                    time = os.path.getmtime(path)
                    if time and time != dict.get("time"):
                        dict["time"] = time # inhibit endless dialog loop.
                        # The file has changed.
                        try:
                            # Update v from the changed temp file.
                            f=open(path)
                            s=f.read()
                            f.close()
                        except:
                            g.es("can not open " + g.shortFileName(path))
                            break
                        
                        # Convert body and s to whatever encoding is in effect.
                        body = v.bodyString()
                        body = g.toEncodedString(body,encoding,reportErrors=True)
                        s = g.toEncodedString(s,encoding,reportErrors=True) # 10/13/03
                        
                        conflict = body != old_body and body != s
                        
                        # Set update if we should update the outline from the file.
                        if conflict:
                            # See how the user wants to resolve the conflict.
                            g.es("conflict in " + g.shortFileName(path),color="red")
                            message = "Replace changed outline with external changes?"
                            result = g.app.gui.runAskYesNoDialog(c,"Conflict!",message)
                            update = result.lower() == "yes"
                        else:
                            update = s != body
                        
                        if update:
                            g.es("updated from: " + g.shortFileName(path),color="blue")
                            c.setBodyString(v,s,encoding)
                            c.selectVnode(v)
                            dict["body"] = s
                        elif conflict:
                            g.es("not updated from: " + g.shortFileName(path),color="blue")
                except:
                    g.es_exception() # testing
                    pass
    def create_open_with_menu (tag,keywords):
    
        if  (tag in ("start2","open2") or
            (tag=="command2" and keywords.get("label")=="new")):
    
            # Entries in the following table are the tuple 
            # (commandName,shortcut,data).
            # 
            # - data is the tuple (command,arg,ext).
            # - command is one of "os.system", "os.startfile", "os.spawnl", 
            # "os.spawnv" or "exec".
            # 
            # Leo executes command(arg+path) where path is the full path to 
            # the temp file.
            # If ext is not None, the temp file has the extension ext,
            # Otherwise, Leo computes an extension based on what @language 
            # directive is in effect.
            
            idle_arg = "c:/python22/tools/idle/idle.py -e "
            
@doc
Here is where we insert the &lt; Call XEmacs &gt; code fragment defined above:
@code
            if 1: # Default table.


&lt;&lt; Call XEmacs &gt;&gt;
#               table = (
#                   # Opening idle this way doesn't work so well.
#                   # ("&amp;Idle",   "Alt+Shift+I",("os.system",idle_arg,".py")),
#                   ("&amp;Word",   "Alt+Shift+W",("os.startfile",None,".doc")),
#                   ("Word&amp;Pad","Alt+Shift+T",("os.startfile",None,".txt")))
#           elif 1: # Test table.
#               table = ("&amp;Word","Alt+Shift+W",("os.startfile",None,".doc")),
#           else: # David McNab's table.
#               table = ("X&amp;Emacs", "Ctrl+E", ("os.spawnl","/usr/bin/gnuclient", None)),
            
            c.frame.menu.createOpenWithMenuFromTable(table)

    if g.app.gui is None:
        g.app.createTkGui(__file__)

    if g.app.gui.guiName() == "tkinter":

        g.app.hasOpenWithMenu = True
        g.registerHandler("idle", on_idle)
        g.registerHandler(("start2","open2","command2"), create_open_with_menu)
    
        __version__ = "1.4" # Set version for the plugin handler.
        g.plugin_signon(__name__)

</t>
<t tx="ekr.20040331071919.32">@language python
@tabwidth-4
@doc
@ascskip # Time-stamp: "Tue, Jan 13 10:14 CST 2004  michael@redpriest _OpenTree_Plugin__140660268.py"

This is a module that creates an "Open With" menu item that opens
Leo outline nodes in the tree below the current Leo node in the
XEmacs editor.I frequently have a small tree of Leo nodes which
contain code that is usually edited in the same session.

NOTE: I use the "gnuclient-noshow" selection to load the temporary
open_with file in the background.Leo calls a command with the
temporary file name at the end of the command, but the gnuclient
command needs to receive it enclosed in quotes and parentheses.The
solution is a small intermediary bash shell script called
"gnuclient-noshow":

- - -
#!/bin/bash
gnuclient- eval "(find-file-noselect \"${1}\")"
- - -

I would rather have this operate in the background, but Leo ' s
openWith always operates on the current node, and openWith has much
good error checking that I want to use.So the fast solution was to
have OpenTreeInXEmacs visibly traverse the tree.

@ascskip on
@root "other/xemacs/mod_xemacsopentree.py"
&lt;&lt; Open_Tree Plugin &gt;&gt;
@code

def OpenTreeInXEmacs (c):
    import leo.core.leoCommands as leoCommands
    #XEmacsCommand = "/usr/bin/gnuclient -q "
    XEmacsCommand = "/mrc2/linux-bin/gnuclient-noshow "
    vnode = c.currentVnode() # get the current vnode.
    stopHere = vnode.nodeAfterTree()
    v = vnode
    while v != stopHere:
        c.openWith(data=("os.system",XEmacsCommand,None))
        v = v.threadNext()
        if (not v) or (v==stopHere):
            break
        c.selectVnode(v)
    c.selectVnode(vnode)


def CreateOpenTreeMenu (tag,keywords):

    """Create the 'Xemacs: Open Tree' menu item in the Open With menu."""


    if (tag=="open2" or
        (tag=="start2") or
        (tag=="command2" and keywords.get("label")=="new")):

        c = keyword.get('c')
        exportMenu = c.frame.menu.getMenu('Open With')
        newEntries = (
            ("-",None,None),
            ("XEmacs: Open nodes in sub-tree","None",OpenTreeInXEmacs),
        )
        c.frame.menu.createMenuEntries(exportMenu,newEntries,dynamicMenu=True)

if 1:
    g.registerHandler(("start2","open2","command2"),CreateOpenTreeMenu)

    __version__ = ".4" # Set version for the plugin handler.
    g.plugin_signon(__name__)
@doc


@code
</t>
<t tx="ekr.20040331071919.33">@language python
@tabwidth -4
@doc
@ascskip # Time-stamp: "Tue, Jan 13 10:15 CST 2004  michael@redpriest _Filename_modification__140661308.py"

This is a small modification to Leo (via a Python plugin module) so
that Leo will open the temporary files with a name that can be
easily recognized in an XEmacs buffer listing.

On Linux, Leo opens files in the temporary files directory, all
prefixed with "LeoTemp_", which makes the names difficult to tell
apart when you have many different nodes loaded in XEmacs.

This code replaces the openWithTempFilePath method of the LeoFrame
class with code that opens temporary files in a subdirectory of the
temporary files directory, called "username_Leo", and omits the
"LeoTemp" prefix.

For example, I'm now editing this Leo node in XEmacs as
    "/tmp/michael_Leo/_Filename_modification__138976348.py"
In the XEmacs buffer list, the filename is shown as
    "_Filename_modification__138976348.py"
and all the Leo buffer names start with a leading underscore, so
they are grouped together.

For general use, this code should be considerably more robust about
creating the Leo subdirectory and signaling errors, but it is just a
quick hack that works for me on my machines.

This is distributed with Leo version 4.1rc3, so I've updated it with
Ed Ream's modifications to match that distribution.

@ascskip on
@root "other/xemacs/mod_tempfname.py"
&lt;&lt; Filename modification &gt;&gt;
@code

"""Replace Commands.openWithTempFilePath so Leo opens temporary
files with a filename that begins with the headline text, and
located in a 'username_Leo' subdirectory of the temporary
directory. The 'LeoTemp' prefix is omitted.  This makes it easier to
see which temporary file is related to which outline node.""" #'

import leo.core.leoGlobals as g
import leo.core.leoCommands as leoCommands
import getpass
import os
import tempfile

def onStart (tag,keywords):

    # g.trace("replacing openWithTempFilePath")

    g.funcToMethod(openWithTempFilePath,leoCommands.Commands,"openWithTempFilePath")

def openWithTempFilePath (self,v,ext):

    """Return the path to the temp file corresponding to v and ext.

    Replaces the Commands method."""    

    try:
        leoTempDir = getpass.getuser() + "_" + "Leo"
    except:
        leoTempDir = "LeoTemp"
        g.es("Could not retrieve your user name.")
        g.es("Temporary files will be stored in: %s" % leoTempDir)

    td = os.path.join(os.path.abspath(tempfile.gettempdir()), leoTempDir)
    if not os.path.exists(td):
        os.mkdir(td)

    name = g.sanitize_filename(v.headString()) + '_' + str(id(v))  + ext
    path = os.path.join(td,name)
    return path

# Register the handlers...
g.registerHandler("start2", onStart)

__version__ = "1.3"
g.plugin_signon(__name__)
</t>
<t tx="ekr.20040331071919.34">@language plain
@silent
@doc
@ascskip # Time-stamp: "Tue, Jan 13 09:58 CST 2004  michael@redpriest _Kill_Temporary_Buffers__140661388.txt"

If you've opened a number of Leo temporary buffers in XEmacs, this
XEmacs function will kill them for you.  Just set the tempdir
variable to whatever matches your local value.

XEmacs will prompt you about any buffers that have unsaved changes.

@ascskip on
@ascskip xemacs-lisp-mode-on
@root "other/xemacs/kill-temporary-buffers.el"
&lt;&lt; Kill Temporary Buffers &gt;&gt;
@code
;;
;;-     mwd-leo-kill-buffers
(defun mwd-leo-kill-buffers ()
  "Kill any buffers for files in my Leo temporary directory."
  (interactive)
  (let ((bl (buffer-list))
        (tempdir "/tmp/michael_Leo" )  ;; change this to your temporary directory.
        )
    (while bl
      (setq test-buffer (car bl))
      (setq bname (buffer-file-name test-buffer))
      (if (and bname (string-match tempdir bname))
          (kill-buffer test-buffer)
        )
      (setq bl (cdr bl))
      )
    )
  )



@doc
@ascskip xemacs-lisp-mode-off
</t>
<t tx="ekr.20040331071919.35">@language plain
@silent
@doc
@ascskip # Time-stamp: "Tue, Jan 13 10:18 CST 2004  michael@redpriest _MMMmode__140663340.txt"

There is an editing mode for XEmacs called Multiple Major Modes,
which allows us to edit the temporary text conveniently: with all
the syntax highlighting, special keymaps, etc. available, even
though Leo nodes may contain both plain text and program code.

When the XEmacs cursor is in a section of plain text, all the plain
text facilities are available, and there is no syntax
highlighting. When the XEmacs cursor is in a section of code
(Python, XSL, whatever) XEmacs invokes the syntax highlighting,
special keymaps, etc. appropriate for that code.

indexterm:[Multiple Major Modes]
indexterm:[Multiple Major Modes,mmm-mode.el]
If you have XEmacs installed, and you have also installed the
Multiple Major Modes mmm-mode.el package, the following code will
customize mmm-mode for use while editing Leo temporary files.

NOTE: mmm-mode is already installed by default in most
distributions.

Installation: Load mmm-leo-config.el from your .init.el file, or
just load it manually to try it out.

I won't go through it all, but for example, when editing a temporary
Leo file that is in XEmacs Python mode, and/or has a ".py" suffix:

    - when your cursor is any text between the @doc and @code
      directives XEmacs will enter text-mode.  Otherwise (e.g. with
      the cursor after the @code directive), XEmacs will be in
      Python mode.
    - when your cursor is between text that says
      "xemacs -makefile-mode-on" and text that says
      "xemacs -makefile-mode-off", XEmacs will enter makefile-mode.
      (You key in those text markers to mark out the area you want
      as makefile-mode.  See the Leo2AsciiDoc.leo outline for examples,
      e.g the "Make File" section in the Leo2AsciiDoc Users Guide.)

      Otherwise, XEmacs will be in Python mode in that buffer.

Similarly, makefile-mode, xsl-mode and emacs-lisp-mode are added to
temporary Leo files that created with a ".txt" extension.      

A future project may be to create a Leo module to use in the
Leo "openWith" function that examines each node for these mmm-mode
markers and creates the temporary file with the proper extension.

@ascskip on
@ascskip xemacs-lisp-mode-on
@root "other/xemacs/mmm-leo-config.el"
&lt;&lt; MMM-mode &gt;&gt;
@code
;;-     mmm-mode                multiple modes
(require 'mmm-auto)
(require 'mmm-vars)

;   mmm-mode-on and mmm-mode-off turn it on and off in a buffer.
;   \c-c % \c-b re-parses the whole buffer

;   set mode to activate on mode or extension
(setq mmm-global-mode 'maybe)

; turn off gray background
(setq mmm-submode-decoration-level 0)

;   add embedded modes in python
(mmm-add-group
 'py-embedded-text
 '(
   (py-leo
    :submode text-mode
    :face mmm-code-submode-face
    :front "^@doc.*"
    :back "^@code"
    :insert ((?l py-leo-tag nil @ "@doc"
                 @ "\n\n" _ "\n\n" @ "@code" @))
    ; \c % l will insert the doc-code pair at point.
    )
   (py-doc
    :submode text-mode
    :face mmm-code-submode-face
    :front "^\"\"\".*"
    :back "^.+\"\"\""
    )
   (py-makefile
    :submode makefile-mode
    :face mmm-code-submode-face
    :front "xemacs-makefile-mode-on"
    :back "xemacs-makefile-mode-off"
    )
   )
 )
;   add embedded modes in text
(mmm-add-group
 'text-embedded
 '(
   (txt-makefile-mode
    :submode makefile-mode
    :face mmm-code-submode-face
    :front "xemacs-makefile-mode-on"
    :back "xemacs-makefile-mode-off"
    :insert ((?l text-embedded-tag nil @ "@doc"
                 @ "\n\n" _ "\n\n" @ "@code" @))
    ; \c % l will insert the doc-code pair at point.
    )
   (txt-xsl-mode
    :submode xsl-mode
    :face mmm-code-submode-face
    :front "xemacs-xsl-mode-on"
    :back "xemacs-xsl-mode-off"
    :insert ((?l text-embedded-tag nil @ "@doc"
                 @ "\n\n" _ "\n\n" @ "@code" @))
    ; \c % l will insert the doc-code pair at point.
    )
   (txt-lisp-mode
    :submode emacs-lisp-mode
    :face mmm-code-submode-face
    :front "xemacs-lisp-mode-on"
    :back "xemacs-lisp-mode-off"
    :insert ((?l text-embedded-tag nil @ "@doc"
                 @ "\n\n" _ "\n\n" @ "@code" @))
    ; \c % l will insert the doc-code pair at point.
    )
   )
 )
(mmm-add-mode-ext-class 'python-mode "\\.py\\'" 'py-embedded-text)
(mmm-add-mode-ext-class 'text-mode "\\.txt\\'" 'text-embedded)

@doc
@ascskip xemacs-lisp-mode-off
</t>
<t tx="ekr.20040331071919.36">@language plain
@silent
@doc
@ascskip # Time-stamp: "Tue, Jan 13 10:20 CST 2004  michael@redpriest _Insert_indexterm__140664580.txt"

indexterm:[XEmacs, Indexing]
Indexing is tedious work, and it interferes with the readability of
the ascii text as well.  However, used sparingly, it helps the
reader.

When editing a Leo node (in an XEmacs buffer), this function copies
a highlighted word or phrase and inserts an AsciiDoc index code on a
new line immediately before the paragraph.  I try to keep markup out
of the way of the reader.  In this case, AsciiDoc requires that the
index code be part of the same block of text, and the first line of
the block is the least annoying place I can find.

For example, if I wanted to index the words "XEmacs buffer" above, I
would highlight them (usually by pressing M-@ a couple of times) and
then call this function (I have it bound to C-k C-h C-i).  At the
beginning of the paragraph, my text would say "\indexterm:[XEmacs
buffer]".

@ascskip on
@ascskip xemacs-lisp-mode-on
@root "other/xemacs/index-leo-region.el"
&lt;&lt; Insert indexterm &gt;&gt;
@code
(defun mwd-index-leo-region (start end)
  "preface paragraph with AsciiDoc index macro of region."
  (interactive "r")
  (save-excursion
    (copy-region-as-kill start end)
    (backward-paragraph)
    (insert "\nindexterm:[")
    (yank)
    (insert "]")
    )
  )

@doc
@ascskip xemacs-lisp-mode-off

</t>
<t tx="ekr.20040331071919.37">@language plain
@silent
@doc
@ascskip # Time-stamp: "Tue, Jan 13 10:56 CST 2004  michael@redpriest _Indent_Leo_comments__141202716.txt"

Leo derived files are sprinkled with comments, which Leo uses as
markers to be able to "untangle" files, i.e. import changes made to
a derived file back into the Leo outline.

Useful as they may be, the comments are an ugly distraction when
reading the source code.  One could have XEmacs flush them from the
file, but then the untangle feature is gone for that file.

This pair of XEmacs elisp functions moves them to the right, where
they aren't so distracting, and moves them back again if you should
want to untangle the file.

@ascskip on
@ascskip xemacs-lisp-mode-on
@root "other/xemacs/indent-leo-comments.el"
&lt;&lt; Indent Leo comments &gt;&gt;
@code
(defun mwd-leo-comments-indent ()
  "Indent Leo comments to make them less distracting."
  (interactive)
  (save-excursion
    (let* (
          (leading-spaces 40)
          (start-string (concat (make-string leading-spaces ? ) "\\1" ))
          (end-string (concat (make-string leading-spaces ? ) "\\1" ))
          )
      (goto-char (point-min))
      (while (search-forward-regexp "\\(^# &lt;&lt;\\)" nil t) (replace-match start-string))
      (goto-char (point-min))
      (while (search-forward-regexp "\\(^# -- end\\)" nil t) (replace-match end-string))
      )
    )
  )

(defun mwd-leo-comments-unindent ()
  "Reverse the effect of mwd-leo-comments-indent."
  (interactive)
  (save-excursion
      (goto-char (point-min))
      (while (search-forward-regexp "^\\(\\s-\\)+\\(# &lt;&lt;\\)" nil t) (replace-match "\\2" ))
      (goto-char (point-min))
      (while (search-forward-regexp "^\\(\\s-\\)+\\(# -- end\\)" nil t) (replace-match "\\2" ))
    )
  )
@doc
@ascskip xemacs-lisp-mode-off
</t>
<t tx="ekr.20040331071919.38">@language plain
@ascfile "doc/mod_asc_user.asc"
@ascconfig maxCodeLineLength 80
@doc
@ascskip # Time-stamp: "Mon, Jan 19 15:29 CST 2004  michael@redpriest Leo_AsciiDoc_Users_Guide_141652036.txt"

Preface
-------

Leo2AsciiDoc is a small Python program which has been
built to be used as a plugin module for the Leo outlining editor.

Leo2AsciiDoc enables the contents of Leo outlines to be published to HTML
or PDF via the DocBook set of publishing tools.  Plain text from the
Leo outline is transformed into a final result that has:

    - typeset body text, in which bulleted and numbered lists,
      variable lists, page numbers, URLs, index terms,and bold and
      italic text are automatically recognized.
    - typeset Headings
    - a Table of Contents
    - an Index containing any items marked by the user, and any
      Python classes or functions.

As you will see, there's not a lot involved in using the
Leo2AsciiDoc module.  It simply copies text from a Leo outline (or a
portion of a Leo outline) to a text file.  In turn that text file can
be automatically converted by the AsciiDoc program and a DocBook
system to properly typeset DocBook HTML, PDF or other formats.

If you keep your text plain, and use a few simple formatting
conventions, the final output can have typeset headings, bulleted
lists, indexing and cross-referencing, as well as many other
features.

---
Michael Dawson
Marshall Research
michael_dawson at marshallresearch dot com
---

*note*

Leo2AsciiDoc is suited for general text documents, most programming
documentation and most business documents.  Leo2AsciiDoc (being based on
DocBook) is not the choice for anyone needing detailed typographic
control of individual words or characters -- for example, typeset
equations.  In general, DocBook typesets blocks of text.

*note*

@code
</t>
<t tx="ekr.20040331071919.39">@doc
@ascskip # Time-stamp: "Mon, Jan 19 11:48 CST 2004  michael@redpriest Installation_140689076.txt"
Installation of this plugin is very straightforward, using Leo
version 4.1:

    - copy the python source code (mod_leo2ascd.py) to your Leo
      plugin directory (a subdirectory called "plugins" under your
      main Leo directory).
    - in that directory should be a text file called
      pluginsManager.txt, containing a list of all plugins that are
      to be loaded when Leo starts.  Add mod_leo2ascd.py to the
      list.
    - start or re-start Leo.
    - in the Leo Log Window you should see the Leo2AsciiDoc sign-on
      message "---mod_leo2asc 0.4-------".
    - in the Leo main menu "File; Export", there should be two menu
      items called something like "Export to AsciiDoc".

@code</t>
<t tx="ekr.20040331071919.4">@doc
@ascskip # Time-stamp: "Fri, Jan  9 09:18 CST 2004  michael@redpriest License_document_140581532.txt"
---
Terms and Conditions
 
COPYRIGHT AND PERMISSION NOTICE

Copyright (c) 1999,2000,2001,2002,2003,2004 Michael W. Dawson

All rights reserved.

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation files
(the "Software"), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge,
publish, distribute, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, provided
that the above copyright notice(s) and this permission notice appear
in all copies of the Software and that both the above copyright
notice(s) and this permission notice appear in supporting
documentation.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT OF THIRD PARTY RIGHTS. IN NO EVENT SHALL THE
COPYRIGHT HOLDER OR HOLDERS INCLUDED IN THIS NOTICE BE LIABLE FOR
ANY CLAIM, OR ANY SPECIAL INDIRECT OR CONSEQUENTIAL DAMAGES, OR ANY
DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE
OF THIS SOFTWARE.

Except as contained in this notice, the name of a copyright holder
shall not be used in advertising or otherwise to promote the sale,
use or other dealings in this Software without prior written
authorization of the copyright holder.
---
@code</t>
<t tx="ekr.20040331071919.40">@language plain
@doc
@ascskip # Time-stamp: "Thu, Oct 16 13:46 CST 2003  michael@redpriest Operation_140791428.txt"

Using Leo2AsciiDoc is as simple as choosing the Leo menu item: "File;
Export; Export All to AsciiDoc".  From there, you have the AsciiDoc
program and the DocBook system automatically convert your outline to
HTML or PDF (or to a manpage or a DocBook website.)

Step by step:

    - You need a Leo outline containing some plain text, or plain
      text and code.
    - You ensure that the top node in the outline (or part of the
      outline tree which you want to be a separate document) must
      have an @ascfile directive in the body text. The @ascfile
      directive is used to specify the filename in which the output
      text will be put.
    - You then use Leo's menu: "File; Export; Export All to
      AsciiDoc" (or one of the other Leo2AsciiDoc menu items) to
      have Leo2AsciiDoc automatically export the outline to a text file.
    - After that, you run the AsciiDoc program on the exported text
      file, and process it as a DocBook document.  Most often,
      people have a Make file set up to do this automatically.

In practice, people often want to use special features:

    - plain text formatting, sometimes referred to as "structured
      text" or "minimal markup"
    - Leo2AsciiDoc configuration options

The following sections cover this.  If you've downloaded the Leo2AsciiDoc
package, the mod_leo2asc.leo outline is available, and illustrates
all the features.  It is the outline from which all the Leo2AsciiDoc HTML
and PDF documentation and code were derived.

@code
</t>
<t tx="ekr.20040331071919.41">@doc
@ascskip # Time-stamp: "Mon, Jan 19 13:19 CST 2004  michael@redpriest Directives_140672364.txt"

The following are non-printing directives that you can insert into
your outline text to control Leo2AsciiDoc behaviour.  All must be at the
beginning of the line.

{amp}commat;ascfile::
    e.g: `@ascfile "doc/mod_asc_user.asc" `

    Ascfile is the equivalent of a Leo @root directive. Ascfile
    signals the start of a document and specifies the file name to
    receive the text.

    The default directory is the directory containing the Leo
    outline.  If you were editing an outline that resided in
    /home/me then the above ascfile directive would create the file
    mod_asc/user.asc in the directory /home/me/doc.

{amp}commat;ascignore::
    Ascignore causes Leo2AsciiDoc to ignore the outline node, and any
    sub-nodes. It must be placed before any line in the node which
    will print.

{amp}commat;ascskip::
    Causes Leo2AsciiDoc to skip the line.  If followed by the word "on",
    causes Leo2AsciiDoc to skip all succeeding document lines until an
    "{amp}commat;ascskip off" directive is read, or a code section is reached.

{amp}commat;ascexit::
    Causes Leo2AsciiDoc to exit the outline node without processing any
    further lines.  Sub-nodes will be processed.

{amp}commat;ascconfig::
    e.g. `{amp}commat;ascconfig maxCodeLineLength 70` -- see
    Configuration below. 
    

@code
</t>
<t tx="ekr.20040331071919.42">@doc
@ascskip # Time-stamp: "Mon, Jan 19 13:20 CST 2004  michael@redpriest Configuration_140673612.txt"

There are a few configuration settings which may be set in an
outline.  To take effect, they must be placed:

    - in the top node of the outline, or
    - the same node as an @ascfile directive.
    
Configuration settings in the top node of the outline are effective
for the whole outline, unless overridden by settings in sub-nodes.

maxCodeLineLength::
    e.g. `{amp}commat;ascconfig maxCodeLineLength 70` -- 
    sets the maximum length of code printout lines to 70 characters.
    Longer lines will be wrapped and a line continuation character
    displayed.

PrintHeadings::    
    e.g. `{amp}commat;ascconfig PrintHeadings off` -- turns off the
    export of outline node headings as section titles.  In that
    case, you must have correctly entered AsciiDoc section titles in
    the body text of your outline.

Readers of the code will note that there are other configuration
settings in the code. These will be used in future, and so I won't
document them yet.


@code</t>
<t tx="ekr.20040331071919.43">@language plain
@doc
@ascskip # Time-stamp: "Mon, Jan 19 13:22 CST 2004  michael@redpriest Markup_140672220.txt"

The point of using a system like AsciiDoc is to get a document that
is properly typeset, while writing only plain text with as little
embedded formatting instruction as possible.

For the most part, you simply write chunks of text, which become
typeset paragraphs.

I've tried to use most commonly used markup in the Leo outline that
contains all the Leo2AsciiDoc source and documentation, so that you
can see exactly how markup may be used.

@code</t>
<t tx="ekr.20040331071919.44">@doc
@ascskip # Time-stamp: "Mon, Jan 19 13:20 CST 2004  michael@redpriest Standard_AsciiDoc_Markup_140676540.txt"

This section illustrates a very small part of the standard AsciiDoc
markup.  However, AsciiDoc comes with extensive documentation of its
own, which any Leo2AsciiDoc user should read.


@code</t>
<t tx="ekr.20040331071919.45">@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:06 CST 2004  michael@redpriest Headings_141020668.txt"

indexterm:[Markup, Headings]
Leo2AsciiDoc will automatically create Headings from the headings of
your Leo outline.  You can turn this off (see Configuration), and
create your own headings in the body text of an outline node.  For
example, a Chapter heading is text at the left margin that has a
following line of dashes.  For example,

@code
 Operation
 ---------

@doc
is the heading of this chapter.  Chapter sub-sections have a
following line of tildes.  For example,

@code

 Markup
 ~~~~~~

@doc

is the heading of Section One of this chapter.  Section Two markup
is a following line of "^".  For example, 

@code

Standard AsciiDoc Markup
^^^^^^^^^^^^^^^^^^^^^^^^
@doc

is the heading of the section, which is a Section Two.

As I say, you normally don't need to do this, since Leo2AsciiDoc does all
this itself from the outline headings.


@code
</t>
<t tx="ekr.20040331071919.46">@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:06 CST 2004  michael@redpriest Lists_141018612.txt"

indexterm:[Markup, lists]
Bulleted lists start with a dash (or asterisk) followed by a space
or tab character.  I've extended this to allow leading spaces.  For
example,
    
@code
    - this is a list item
        * this is a sub-item
    - this is another list item
@doc

produces:

    - this is a list item
        * this is a sub-item
    - this is another list item


@code</t>
<t tx="ekr.20040331071919.47">@doc
@ascskip # Time-stamp: "Thu, Jan  8 14:07 CST 2004  michael@redpriest URLs_140994492.txt"

indexterm:[Markup, URL]
The URL address of a web page will be "hot" in the HTML or PDF
document, when terminated with square brackets:

@code

http://www.docbook.org[The official home page for DocBook: The Definitive  Guide.]

@doc

results in:

http://www.docbook.org[The official home page for DocBook: The Definitive Guide.]


@code</t>
<t tx="ekr.20040331071919.5">@doc
@ascskip # Time-stamp: "Fri, Jan  9 16:13 CST 2004  michael@redpriest Version_Requirements_140584132.txt"

This is version 0.4 of Leo2AsciiDoc.  The major version of zero
indicates that it is an in-house version, not suitable for
production use elsewhere.

It was created and tested using:

    - Leo version 4.1 (release candidate 3).  Leo2AsciiDoc was
      upgraded to use the new features in 4.1 and is no longer
      compatible with previous versions.
    - AsciiDoc version 5.0.2.  Leo2AsciiDoc was upgraded to use the
      new features in 5.0.2, and is no longer compatible with older
      versions of AsciiDoc.
    - DocBook XML DTD version 4.2 and DocBook XSL stylesheets 1.60.1
    - xsltproc 1.0.30
    - fop 0.20.5

The last three items are the DocBook tool chain I'm currently using.
Any working DocBook XML tool chain you may have is likely to work,
since the major Leo2AsciiDoc effort is in producing the XML files
the tool chain uses as input.

@code</t>
<t tx="ekr.20040331071919.6">@language plain
@doc
@ascskip # Time-stamp: "Fri, Jan  9 16:00 CST 2004  michael@redpriest The_General_Approach_140588436.txt"

Leo2AsciiDoc simply copies the text from a portion of a Leo outline
to a text file.  That text file can then be processed by other
programs to produce HTML, PDF's, etc.

The text will be copied from each outline item, in outline order,
though you can skip individual nodes or sub-trees.

The idea is that you write the outline as a book, or series of
books.

If your book contains source code, you can break it up into pieces
that make it convenient to review with the reader.  Additionally,
you can discuss the pieces in any order that you like.  Using the
"tangle" command, Leo will be able to assemble and reorder the
pieces in the order required for a file of compilable source code.

As the text is copied from the outline, Leo2AsciiDoc adds minimal markup,
generally:

    - It marks up node headlines as Titles and Section Headings
      in the AsciiDoc format.
    - Program listings have AsciiDoc section markers inserted before
      and after.

A specific list follows.

@code</t>
<t tx="ekr.20040331071919.7">@language plain
@doc
@ascskip # Time-stamp: "Fri, Jan  9 16:05 CST 2004  michael@redpriest Markup_Added_140589620.txt"

    - headings:
        * By default, all outline node headings are underlined with
          the appropriate section underline character, which
          AsciiDoc will use to transform the headings into titles:
          chapter, section1, section2, etc.
        * code extracts are given an "example" heading.
    - source code sections are marked with delimiters, so that they
      can be assigned to the DocBook "programlisting" element.
    - source code sections are line-wrapped in the document output,
      for convenient html display.
    - wherever source code is exported to a source code file, the
      document with note this with an automatically generated "note"
      element.

@code
</t>
<t tx="ekr.20040331071919.8">@language python
@tabwidth -4

@doc
@ascskip on
 @silent
NB: remove leading space from above silent directive for final clean
code.

@ascskip off
@ascskip # Time-stamp: "Thu, Dec  4 11:58 CST 2003  michael@redpriest _The_Code__140751676.py"

This chapter contains all the source code for the Leo2AsciiDoc program.
The code is arranged in an order that is convenient for discussion.

On its way from the Leo outline to this document, the code has been
reformatted for printing.  Please note that:

    - code lines that are longer than the current publishing limit
      are wrapped.  Wrapped lines end in a "\" character and have
      the remainder of the text on the next line, preceeded by 4
      spaces. The real working code is not changed in this way when
      exported for actual use.
    - Some code has been extracted as Examples, and has a title
      saying something like "Example: Interesting Code".  Rather
      than repeat that code in the main code body, there is simply a
      reference to the name, enclosed in double angle brackets:
      \&lt;&lt;Interesting Code&gt;&gt;. All extracts are indexed, see "Python
      code, extracts used" in the Index at the end of the document.

@ascskip on
@root "mod_leo2ascd.py"
__version__ = ".5" # Set version for the plugin handler.
&lt;&lt; Declarations and Utilities &gt;&gt;
&lt;&lt; Write the outline tree as AsciiDoc file &gt;&gt;
&lt;&lt; Write a node &gt;&gt;
&lt;&lt; Key Functions &gt;&gt;
@code</t>
<t tx="ekr.20040331071919.9">@doc
@ascskip # Time-stamp: "Thu, Dec  4 16:05 CST 2003  michael@redpriest _Key_Functions__141128028.py"

These are the top-level functions that can be called from the Leo menu.

The next function writes the Leo outline tree of the current node to
a text file.  It first checks to see that there is an ascfile
directive in the current node, or above it, and then calls the
WriteTreeAsAsc function to write the tree starting at the ascfile
node.

If you have several documents in one Leo outline, this function will
write out the current one.

@code

def WriteTreeOfCurrentNode(c):
    f = c.frame
    vnode = c.currentVnode() # get the current vnode.
    while vnode:
        ascFileN = GetAscFilename(vnode)
        if ascFileN == None:
            vnode = vnode.parent()
        else:
            break

    if ascFileN == None:
        g.es("Sorry, there was no @ascfile directive in this outline tree.")
    else:
        WriteTreeAsAsc(vnode, ascFileN)

@doc

The next function exports all Leo2AsciiDoc documents in the entire Leo
outline, starting at the top and working through all nodes.

@code
def WriteAll(c):
    f = c.frame
    v = c.rootVnode()
    while v:
        ascFileN = GetAscFilename(v)
        if ascFileN != None:
            WriteTreeAsAsc(v, ascFileN)
            v = v.nodeAfterTree()
        else:
            v = v.threadNext()
@doc

This function is handy to see all the Leo2AsciiDoc sub-trees and source
code sub-trees in a Leo outline.  It prints the results in the log pane.

@code

def WriteAllRoots(c):
    "Writes @root directive and/or @ascfile directive to log pane."

    patternAscDirectiveFile = re.compile(r'^@ascfile')
    patternRoot = re.compile(r'^@root')

    g.es('Looking for @root or @ascfile.')
    f = c.frame
    vnode = c.rootVnode()
    while vnode:
        bodyString = vnode.bodyString()
        lines = bodyString.splitlines()
        printedHeading = False
        for line in lines:
            printLine = False
            containsAscFileDirective = patternAscDirectiveFile.match(line)
            if containsAscFileDirective:
                printLine = True
            containsRootDirective = patternRoot.match(line)
            if containsRootDirective:
                printLine = True
            if printLine:
                if not printedHeading:
                    g.es(vnode.headString())
                    printedHeading = True
                g.es('  ' + line)
        vnode = vnode.threadNext()

@doc

Next, we simply create Leo menu items for the above functions,
assuming Leo is loading this code as a module (i.e. the Python
source has been placed in the Leo plugins directory.)  As a module,
the phrase "if 0:" must be changed to "if 1:" to activate the
module.

But while the "if 0:" is left, this code can be used as a script
from the Leo scripts menu (assuming a copy of the code has been
placed in the Leo scripts directory), implementing the WriteAll
function above. This is useful in testing.

@code
def CreateAscMenu(tag,keywords):

    """Create the Outline to AsciiDoc menu item in the Export menu."""
    
    c = keywords.get('c')
    if not c: return

    exportMenu = c.frame.menu.getMenu('export')
    newEntries = (
        ("-", None, None),
        ("Export all to &amp;AsciiDoc","Alt+Shift+A",WriteAll),
        ("Export current tree to AsciiDoc","Alt+Shift+T",WriteTreeOfCurrentNode),
        ("Log all root and ascfile to log pane","Alt+Shift+L",WriteAllRoots),
    )

    c.frame.menu.createMenuEntries(exportMenu, newEntries,dynamicMenu=True)
    
if 1:
    def init():
        ok = True
        g.registerHandler(('new','open2'), CreateAscMenu)
        g.plugin_signon(__name__)
        return ok
else:
    WriteTreeOfCurrentNode()

@doc</t>
<t tx="ekr.20040722134535"># Warning: these plugins are not ready for prime time.</t>
<t tx="ekr.20040722135402"></t>
<t tx="ekr.20040722135402.1"></t>
<t tx="ekr.20040722141148">@

You would typically not enable any of the following "plugins".

These plugins contain example code only.</t>
<t tx="ekr.20040915073259"></t>
<t tx="ekr.20040918165427.4">@nocolor

Developers
By: jasonic ( Jason Cunliffe ) 
 @dictionary   
2003-08-21 07:51

Auto-completion dictionary files would be excellent.
Ideally each Leo language extension could just point to a separate .dict file. 

Hopefully we can build some Leo plugin utilities to generate these .dict files by parsing any file you'd like to use a 'source' for Leo dictionary. They might need manual cleanup, but vcould be big timesaver, especially for XML formats and the like. Great to be able to sahre these easily. 

Interesting uses for Leo dictionaries beyond just autocompletion. 
I am thinking they might open the door to some powerful macro/template behavior. 

For example, you load a special dictionary to help certain kinds of repetitive formatted content. CSS and XSLT could be good candidates, but also any kind of mild databases or lists. Documentation.

So first we need basic dicts for Leo supported languages: Python, Perl, Javascript etc..

Then we need to consider that any Leo Node could have its own dictionary defined inline..

@dictionary filepath-to-custom-leo-dict

With collaborative LeoN this would be very useful because connected Leo sessions could invoke each other's dictionaries!!

- Jason  
</t>
<t tx="ekr.20041001210557"></t>
<t tx="ekr.20041009112303"></t>
<t tx="ekr.20041010110321">root = g.app.root

if standalone:
    # Use the hidden root.
    self.top = top = root
else:
    # Create a new toplevel.
    self.top = top = Tk.Toplevel(root)

g.app.gui.attachLeoIcon(top)
top.title(self.dialog_caption)</t>
<t tx="ekr.20041010110321.1">self.frame = frame = Tk.Frame(top)
frame.pack(side="top", fill='both', expand=1, padx=5, pady=5)   

self.upper = Tk.Frame(frame)
self.upper.pack(side="top", fill='both', expand=1, padx=5, pady=5)

self.lower = Tk.Frame(frame)
self.lower.pack(side="top", fill='x', expand=0, padx=5)</t>
<t tx="ekr.20041010111700">root = g.app.root
self.top = top = Tk.Toplevel(root)
g.app.gui.attachLeoIcon(self.top)
top.title(title)

self.frame = frame = Tk.Frame(top)
frame.pack(side="top", fill='both', expand=1, padx=5, pady=5)</t>
<t tx="ekr.20041010111700.1">def callbackPrint(text):
    """A callback to send status information"""
    self.remote_plugin_list.populateList() 
    self.messagebar.message("busy", text)
    self.top.update()</t>
<t tx="ekr.20041030092101">@ Notes by EKR:  The dyna plugin is a remarkable body of work by 'e'.  Have fun with it.

You may download the latest version at: http://rclick.netfirms.com/dyna_menu.py.html
</t>
<t tx="ekr.20041110104350"></t>
<t tx="ekr.20041113095851"></t>
<t tx="ekr.20041114102139">@nocolor</t>
<t tx="ekr.20041114102139.1">- Several plugins show the docstring, so please take care to do a good job of
describing what the plugin does and how to use it.

- Please put the following immediately following the plugin's docstring.

    @language python
    @tabwidth -4

- There is no need to use sections if they are empty.

- The code should test whether modules have been imported only if those modules
may not be available on all platforms.

- Use following three lines only if your plugin uses a gui.

    if g.app.gui is None: 
        g.app.createTkGui(__file__)
    if g.app.gui.guiName() == "tkinter":
        ...
</t>
<t tx="ekr.20041114102139.2">Please use the general format as shown in &lt;&lt; imports &gt;&gt;.  In partular:

- Please do _not_ assume that modules like Tkinter, Pmw, etc. are always available.
  Use g.importExtension.

- Good Python style is to put each import on a separate line.

- Please abbreviate Tkinter as Tk.  Please do NOT abbreviate Pmw.

- Please do NOT use either of the following kinds of imports.
    from m import *
    from m import x,y,z

- Do not import leo.core.leoNodes as leoNodes unless your plugin creates nodes directly.</t>
<t tx="ekr.20041114103913">Most of the comments in the style guide are comments _about_ the style guide.
You would replace these comments with your own, or eliminate them entirely in
your plugin.</t>
<t tx="ekr.20041114103913.1">PLEASE define each function or method in a separate node! To make this work,
just put @others in the root of your plugin as shown. Note that @others may be
nested, as shown in class myClass.</t>
<t tx="ekr.20041211035618"></t>
<t tx="ekr.20041231134702"># This is called from plugins_menu plugin.

# It should only be defined if the extension has been registered.

def topLevelMenu(c):

    """Manage the plugins"""

    dlg = ManagerDialog(c,True)</t>
<t tx="ekr.20050111122605"></t>
<t tx="ekr.20050121183012">def getMatch(self, text, pattern):

    """Return a single match for the specified pattern in the text"""

    return re.search(pattern,text,re.MULTILINE + re.DOTALL)</t>
<t tx="ekr.20050128070307"></t>
<t tx="ekr.20050213122944">def init():

    global ok
    if not ok: return None

    if g.app.gui is None:
        g.app.createTkGui(__file__)

    ok = g.app.gui.guiName() == "tkinter"

    # Ok for unit testing: adds menu.
    if ok:
        g.plugin_signon(__name__)

    return ok</t>
<t tx="ekr.20050217093214">@nocolor</t>
<t tx="ekr.20050227071948" annotate="5804010000376437313030323835353038373037323639366637323639373437393731303132383633363136653665366637343631373436353061353436623530363936333662366336353536363137323061373130323666373130333464306632373632353530343665366636343635373130353238363830323666373130363535303734363635363137343735373236353731303736323535303236323637373130383238363830323666373130393535303037313061363235353039363137323633363836353734373937303635373130623238363830323666373130633638306136323535303236363637373130643238363830323666373130653638306136323735326571002e"></t>
<t tx="ekr.20050227071948.1" annotate="7d71002e">
- move the clone marker to the same place as the blue square
  content indicator. They can overlap.  Make room for annotations.
  



</t>
<t tx="ekr.20050227071948.10" annotate="7d71002e">
font
size
style
</t>
<t tx="ekr.20050227071948.11" annotate="58f000000037643731303032383535303837303732363936663732363937343739373130313238363336313665366536663734363137343635306135343662353036393633366236633635353636313732306137313032366637313033346230323632353530343665366636343635373130353238363830323666373130363535303037313037363235353032363236373731303832383638303236663731303936383037363235353039363137323633363836353734373937303635373130613238363830323666373130623638303736323535303236363637373130633238363830323666373130643638303736323735326571002e"></t>
<t tx="ekr.20050227071948.12" annotate="58000100003764373130303238353530383730373236393666373236393734373937313031323836333631366536653666373436313734363530613534366235303639363336623663363535363631373230613731303236663731303334623634363235353034366536663634363537313035323836383032366637313036353530303731303736323535303236323637373130383238363830323666373130393535303635303735373237303663363537313061363235353039363137323633363836353734373937303635373130623238363830323666373130633638303736323535303236363637373130643238363830323666373130653638303736323735326571002e"></t>
<t tx="ekr.20050227071948.13" annotate="7d71005809000000617474656e74696f6e71014930300a732e"></t>
<t tx="ekr.20050227071948.15" annotate="5892000000376437313030323835353038373037323639366637323639373437393731303132383633363136653665366637343631373436353061353436623530363936333662366336353536363137323061373130323666373130333462363436323535303936313732363336383635373437393730363537313035323836383032366637313036353530303731303736323735326571002e"></t>
<t tx="ekr.20050227071948.16" annotate="58f000000037643731303032383535303837303732363936663732363937343739373130313238363336313665366536663734363137343635306135343662353036393633366236633635353636313732306137313032366637313033346236343632353530343665366636343635373130353238363830323666373130363535303037313037363235353032363236373731303832383638303236663731303936383037363235353039363137323633363836353734373937303635373130613238363830323666373130623638303736323535303236363637373130633238363830323666373130643638303736323735326571002e"></t>
<t tx="ekr.20050227071948.17" annotate="7d71002e">
Store semantics instead of colours.  Semantics then map to colours.


headline colours are reseted by the tree select and unselect methods.
maybe need to override them via the after (re)draw hook.


Offending Methods are all in leoTkinterTree.py
setNormalLabelState (self,v): # selected, editing
setDisabledLabelState (self,v): # selected, disabled
setUnselectedLabelState (self,v): # not selected.


</t>
<t tx="ekr.20050227071948.18" annotate="7d71005809000000617474656e74696f6e71014930300a732e">
Different coloured arrows for different priorities.

VeryHigh Red
High Orange
* Medium Green
Low Blue  (whatever)
Done  (tick)
</t>
<t tx="ekr.20050227071948.19" annotate="7d71005809000000617474656e74696f6e71014930300a732e">
archtetype based vnode attributes, not colour.
</t>
<t tx="ekr.20050227071948.2" annotate="7d71002e">
copy icons from freemind.

expandable box of icons at the head of a headline.
but manipulation vnode's iconx and icony positions.
vnode.computeIcon &amp; setIcon

icons in popup menus too ?

</t>
<t tx="ekr.20050227071948.20" annotate="7d71002e"></t>
<t tx="ekr.20050227071948.21" annotate="5892000000376437313030323835353038373037323639366637323639373437393731303132383633363136653665366637343631373436353061353436623530363936333662366336353536363137323061373130323666373130333462303236323535303936313732363336383635373437393730363537313035323836383032366637313036353530303731303736323735326571002e">
The colouring conflicts.
</t>
<t tx="ekr.20050227071948.22" annotate="7d71002e"></t>
<t tx="ekr.20050227071948.23" annotate="5804010000376437313030323835353038373037323639366637323639373437393731303132383633363136653665366637343631373436353061353436623530363936333662366336353536363137323061373130323666373130333464306632373632353530343665366636343635373130353238363830323666373130363535303734363635363137343735373236353731303736323535303236323637373130383238363830323666373130393535303037313061363235353039363137323633363836353734373937303635373130623238363830323666373130633638306136323535303236363637373130643238363830323666373130653638306136323735326571002e"></t>
<t tx="ekr.20050227071948.24" annotate="58f000000037643731303032383535303837303732363936663732363937343739373130313238363336313665366536663734363137343635306135343662353036393633366236633635353636313732306137313032366637313033346236343632353530343665366636343635373130353238363830323666373130363535303037313037363235353032363236373731303832383638303236663731303936383037363235353039363137323633363836353734373937303635373130613238363830323666373130623638303736323535303236363637373130633238363830323666373130643638303736323735326571002e">Not always predictable.

src/leoTkinterTree.py: menu.post(event.x_root, event.y_root)

</t>
<t tx="ekr.20050227071948.27" annotate="7d71002e">
# XXX merge: my model, coad &amp; de luca and holy trinity

# change colours: only foreground !
colour_table = {
    'interface': ["black", "OliveDrab2"],
    'logic':  ("black", "LightSkyBlue2"),
    'data':  ("black", "SandyBrown"),
    }

# Leo nodes.  Background hilite ?
Dead @ignore nodes + Documentat nodes  =&gt; Grey out
@File nodes, sub tree root

# Archetype Colouring

# Holy Trinity
Interface
Logic/Transform Centers/Functions
Data  =&gt; Description

# Coad and De Luca  --- Contrast against their meta-model
# It is a hiearchy going up from Description.
Description/Attributes/Data Catalog:  Purple
Party/Place/Thing:  Green
Role/Participation:  Yellow (Khaki or straw)
Moment/Interval/Event: Pink
Interface: White

# Me
Entity =&gt; Place or thing
  Core  =&gt;  Thing
  Interface =&gt;
  
Relationship (Loading and wiring code) =&gt; Moment(Init)
     =&gt; Special moment
     
* Interaction  =&gt; Moment/Interval + more !

# Unified : 5 Categories Max!!
Attributes, Data, Description, Lookup Tables.   =&gt; Brown
Entity Core, Place, Thing, Party    =&gt; Green
Logic, Pure Functions               =&gt; Blue
Role/Interface/Participation/Trait  =&gt; Straw/Khaki
Dynamic Stuff, Moment/Interaction   =&gt; Pinkish

</t>
<t tx="ekr.20050227071948.28" annotate="58060100003764373130303238353530383730373236393666373236393734373937313031323836333631366536653666373436313734363530613534366235303639363336623663363535363631373230613731303236663731303334643066323736323535303436653666363436353731303532383638303236663731303635353038343336663664366436353665373437333731303736323535303236323637373130383238363830323666373130393535303037313061363235353039363137323633363836353734373937303635373130623238363830323666373130633638306136323535303236363637373130643238363830323666373130653638306136323735326571002e">3. Various drawing hooks. I've restored the drawing hooks that used to exists.
These are so-called "stub" hooks. The entries of these hooks in leoDocs.leo and
leoPlugins.leo are as follows:
 
 tag argument keys in keywords
 (hook name) overrides when called dictionary argument
 --------- --------- ----------- -------------------
 ...
 "draw-outline-box" yes start of drawBox tree,p,v,x,y (note 6)
 "draw-outline-icon" yes start of tree.drawIcon tree,p,v,x,y (note 6)
 "draw-outline-node" yes start of tree.drawNode tree,p,v,x,y (note 6)
 "draw-outline-text-box" yes start of tree.drawText tree,p,v,x,y (note 6)
 "draw-sub-outline" yes start of tree.drawTree tree,p,v,x,y,h,level (note 6)
 ...
 
 These probably work exactly as the old hooks did, though I didn't use the old (4.0?) code as a base. The only change is the new p keyword argument. In all cases v = p.v. I probably should a p keyword argument to most other hooks, and I'm lazy...
 
 Warning: all these hooks "override" the existing code, which doesn't get executed if the hook returns anything except None. This means that the hook had better return what the "host" code returns, and this has changed recently to support user icons, and may change in the future as needed.
 
 For example, here is the code in drawNode
 
 data = g.doHook("draw-outline-node",tree=tree,p=p,v=v,x=x,y=y)
 if data is not None: return data
 
 At present, drawNode typically returns what return force_draw_node returns, which is a tuple (h,xw). This is needed to support icons of various sizes.
 
 In short, I'm not real sure how useful these hooks are going to be, or how stable.
 

</t>
<t tx="ekr.20050227071948.29" annotate="7d71002e">
add the colour menu to rclickhead1


 "draw-outline-box" yes start of drawBox tree,p,v,x,y (note 6)
    It works, but not sure when it is called.

 "draw-outline-icon" yes start of tree.drawIcon tree,p,v,x,y (note 6)
    The box obscures it.  If True is return, rlick wont work anymore.

 "draw-outline-node" yes start of tree.drawNode tree,p,v,x,y (note 6)
    This calls -icon and -box ?
 "draw-outline-text-box" yes start of tree.drawText tree,p,v,x,y (note 6)
    Does not obscure the box area !!

 "draw-sub-outline" yes start of tree.drawTree tree,p,v,x,y,h,level (note 6)
     Use this for head highlighting ? Probally called after the node is draw
     but before drawing the children.
yay ! they work with the CVS version.

@c

#registerHandler("draw-outline-box", draw0)
#registerHandler("draw-outline-node", draw0)
#registerHandler("draw-outline-text-box", draw0)

#registerHandler("iconrclick1",show_colour_menu)
</t>
<t tx="ekr.20050227071948.3" annotate="7d71002e">
There seems to be a colour selector in leo.
</t>
<t tx="ekr.20050227071948.4" annotate="58f000000037643731303032383535303837303732363936663732363937343739373130313238363336313665366536663734363137343635306135343662353036393633366236633635353636313732306137313032366637313033346236343632353530343665366636343635373130353238363830323666373130363535303037313037363235353032363236373731303832383638303236663731303936383037363235353039363137323633363836353734373937303635373130613238363830323666373130623638303736323535303236363637373130633238363830323666373130643638303736323735326571002e"></t>
<t tx="ekr.20050227071948.6" annotate="5892000000376437313030323835353038373037323639366637323639373437393731303132383633363136653665366637343631373436353061353436623530363936333662366336353536363137323061373130323666373130333462303136323535303936313732363336383635373437393730363537313035323836383032366637313036353530303731303736323735326571002e"></t>
<t tx="ekr.20050227071948.7" annotate="7d71002e"></t>
<t tx="ekr.20050227071948.8" annotate="7d71002e"></t>
<t tx="ekr.20050227071948.9" annotate="7d71002e"></t>
<t tx="ekr.20050227072121"></t>
<t tx="ekr.20050303051035">@

Note: the newButtons.py now has templates for the following plugin nodes.
    
- init: A generic init function.
- init(tk): An init function for a plugin that uses Tk (or Pmw).
- &lt;&lt; imports &gt;&gt;:  The &lt;&lt;imports&gt;&gt; section.
- &lt;&lt; version history &gt;&gt;: The &lt;&lt;version history&gt;&gt; section.</t>
<t tx="ekr.20050303051035.2">&lt;&lt; docstring &gt;&gt;

__version__ = '0.0'
&lt;&lt; version history &gt;&gt;

&lt;&lt; imports &gt;&gt;

@others</t>
<t tx="ekr.20050303051035.3">'''This docstring should be a clear, concise description of
what the plugin does and how to use it.
'''
</t>
<t tx="ekr.20050303051035.4">@killcolor
@

Put notes about each version here.</t>
<t tx="ekr.20050303051035.5">import leo.core.leoGlobals as g

Pmw = g.importExtension('Pmw',    pluginName=__name__,verbose=True,required=True)
Tk  = g.importExtension('Tkinter',pluginName=__name__,verbose=True,required=True)

# Whatever other imports your plugins uses.</t>
<t tx="ekr.20050303051101">def init ():
    
    if not (Pmw and Tk): return False
    
    if g.app.gui is None:
        g.app.createTkGui(__file__)
        
    ok = g.app.gui.guiName() == "tkinter"

    if ok:
        if 1: # Use this if you want to create the commander class before the frame is fully created.
            g.registerHandler('before-create-leo-frame',onCreate)
        else: # Use this if you want to create the commander class after the frame is fully created.
            g.registerHandler('after-create-leo-frame',onCreate)
        g.plugin_signon(__name__)
        
    return ok</t>
<t tx="ekr.20050303051150">def onCreate (tag, keys):
    
    c = keys.get('c')
    if not c: return
    
    thePluginController = pluginController(c)</t>
<t tx="ekr.20050303051222">class pluginController:
    
    @others</t>
<t tx="ekr.20050303051222.1">def __init__ (self,c):
    
    self.c = c
    # Warning: hook handlers must use keywords.get('c'), NOT self.c.</t>
<t tx="ekr.20050303080042"></t>
<t tx="ekr.20050303080042.1">[Main]

RefreshInterval = 60
ColdColour = blue
HotColour = red
HitsToHeatUp = 2
</t>
<t tx="ekr.20050303080236">@killcolor

- Crashes if .ini file does not exist.</t>
<t tx="ekr.20050306071540">def onStart2 (tag, keywords):
    
    """
    Showing how to define a global hook that affects all commanders.
    """

    import leo.core.leoTkinterFrame as leoTkinterFrame
    log = leoTkinterFrame.leoTkinterLog
    
    # Replace frame.put with newPut (not shown).
    g.funcToMethod(newPut,log,"put")</t>
<t tx="ekr.20050306071629">&lt;&lt; docstring &gt;&gt;

__version__ = '0.0'
&lt;&lt; version history &gt;&gt;

&lt;&lt; imports &gt;&gt;

@others</t>
<t tx="ekr.20050306071629.1">'''This docstring should be a clear, concise description of
what the plugin does and how to use it.
'''
</t>
<t tx="ekr.20050306071629.2">@killcolor
@

Put notes about each version here.</t>
<t tx="ekr.20050306071629.3">import leo.core.leoGlobals as g

# Whatever other imports your plugins uses.</t>
<t tx="ekr.20050306071629.4">def init ():
    
    ok = True # This might depend on imports, etc.
    
    if ok:
        g.registerHandler('start2',onStart2)
        g.plugin_signon(__name__)
        
    return ok</t>
<t tx="ekr.20050306072156">It is usually best _not_ to catch exceptions in plugins:
doHook catches all exceptions and disables further calls to plugins.

If a plugin catches exceptions during startup it should do one of the following:
    
- raise the exception again.
- provide an init function at the top level that reports the failure.</t>
<t tx="ekr.20050306081349"></t>
<t tx="ekr.20050328101812"> 
        
        
        </t>
<t tx="ekr.20050328101812.1"></t>
<t tx="ekr.20050328101812.2"></t>
<t tx="ekr.20050328101812.3"></t>
<t tx="ekr.20050329035844">def importLeoGlobals():

    '''
    Try to import leo.core.leoGlobals as leoGlobals from the leo/src directory, assuming that
    the script using this function is in a subdirectory of the leo directory.
    '''

    plugins_path = os.path.abspath(
        os.path.join(os.path.dirname(__file__),'..','src'))

    if plugins_path in sys.path:
        return None
    else:
        sys.path.append(plugins_path)
        try:
            import leo.core.leoGlobals as g
            return g
        except ImportError:
            g.pr('can not import leo.core.leoGlobals as leoGlobals from %s' % (plugins_path))
            return None</t>
<t tx="ekr.20050329080427">def setPaths(self):
    """Set paths to the plugin locations"""
    self.local_path = g.os_path_join(g.app.loadDir,"..","plugins")
    # self.remote_path = r"cvs.sourceforge.net/viewcvs.py/leo/leo/plugins"
    self.remote_path = r"cvs.sourceforge.net/viewcvs.py/leo/leo/plugins"


</t>
<t tx="ekr.20050329082101"></t>
<t tx="ekr.20050329082101.1">@nocolor</t>
<t tx="ekr.20050329082101.10">this is two !!!</t>
<t tx="ekr.20050329082101.100">This module provides access to some objects used or maintained by the
interpreter and to functions that interact strongly with the interpreter.

Dynamic objects:

argv -- command line arguments; argv[0] is the script pathname if known
path -- module search path; path[0] is the script directory, else ''
modules -- dictionary of loaded modules

displayhook -- called to show results in an interactive session
excepthook -- called to handle any uncaught exception other than SystemExit
  To customize printing in an interactive session or to install a custom
  top-level exception handler, assign other functions to replace these.

exitfunc -- if sys.exitfunc exists, this routine is called when Python exits
  Assigning to sys.exitfunc is deprecated; use the atexit module instead.

stdin -- standard input file object; used by raw_input() and input()
stdout -- standard output file object; used by the print statement
stderr -- standard error object; used for error messages
  By assigning other file objects (or objects that behave like files)
  to these, it is possible to redirect all of the interpreter's I/O.

last_type -- type of last uncaught exception
last_value -- value of last uncaught exception
last_traceback -- traceback of last uncaught exception
  These three are only available in an interactive session after a
  traceback has been printed.

exc_type -- type of exception currently being handled
exc_value -- value of exception currently being handled
exc_traceback -- traceback of exception currently being handled
  The function exc_info() should be used instead of these three,
  because it is thread-safe.

Static objects:

maxint -- the largest supported integer (the smallest is -maxint-1)
maxunicode -- the largest supported character
builtin_module_names -- tuple of module names built into this interpreter
version -- the version of this interpreter as a string
version_info -- version information as a tuple
hexversion -- version information encoded as a single integer
copyright -- copyright notice pertaining to this interpreter
platform -- platform identifier
executable -- pathname of this Python interpreter
prefix -- prefix used to find the Python library
exec_prefix -- prefix used to find the machine-specific Python library
dllhandle -- [Windows only] integer handle of the Python DLL
winver -- [Windows only] version number of the Python DLL
__stdin__ -- the original stdin; don't touch!
__stdout__ -- the original stdout; don't touch!
__stderr__ -- the original stderr; don't touch!
__displayhook__ -- the original displayhook; don't touch!
__excepthook__ -- the original excepthook; don't touch!

Functions:

displayhook() -- print an object to the screen, and save it in __builtin__._
excepthook() -- print an exception and its traceback to sys.stderr
exc_info() -- return thread-safe information about the current exception
exc_clear() -- clear the exception state for the current thread
exit() -- exit the interpreter by raising SystemExit
getdlopenflags() -- returns flags to be used for dlopen() calls
getrefcount() -- return the reference count for an object (plus one :-)
getrecursionlimit() -- return the max recursion depth for the interpreter
setcheckinterval() -- control how often the interpreter checks for events
setdlopenflags() -- set the flags to be used for dlopen() calls
setprofile() -- set the global profiling function
setrecursionlimit() -- set the max recursion depth for the interpreter
settrace() -- set the global debug tracing function
</t>
<t tx="ekr.20050329082101.101">
This package contains Docutils Writer modules.
</t>
<t tx="ekr.20050329082101.102"></t>
<t tx="ekr.20050329082101.103">Reads messages from a news server. Only does the last 10 as this is very slow ... it is only meant as an example. 

@auto-news &lt;news server name&gt;/&lt;news group name&gt;

</t>
<t tx="ekr.20050329082101.104">

Given some Python source, is there any tool which can tell the mimimum 
level of Python required to run that source? If I distribute some code, 
I need to be able to say which level of Python users require to run it.

-- 
Steve Toledo-Brown
Speaking for myself only.
Humans please use domain uk.ibm.com</t>
<t tx="ekr.20050329082101.105">

Disclaimer #1: I am a Python newbie, and I appreciate the vast
documentation at python.org -- some of which I expect has the answer to
my question if I can find it.

I am working on a custom computational fluid dynamics code.  I will
create one or more compiled Python modules in C/C++ to provide new
types and functions for manipulating those types.  I have a *lot* of
data.  Efficiency requires that the new data structures be shared
freely within the scope of the module, without directly exposing the
data to the standard Python runtime environment.

Stated another way, I need the data to persist in virtual memory across
seprate invocations of functions in the module(s) and to be accessible
only through methods explicitly provided by the module(s).

How can I do this?  What are some good examples to study?

Disclaimer #2: I am a aware that strong opinions exist about closing
off data from users.  But it's a requirement for this application.  I
don't like it, but I need the job!

Thanks for your time
CatManDo
</t>
<t tx="ekr.20050329082101.106">

Anand S Bisen wrote:
&gt; Hello
&gt; 
&gt; I have been developing a code that works pretty well on my python 2.3 
&gt; and now when i am running it on my server where it is programmed to run 
&gt; it's giving me errors. I have been using __contains__ method and it 
&gt; fails on python 2.2
&gt; 
&gt; For example
&gt; 
&gt; (Python 2.3)
&gt;  &gt;&gt; x="Hello World"
&gt;  &gt;&gt; print x.__contains__("Hello")
&gt; True
&gt; 
&gt; (Python 2.2)
&gt; 
&gt;  &gt;&gt;&gt; x="Hello world"
&gt;  &gt;&gt;&gt; print x.__contains__("Hello")
&gt; 
&gt; Traceback (most recent call last):
&gt;  File "&lt;stdin&gt;", line 1, in ?
&gt; TypeError: 'in &lt;string&gt;' requires character as left operand
&gt; 
&gt; 
&gt; Is there any woraround for this or what am i doing wrong in 2.2 ?
&gt; 
&gt; Thanks
&gt; 
Any use of double-underscores is an indication that magic is at work. In 
this case the __contains__ method is intended to be called by the 
interpreter when you write

     x in s

The __contains__ method was extended for strings in 2.3 so that 
construct could be used as a test to see whether s contained x as a 
substring. Before that, as the error message explains, it will only test 
to see whether a single character is contained in the string (by analogy 
with

     1 in [3, 4, 5, 2]

in case you are interested).

So you'll need to use the .find() string method and say

     if x.find("Hello") != -1:
         ... you found "Hello"

because your ISP appears to be using an older version of Python than you.

regards
  Steve
-- 
Meet the Python developers and your c.l.py favorites March 23-25
Come to PyCon DC 2005                      http://www.pycon.org/
Steve Holden                           http://www.holdenweb.com/</t>
<t tx="ekr.20050329082101.107">


"Zhang Le" &lt;sigu4wa02@sneakemail.com&gt; wrote in message 
news:1109952846.225378.136210@o13g2000cwo.googlegroups.com...
&gt; Hi,
&gt;  I did a small benchmark of matrix-vector multiply operation using
&gt; Numeric module. I'm a bit suprised to find matrix*col-vector is much
&gt; faster than row-vector*matrix. I wonder whether other people have
&gt; observed this fact too,

Yes, common knowledge in numerical analysis community.  Using the faster 
direction for a particular system as much as possible is part of tuning 
linear algebra software.

&gt; and why?

I presume that Numeric, like Python, stores matrices by row.  So M*v 
multiplies contiguous rows by a contiguous vector.  Multiplying a vector by 
non-contiguous columns requires requires skipping thru the matrix, which 
may require more computation and generate more cache misses and page 
faults.

Terry  J. Reedy


</t>
<t tx="ekr.20050329082101.108">

I just  in the 'What's New in Python 2.4' document that the None
data type was converted to a constant:
http://python.org/doc/2.4/whatsnew/node15.html

"""
# None is now a constant; code that binds a new value to the name
"None" is now a syntax error.
"""

So, what's the implications of this?  I find the lack of explanation a
little puzzling, since I've written code that compares a variable's
type with the 'None' type.  For example, a variable would be
initialized to 'None' and if it went through a loop unchanged, I could
determine this at the end by using a conditional type(var) ==
type(None).  What will type(None) return now?
</t>
<t tx="ekr.20050329082101.109">

On Fri, 4 Mar 2005 22:35:48 +0100, andrea_gavana@tin.it
&lt;andrea_gavana@tin.it&gt; wrote:
&gt; Hello NG,
&gt; 
&gt;     I was wondering if there is a way to obtain, from a list of floats,
&gt; a list of integers without loops. Probably is a basic question, but I can't
&gt; find an answer... I have had my eyes blinded by Matlab for years, but now
&gt; that I discovered Python+wxPython there seems to be no limit on what one
&gt; can do with these 2 tools. Anyway, following the Matlab style, I would like
&gt; to do something like this:
&gt; 
&gt; matrix = [1.5, 4.3, 5.5]
&gt; integer_matrix = int(matrix)       (float for Matlab)

You're going to have to use loops. I don't know how Matlab can do it
without them, unless it maintains the matrix as a list of floats and
simply *views* it as a list of ints. More likely, it simply hides the
loop away from you. Anyway, here's some ways to do it:

preferable: int_matrix = [int(x) for x in matrix]
old way: int_matrix = map(int, matrix)
explicit:
int_matrix = []
for x in matrix:
    int_matrix.append(int(x))

Any of these methods should be neither really slow nor really fast,
but the list comprehension should be the fastest (I think). Anyway, if
you're going to be doing lots of large matrices, and want some of your
old matlab stuff, check out numpy and numarray at
http://numeric.scipy.org/ .

Also, somebody was recently posting on here about a python &lt;-&gt; matlab
bridge that they developed; you should search the archives for that
(it was in february, I think).

And, finally, when doing scientific stuff, I found IPython
(http://ipython.scipy.org/) to be an invaluable tool. It's a much
improved Python interpreter.

Peace
Bill Mill
bill.mill at gmail.com

&gt; 
&gt; (In Matlab, "integer_matrix" is always a double anyway, here I would like
&gt; only to show the vector-matrix operation).
&gt; 
&gt; Obviously, Python complains about:
&gt; 
&gt; Traceback (most recent call last):
&gt;   File "&lt;interactive input&gt;", line 1, in ?
&gt; TypeError: int() argument must be a string or a number
&gt; 
&gt; I would like to avoid loops because, having been blinded by Matlab vector-matrix
&gt; abilities (and corresponding SLOW for-while loops operations), I tend to
&gt; think that also Python will be slow if I use loops.
&gt; 
&gt; Does anyone have a suggestion (or maybe could anyone show me that I'm wrong
&gt; about loops?)
&gt; 
&gt; Thanks you a lot.
&gt; 
&gt; Andrea.
&gt; 
&gt; --
&gt; http://mail.python.org/mailman/listinfo/python-list
&gt;</t>
<t tx="ekr.20050329082101.11">this is three</t>
<t tx="ekr.20050329082101.110">news-server.houston.rr.com/comp.lang.python</t>
<t tx="ekr.20050329082101.111">

This was happening to me for a while but stopped. I think it has to do with 
your mail server. Perhaps you could find another. If you are at a company, 
you might want to talk to your sysadmin and see if he can change the mail 
program. How did you get this latest message through? You know, with the 
proper email client you can have identities and such that have "from" and 
"return addresses" that are completely unrelated to the mail server you are 
using, if you would rather the mail list did not know about your most favored 
address.

James

On Friday 04 March 2005 01:56 pm, phil wrote:
&gt; everything I post to this list bounces awaiting moderator
&gt; approval, due to suspicious header.
&gt; COuld someone tell me what's wrong.  I'm on lots of list
&gt; with no problem.

-- 
James Stroud, Ph.D.
UCLA-DOE Institute for Genomics and Proteomics
Box 951570
Los Angeles, CA 90095</t>
<t tx="ekr.20050329082101.112">news-server.houston.rr.com/comp.lang.python</t>
<t tx="ekr.20050329082101.113">news-server.houston.rr.com/comp.lang.python</t>
<t tx="ekr.20050329082101.114"></t>
<t tx="ekr.20050329082101.12"></t>
<t tx="ekr.20050329082101.13"></t>
<t tx="ekr.20050329082101.14"></t>
<t tx="ekr.20050329082101.146"></t>
<t tx="ekr.20050329082101.15">Reads a remote news service.

@auto-rss &lt;url to news service&gt;

Requires feedparser installed:
    http://sourceforge.net/projects/feedparser/</t>
<t tx="ekr.20050329082101.16">title

summary_detail</t>
<t tx="ekr.20050329082101.2">The AutoTrees plugin is a helper plugin designed to make it very easy to write "hanlder" plugins to manage dynamic content in Leo outlines. 

AutoTrees provides 

- convenient handler base classes which can be specialized for particular uses
- a manager to turn handlers on and off
- a set of example handlers to show the kinds of things that are possible

AutoTrees doesn't do anything that you cannot do in other ways, but it does provide a consistent way of adding dynamic content. This means that individual plugin writers don't have to rewrite all the same kinds of code each time and also makes it easier to maintain Leo, since it standardizes the way that certain classes of plugin interact with the Leo core.

</t>
<t tx="ekr.20050329082101.3">I'm a plugin writer and I want to write a plugin to display dynamic content - ie content not directly contained in the .leo or derived files, eg

- email messages 
- news feeds
- news groups
- documentation
- remote files
- statistics
- file system data
- data base records

You can do this as a standard plugin, but as an AutoTrees handler you,

- don't need to write code that interacts with the tree (this is done for you)
- get centralized management
- can still do everything else you could as a normal plugin

</t>
<t tx="ekr.20050329082101.4">AutoTrees is itself a plugin. When it starts it,

1. Scans the leo\plugins\trees folder to find handlers
2. Activates specific handlers (this is managed via a plugin manager type window)
3. Waits for clicks and double-clicks on special nodes

To create an AutoTree node, you add a node with @auto-my_handler. The @auto tells the plugin to go and look for the "my_handler" handler, if it is enabled. The handler is then called and this is then used to populate the node body and child nodes below this node.

eg, for an @auto-rss node, the node headline is "@auto-rss http://myurl/news.xml". The handler goes to the URL mentioned and downloads the news stories. It then creates child nodes for each story and populates the bodies. 

The handler doesn't have to worry about interacting with the Leo tree view, it just returns a tree object. 

</t>
<t tx="ekr.20050329082101.40" annotate="7d71002e">title (slash_section, category)

summary_detail

link</t>
<t tx="ekr.20050329082101.5">The best way is to use the existing examples as templates. Look at the "test" handler first as this is the "Hello world" of trees.

</t>
<t tx="ekr.20050329082101.51">title (modified)

link</t>
<t tx="ekr.20050329082101.52">Python 2.4.1 (release candhttp://www.python.org/2.4.1/index.htmlate 1) (2005-03-10)

http://www.python.org/2.4.1/index.html</t>
<t tx="ekr.20050329082101.53">Greg Stein, of Google and Apache Software Foundation, to deliver keynote at PyCon (2005-03-06)

http://www.python.org/pycon/2005/keynotes.html</t>
<t tx="ekr.20050329082101.54">New RSS feed for python-dev summaries (2005-02-24)

http://www.python.org/dev/summary/channews.rdf</t>
<t tx="ekr.20050329082101.55">Guhttp://www.sdforum.org/SDForum/Templates/CalendarEvent.aspx?CID=1547&amp;mo=2&amp;yr=2005o van Rossum speaking in Palo Alto (2005-02-17)

http://www.sdforum.org/SDForum/Templates/CalendarEvent.aspx?CID=1547&amp;mo=2&amp;yr=2005</t>
<t tx="ekr.20050329082101.56">Python 2.3.5 (final) (2005-02-08)

http://www.python.org/2.3.5/index.html</t>
<t tx="ekr.20050329082101.57">Security advisory for SimpleXMLRPCServer.py. (2005-02-03)

http://python.org/security/PSF-2005-001/</t>
<t tx="ekr.20050329082101.58">Deadline for OSCON proposals (2005-02-01)

http://mail.python.org/pipermail/python-announce-list/2005-January/003683.html</t>
<t tx="ekr.20050329082101.59">PyCon abstracts now available (2005-01-23)

http://www.python.org/moin/PyConDC2005/Presentations</t>
<t tx="ekr.20050329082101.6" annotate="7d71002e">@nocolor</t>
<t tx="ekr.20050329082101.60">PyCon preliminary schedule now available (2005-01-20)

http://www.python.org/pycon/2005/schedule.html</t>
<t tx="ekr.20050329082101.61">PSF has awarded three grants (2004-12-30)

http://www.python.org/psf/grants/index.html</t>
<t tx="ekr.20050329082101.62">Python for Nokia Series 60 now available (2004-12-23)

http://www.forum.nokia.com/main/0,,034-821,00.html</t>
<t tx="ekr.20050329082101.63">Python 2.4 (final) (2004-11-30)

http://www.python.org/2.4/index.html</t>
<t tx="ekr.20050329082101.64">PyZine issue 7 (2004-11-23)

http://www.pyzine.com/Issue007/</t>
<t tx="ekr.20050329082101.65">PyCon 2005 Call for Proposals (2004-10-23)

http://www.python.org/pycon/2005/cfp.html</t>
<t tx="ekr.20050329082101.66">Cameron Laird receives the Frank Willison Award (2004-10-18)

http://press.oreilly.com/pub/pr/1237</t>
<t tx="ekr.20050329082101.67">Reads a remote file

@auto-remote &lt;url to file&gt;

Requires pyCurl:
    http://pycurl.sourceforge.net/</t>
<t tx="ekr.20050329082101.68">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;BBC - Error 404: Page not found&lt;/title&gt;
&lt;meta name="description" content="Error 404 - page not found" /&gt;
&lt;meta name="keywords" content="" /&gt;
&lt;meta name="created" content="20040506" /&gt;
&lt;meta name="updated" content="20040506" /&gt;
&lt;base href="http://www.bbc.co.uk" /&gt;
&lt;style&gt;
body {margin:0; padding:0;}
em {color:#900;}
p, ul {font-size:80%}
h4,h3,h2,h1,p, ul {font-family: verdana,arial,helvetica,sans-serif;}
h4,h3 {font-size:100%}
h4,h1 {margin:0}
div.main {padding:8px;margin:0px;width:770;}
form {margin:0;padding:0;}
&lt;/style&gt;
&lt;/head&gt;
&lt;body bgcolor="#ffffff" link="#333366" text="#000000" vlink="#333366" alink="#000000" marginheight="0" marginwidth="0"&gt;

&lt;!-- toolbar 1.4 toolbar.page 770 666666 --&gt;&lt;table width="100%" cellpadding="0" cellspacing="0" border="0"&gt;&lt;tr&gt;&lt;td colspan="2" style="background-color:#828282;" &gt;&lt;a name="top"&gt;&lt;img src="/f/t.gif" width="590" height="2" alt="" /&gt;&lt;/a&gt;&lt;/td&gt;&lt;td style="background-color:#828282;"&gt;&lt;img src="/f/t.gif" width="1" height="2" alt="" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;form action="http://www.bbc.co.uk/cgi-bin/search/results.pl"&gt;&lt;tr&gt;&lt;td style="border-left:2px solid #828282;background-color:#999999;" width="54"&gt;&lt;a href="http://www.bbc.co.uk/go/toolbar/-/"&gt;&lt;img src="/images/logo04.gif" width="50" height="20" alt="BBC" border="0" hspace="2" vspace="5" /&gt;&lt;/a&gt;&lt;/td&gt;&lt;td style="background:#999999;" align="right"&gt;&lt;table cellpadding="0" cellspacing="0" border="0" style="float:right;"&gt;&lt;tr&gt;&lt;td style="background:#999999;"&gt;&lt;font size="1"&gt;&lt;b&gt;&lt;a href="http://www.bbc.co.uk/go/toolbar/text/-/" style="color:#ffffff;text-decoration:none;font-family:verdana,arial,helvetica,sans-serif;padding:1px 4px;"&gt;Home&lt;/a&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;td style="background:#999999 url(/images/v.gif) repeat-y;" width="6"&gt;&lt;br /&gt;&lt;/td&gt;&lt;td&gt;&lt;font size="1"&gt;&lt;b&gt;&lt;a href="/go/toolbar/-/tv/" style="color:#ffffff;text-decoration:none;font-family:verdana,arial,helvetica,sans-serif;padding:1px 4px;"&gt;TV&lt;/a&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;td style="background:#999999 url(/images/v.gif) repeat-y;" width="6"&gt;&lt;br /&gt;&lt;/td&gt;&lt;td&gt;&lt;font size="1"&gt;&lt;b&gt;&lt;a href="/go/toolbar/-/radio/" style="color:#ffffff;text-decoration:none;font-family:verdana,arial,helvetica,sans-serif;padding:1px 4px;"&gt;Radio&lt;/a&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;td style="background:#999999 url(/images/v.gif) repeat-y;" width="6"&gt;&lt;br /&gt;&lt;/td&gt;&lt;td&gt;&lt;font size="1"&gt;&lt;b&gt;&lt;a href="/go/toolbar/-/talk/" style="color:#ffffff;text-decoration:none;font-family:verdana,arial,helvetica,sans-serif;padding:1px 4px;"&gt;Talk&lt;/a&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;td style="background:#999999 url(/images/v.gif) repeat-y;" width="6"&gt;&lt;br /&gt;&lt;/td&gt;&lt;td&gt;&lt;font size="1"&gt;&lt;b&gt;&lt;a href="/go/toolbar/-/whereilive/" style="color:#ffffff;text-decoration:none;font-family:verdana,arial,helvetica,sans-serif;padding:1px 4px;"&gt;Where&amp;nbsp;I&amp;nbsp;Live&lt;/a&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;td style="background:#999999 url(/images/v.gif) repeat-y;" width="6"&gt;&lt;br /&gt;&lt;/td&gt;&lt;td&gt;&lt;nobr&gt;&lt;font size="1"&gt;&lt;b&gt;&lt;a href="/go/toolbar/-/a-z/" style="color:#ffffff;text-decoration:none;font-family:verdana,arial,helvetica,sans-serif;padding:1px 4px;"&gt;A-Z&amp;nbsp;Index&lt;/a&gt;&lt;/b&gt;&lt;/font&gt;&lt;/nobr&gt;&lt;/td&gt;&lt;td style="background:#666666 url(/images/sl3.gif) no-repeat;" width="8"&gt;&lt;br /&gt;&lt;/td&gt;&lt;td style="background:#666666 url(/images/st.gif) repeat-x 0 0;"&gt;&lt;input type="text" id="bbcpageSearchbox" name="q" size="6" style="margin:3px 0 0;font-family:arial,helvetica,sans-serif;width:100px;" title="BBC Search" /&gt;&lt;/td&gt;&lt;td style="background:#666666 url(/images/st.gif) repeat-x;"&gt;&lt;input type="image" src="/images/srchb.gif" name="go" value="go" alt="Search" width="64" height="25" border="0" /&gt;&lt;/td&gt;&lt;td style="background:#999999 url(/images/sra.gif) no-repeat;" width="1"&gt;&lt;img src="/f/t.gif" width="1" height="30" alt="" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;td style="background:#999999 url(/images/srb.gif) no-repeat;"&gt;&lt;img src="/f/t.gif" width="1" height="1" alt="" /&gt;&lt;input type="hidden" name="uri" value="/news.html" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/form&gt;&lt;tr&gt;&lt;td colspan="2" style="background-color:#000000;"&gt;&lt;img src="/f/t.gif" width="770" height="1" alt="" /&gt;&lt;/td&gt;&lt;td width="100%" style="background-color:#000000;"&gt;&lt;img src="/f/t.gif" width="1" height="1" alt="" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;!-- end toolbar 1.4 --&gt;

&lt;table cellspacing="0" cellpadding="8" border="0" width="770" bgcolor="#cccccc"&gt;&lt;tr&gt;&lt;td width="335"&gt;&lt;font size="-2" face="arial,helvetica"&gt;TUESDAY&lt;br /&gt;29th March 2005&lt;br /&gt;&lt;a href="/cgi-bin/education/betsie/parser.pl"&gt;Text only&lt;/a&gt; &lt;/font&gt;&lt;/td&gt;&lt;td width="435"&gt;&lt;h1&gt;404&lt;/h1&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;div class="main"&gt;
&lt;div align="center"&gt;
&lt;h2&gt;Page not found&lt;/h2&gt;
&lt;p&gt;Unfortunately the following page was not available:&lt;br /&gt;
&lt;em&gt;http://www.bbc.co.uk/news.html&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3&gt;This might be because:&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;You may have typed the web address incorrectly. Please check the address and spelling ensuring that it does &lt;b&gt;not&lt;/b&gt; contain capital letters or spaces&lt;/li&gt;
&lt;li&gt;It is possible that the page you were looking for may have been moved, updated or deleted.&lt;/li&gt;&lt;/ul&gt;

&lt;h3&gt;Please try the following options instead:&lt;/h3&gt;

&lt;form action="/cgi-bin/search/results.pl"&gt;
&lt;table cellpadding="4" cellspacing="2" border="0" align="center" bgcolor="#000000"&gt;
&lt;tr&gt;&lt;td bgcolor="#99ccff"&gt;&lt;h4&gt;Search bbc.co.uk&lt;/h4&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td bgcolor="#ffffcc"&gt;&lt;input type="text" name="q" size="45" /&gt;&amp;nbsp;&lt;input type="submit" value="Go" /&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;

&lt;ul&gt;
&lt;li&gt;Return to the &lt;a href="/"&gt;bbc.co.uk Home Page&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Use our &lt;a href="/a-z/"&gt;site index&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;If you still encounter problems then please try the &lt;a href="/help/"&gt;help&lt;/a&gt; section.&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;!-- inc.footer.page --&gt;&lt;br clear="all" /&gt;&lt;table width="770" cellpadding="0" cellspacing="0" border="0"&gt;&lt;tr&gt;&lt;td width="110"&gt;&lt;img src="/furniture/tiny.gif" alt="" width="110" height="1"&gt;&lt;/td&gt;&lt;td width="10"&gt;&lt;img src="/furniture/tiny.gif" alt="" width="10" height="1"&gt;&lt;/td&gt;&lt;td align="center" width="100%"&gt;&lt;font face="arial, helvetica, sans-serif" size="1"&gt;&lt;a href="/terms/"&gt;Terms of Use&lt;/a&gt; | &lt;a href="/privacy/"&gt;Privacy&lt;/a&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;!-- end inc.footer.page --&gt;

&lt;/body&gt;
&lt;/html&gt;
</t>
<t tx="ekr.20050329082101.69">Produces documentation for a module

@auto-doc &lt;module name&gt;</t>
<t tx="ekr.20050329082101.7">Just some simple testing nodes</t>
<t tx="ekr.20050329082101.70"></t>
<t tx="ekr.20050329082101.71">Base class for Docutils components.</t>
<t tx="ekr.20050329082101.72"></t>
<t tx="ekr.20050329082101.73">tuple() -&gt; an empty tuple
tuple(sequence) -&gt; tuple initialized from sequence's items

If the argument is a tuple, the return value is the same object.</t>
<t tx="ekr.20050329082101.74">
        Is `format` supported by this component?

        To be used by transforms to ask the dependent component if it supports
        a certain input context or output format.
        </t>
<t tx="ekr.20050329082101.75"></t>
<t tx="ekr.20050329082101.76">No documentation for OPTCRE</t>
<t tx="ekr.20050329082101.77">No documentation for SECTCRE</t>
<t tx="ekr.20050329082101.78">Create a new section in the configuration.

        Raise DuplicateSectionError if a section by the specified name
        already exists.
        </t>
<t tx="ekr.20050329082101.79">tuple() -&gt; an empty tuple
tuple(sequence) -&gt; tuple initialized from sequence's items

If the argument is a tuple, the return value is the same object.</t>
<t tx="ekr.20050329082101.8" annotate="7d71002e"></t>
<t tx="ekr.20050329082101.80">dict() -&gt; new empty dictionary.
dict(mapping) -&gt; new dictionary initialized from a mapping object's
    (key, value) pairs.
dict(seq) -&gt; new dictionary initialized as if via:
    d = {}
    for k, v in seq:
        d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)</t>
<t tx="ekr.20050329082101.81">
    Parser for command-line and library use.  The `settings_spec`
    specification here and in other Docutils components are merged to build
    the set of command-line options and runtime settings for this process.

    Common settings (defined below) and component-specific settings must not
    conflict.  Short options are reserved for common settings, and components
    are restrict to using long options.
    </t>
<t tx="ekr.20050329082101.82">str(object) -&gt; string

Return a nice string representation of the object.
If the argument is a string, the return value is the same object.</t>
<t tx="ekr.20050329082101.83">tuple() -&gt; an empty tuple
tuple(sequence) -&gt; tuple initialized from sequence's items

If the argument is a tuple, the return value is the same object.</t>
<t tx="ekr.20050329082101.84">dict() -&gt; new empty dictionary.
dict(mapping) -&gt; new dictionary initialized from a mapping object's
    (key, value) pairs.
dict(seq) -&gt; new dictionary initialized as if via:
    d = {}
    for k, v in seq:
        d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)</t>
<t tx="ekr.20050329082101.85">tuple() -&gt; an empty tuple
tuple(sequence) -&gt; tuple initialized from sequence's items

If the argument is a tuple, the return value is the same object.</t>
<t tx="ekr.20050329082101.86">list() -&gt; new list
list(sequence) -&gt; new list initialized from sequence's items</t>
<t tx="ekr.20050329082101.87">list() -&gt; new list
list(sequence) -&gt; new list initialized from sequence's items</t>
<t tx="ekr.20050329082101.88">dict() -&gt; new empty dictionary.
dict(mapping) -&gt; new dictionary initialized from a mapping object's
    (key, value) pairs.
dict(seq) -&gt; new dictionary initialized as if via:
    d = {}
    for k, v in seq:
        d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
    in the keyword argument list.  For example:  dict(one=1, two=2)</t>
<t tx="ekr.20050329082101.89">str(object) -&gt; string

Return a nice string representation of the object.
If the argument is a string, the return value is the same object.</t>
<t tx="ekr.20050329082101.9">this is one</t>
<t tx="ekr.20050329082101.90">
    A facade encapsulating the high-level logic of a Docutils system.
    </t>
<t tx="ekr.20050329082101.91">str(object) -&gt; string

Return a nice string representation of the object.
If the argument is a string, the return value is the same object.</t>
<t tx="ekr.20050329082101.92">str(object) -&gt; string

Return a nice string representation of the object.
If the argument is a string, the return value is the same object.</t>
<t tx="ekr.20050329082101.93">
Command-line and common processing for Docutils front-end tools.

Exports the following classes:

- `OptionParser`: Standard Docutils command-line processing.
- `Values`: Runtime settings; objects are simple structs
  (``object.attribute``).
- `ConfigParser`: Standard Docutils config file processing.
</t>
<t tx="ekr.20050329082101.94">
I/O classes provide a uniform API for low-level input and output.  Subclasses
will exist for a variety of input/output mechanisms.
</t>
<t tx="ekr.20050329082101.95">
This package contains Docutils parser modules.
</t>
<t tx="ekr.20050329082101.96">
    Set up &amp; run a `Publisher`.  For command-line front ends.

    Parameters:

    - `reader`: A `docutils.readers.Reader` object.
    - `reader_name`: Name or alias of the Reader class to be instantiated if
      no `reader` supplied.
    - `parser`: A `docutils.parsers.Parser` object.
    - `parser_name`: Name or alias of the Parser class to be instantiated if
      no `parser` supplied.
    - `writer`: A `docutils.writers.Writer` object.
    - `writer_name`: Name or alias of the Writer class to be instantiated if
      no `writer` supplied.
    - `settings`: Runtime settings object.
    - `settings_spec`: Extra settings specification; a `docutils.SettingsSpec`
      subclass.  Used only if no `settings` specified.
    - `settings_overrides`: A dictionary containing program-specific overrides
      of component settings.
    - `enable_exit`: Boolean; enable exit status at end of processing?
    - `argv`: Command-line argument list to use instead of ``sys.argv[1:]``.
    - `usage`: Usage string, output if there's a problem parsing the command
      line.
    - `description`: Program description, output for the "--help" option
      (along with command-line option descriptions).
    </t>
<t tx="ekr.20050329082101.97">
    Set up &amp; run a `Publisher`.  For programmatic use with file-like I/O.

    Parameters:

    - `source`: A file-like object (must have "read" and "close" methods).
    - `source_path`: Path to the input file.  Opened if no `source` supplied.
      If neither `source` nor `source_path` are supplied, `sys.stdin` is used.
    - `destination`: A file-like object (must have "write" and "close"
      methods).
    - `destination_path`: Path to the input file.  Opened if no `destination`
      supplied.  If neither `destination` nor `destination_path` are supplied,
      `sys.stdout` is used.
    - `reader`: A `docutils.readers.Reader` object.
    - `reader_name`: Name or alias of the Reader class to be instantiated if
      no `reader` supplied.
    - `parser`: A `docutils.parsers.Parser` object.
    - `parser_name`: Name or alias of the Parser class to be instantiated if
      no `parser` supplied.
    - `writer`: A `docutils.writers.Writer` object.
    - `writer_name`: Name or alias of the Writer class to be instantiated if
      no `writer` supplied.
    - `settings`: Runtime settings object.
    - `settings_spec`: Extra settings specification; a `docutils.SettingsSpec`
      subclass.  Used only if no `settings` specified.
    - `settings_overrides`: A dictionary containing program-specific overrides
      of component settings.
    - `enable_exit`: Boolean; enable exit status at end of processing?
    </t>
<t tx="ekr.20050329082101.98">
    Set up &amp; run a `Publisher`, and return the string output.
    For programmatic use with string I/O.

    For encoded string output, be sure to set the "output_encoding" setting to
    the desired encoding.  Set it to "unicode" for unencoded Unicode string
    output.  Here's how::

        publish_string(..., settings_overrides={'output_encoding': 'unicode'})

    Similarly for Unicode string input (`source`)::

        publish_string(..., settings_overrides={'input_encoding': 'unicode'})

    Parameters:

    - `source`: An input string; required.  This can be an encoded 8-bit
      string (set the "input_encoding" setting to the correct encoding) or a
      Unicode string (set the "input_encoding" setting to "unicode").
    - `source_path`: Path to the file or object that produced `source`;
      optional.  Only used for diagnostic output.
    - `destination_path`: Path to the file or object which will receive the
      output; optional.  Used for determining relative paths (stylesheets,
      source links, etc.).
    - `reader`: A `docutils.readers.Reader` object.
    - `reader_name`: Name or alias of the Reader class to be instantiated if
      no `reader` supplied.
    - `parser`: A `docutils.parsers.Parser` object.
    - `parser_name`: Name or alias of the Parser class to be instantiated if
      no `parser` supplied.
    - `writer`: A `docutils.writers.Writer` object.
    - `writer_name`: Name or alias of the Writer class to be instantiated if
      no `writer` supplied.
    - `settings`: Runtime settings object.
    - `settings_spec`: Extra settings specification; a `docutils.SettingsSpec`
      subclass.  Used only if no `settings` specified.
    - `settings_overrides`: A dictionary containing program-specific overrides
      of component settings.
    - `enable_exit`: Boolean; enable exit status at end of processing?
    </t>
<t tx="ekr.20050329082101.99">
This package contains Docutils Reader modules.
</t>
<t tx="ekr.20050329092553">Hundreds die in Indonesia quake

Hundreds are believed to have died in Indonesia after a strong earthquake which sparked fears of a tsunami.</t>
<t tx="ekr.20050329092553.1">Ousted Kyrgyz preshttp://news.bbc.co.uk/1/hi/world/asia-pacific/4391139.stment defiant

Ousted Kyrgyz leader Askar Akayev says he remains the "sole legitimate preshttp://news.bbc.co.uk/1/hi/world/asia-pacific/4391139.stment" of his country.</t>
<t tx="ekr.20050329092553.10">Cricket: Series win for Aussies

Australia beat New Zealand by nine wickets in the third Test to wrap up a 2-0 series win.</t>
<t tx="ekr.20050329092553.11">Angola says virus 'under control'

Angola says an outbreak of the deadly Marburg virus is under control as DR Congo takes precautions.</t>
<t tx="ekr.20050329092553.12">Mugabe criticises MDC 'traitors'

Preshttp://news.bbc.co.uk/1/hi/world/africa/4391087.stment Mugabe condemns opposition supporters as traitors, as parliamentary elections draw near.</t>
<t tx="ekr.20050329092553.13">Ex-US diplomats round on Bolton

Dozens of former US diplomats urge Congress to block the appointment of John Bolton as UN ambassador.</t>
<t tx="ekr.20050329092553.14">Brazil quits loan accord with IMF

Brazil announces it will not renew a $41.75bn loan accord with the International Monetary Fund.</t>
<t tx="ekr.20050329092553.15">Japanese economy hit by weak data

An unexpected rise in Japan's jobless rate and falls in household spending and retail sales hit Japanese stocks.</t>
<t tx="ekr.20050329092553.16">Donors pledge $40m for KR trials

A UN-supported Khmer Rouge tribunal, due to try Cambodia's rulers from the 1970s, could open soon.</t>
<t tx="ekr.20050329092553.17">Three Romanians missing in Iraq

Three Romanian journalists are missing, feared khttp://news.bbc.co.uk/1/hi/world/middle_east/4389391.stmnapped, in Iraq after one called on a mobile.</t>
<t tx="ekr.20050329092553.18">Wolfowitz 'to meet EU officials'

Paul Wolfowitz, the US's controversial nomination to head the World Bank, is expected to meet with EU officials on Wednesday, reports say.</t>
<t tx="ekr.20050329092553.19">Knesset rejects Gaza referendum

Israel's parliament rejects an attempt by opponents of the planned Gaza pullout to force a referendum.</t>
<t tx="ekr.20050329092553.2">Hair 'good source of stem cells'

Scientists have found hair follicles are a plentiful source of stem cells, which can become body tissue.</t>
<t tx="ekr.20050329092553.20">Militants to attend PLO meeting

Islamic Jihad is to sit in on a meeting of the top Palestinian decision-making body for the first time.</t>
<t tx="ekr.20050329092553.21">South Asia cancels tsunami alerts

India and Sri Lanka withdraw the tsunami alerts issued after an earthquake hit the coast of Indonesia.</t>
<t tx="ekr.20050329092553.22">Devastation as Afghan dam bursts

A dam has burst in south-eastern Afghanistan killing at least six people and causing whttp://news.bbc.co.uk/1/hi/world/south_asia/4391251.stmespread devastation, officials say.</t>
<t tx="ekr.20050329092553.23">Kyrgyzstan's friendly revolution

The BBC's Ian MacWilliam reports from Kyrgyzstan on an unusual people's revolution.</t>
<t tx="ekr.20050329092553.24">Followup on MS and Brazil in NY Times (mainpage, microsoft)

putko was one of dozens to submit a story running on the NY Times about Open Source and Brazil. The choice quote is "We're not going to spend taxpayers' money on a program so that Microsoft can further consolhttp://slashdot.org/article.pl?sid=05/03/29/1359253&amp;from=rssate its monopoly..."

http://slashdot.org/article.pl?shttp://slashdot.org/article.pl?sid=05/03/29/1359253&amp;from=rss=05/03/29/1359253&amp;from=rss</t>
<t tx="ekr.20050329092553.25">A9.com with Syndicated Search (mainpage, internet)

joeykiller writes "Search Engine Watch reports that Amazon now lets you add your own search to their A9 search engine. Users can opt-in to use additional search engines in addition to A9.com's own when searching. Amazon has chosen to use an extension of RSS 2.0 for this, and hopes that this format will enable search syndication in the same way RSS dhttp://slashdot.org/article.pl?sid=05/03/29/1337250&amp;from=rss for content. Several add-on searches are available already, among them New York Times, Wikipedia and NASA."

http://slashdot.org/article.pl?shttp://slashdot.org/article.pl?sid=05/03/29/1337250&amp;from=rss=05/03/29/1337250&amp;from=rss</t>
<t tx="ekr.20050329092553.26">What's Next At Apple (apple, apple)

pinqkandi writes "Business 2.0 is running a fascinating article on what might be coming up in Apple's future. Beshttp://apple.slashdot.org/article.pl?sid=05/03/29/132202&amp;from=rsses speculation, some interesting statistics are included, such as how the iPod should create equal revenue to the Mac for Apple in 2006, if not surpassing it. A good read for the Apple lover or loather."

http://apple.slashdot.org/article.pl?shttp://apple.slashdot.org/article.pl?sid=05/03/29/132202&amp;from=rss=05/03/29/132202&amp;from=rss</t>
<t tx="ekr.20050329092553.27">Berkeley Grads' Identity Data Stolen (yro, privacy)

yali writes "Dhttp://yro.slashdot.org/article.pl?sid=05/03/29/036237&amp;from=rss you get a graduate degree from Berkeley? Or maybe you just applied but dhttp://yro.slashdot.org/article.pl?sid=05/03/29/036237&amp;from=rssn't go there? If so, your http://yro.slashdot.org/article.pl?sid=05/03/29/036237&amp;from=rssentity may have been stolen. A laptop was stolen containing names, social security numbers, birthdates, and addresses of grad students, alumni, and applicants. University police suspect that the thief just wanted the laptop, but the irony of California's mandatory notification law is that the thief may now know they have something even more valuable. Berkeley has set up a website with information on the breach."

http://yro.slashdot.org/article.pl?shttp://yro.slashdot.org/article.pl?sid=05/03/29/036237&amp;from=rss=05/03/29/036237&amp;from=rss</t>
<t tx="ekr.20050329092553.28">South Korean Gov't. Advocates Linux (linux, linuxbiz)

Anonymous Coward writes "Korea has now taken the plunge on the Linux operating system, and is now starting to advocate Linux for use in government and public sector applications. South Korea's Ministry of Information and Communications announced the move today, which will result in decreased Microsoft market share in the region." According to the article, Korea's Ministry of Information and Communication "will provhttp://linux.slashdot.org/article.pl?sid=05/03/29/0322248&amp;from=rsse a total of 3 billion won (US$2.95 million) for government agencies which want to use the Linux and other open-source computer programs this year."

http://linux.slashdot.org/article.pl?shttp://linux.slashdot.org/article.pl?sid=05/03/29/0322248&amp;from=rss=05/03/29/0322248&amp;from=rss</t>
<t tx="ekr.20050329092553.29">MS, EU Agree on Name for Windows Sans Media Player (mainpage, windows)

An anonymous reader writes "Microsoft has agreed with European Union antitrust regulators on a new name for Windows software sold in Europe. Officials at the U.S. software giant sahttp://slashdot.org/article.pl?sid=05/03/28/1951251&amp;from=rss they had accepted the European Union's offer to call the European version of Windows sold without Media Player "Windows XP Home Edition N" - with "N" standing for "not with media player." Microsoft's "XP Professional Edition" will also include the "N" for versions sold without the media player. The prior nme for the OS was Windows XP Reduced Media Edition." News.com also mentions the choice.

http://slashdot.org/article.pl?shttp://slashdot.org/article.pl?sid=05/03/28/1951251&amp;from=rss=05/03/28/1951251&amp;from=rss</t>
<t tx="ekr.20050329092553.3">Ashdown sacks top Bosnian Croat

The top administrator in Bosnia, Lord Ashdown, sacks the Croat member of Bosnia's joint preshttp://news.bbc.co.uk/1/hi/world/europe/4390635.stmency.</t>
<t tx="ekr.20050329092553.30">Blackbox (Finally) Updated (mainpage, gui)

mpeg4codec writes "OSNews reported earlier this month that the lightweight Blackbox window manager has been updated to 0.70. Among the new features are EWMH compliance, anti-aliased fonts, unicode support, and backwards compatibility with previous versions' styles. Of course, it brings you all these new features (well, some are optional) while retaining its small binary size, small memory footprint, and short list of dependencies. I for one think it's about time."

http://slashdot.org/article.pl?shttp://slashdot.org/article.pl?sid=05/03/29/0253245&amp;from=rss=05/03/29/0253245&amp;from=rss</t>
<t tx="ekr.20050329092553.31">Your Face On the Big Screen (mainpage, ent)

blamanj writes "In another case of SciFi becoming reality, you can now star in an animated film as your FutureCast (tm) face-scan is edited into the picture in real-time. John Brunner, in his Hugo-winning novel, Stand on Zanzibar predicted a similar development in television, lampooning people sitting at home while watching travologues of themselves 'on vacation.' Brunner, in addition to being an excellent writer, had some spot-on predictions of a virus-laden Internet in Shockwave Rhttp://slashdot.org/article.pl?sid=05/03/29/0123247&amp;from=rsser. Fortunately, the predictions of his eco-dystopia The Sheep Look Up have not come to pass. Yet."

http://slashdot.org/article.pl?shttp://slashdot.org/article.pl?sid=05/03/29/0123247&amp;from=rss=05/03/29/0123247&amp;from=rss</t>
<t tx="ekr.20050329092553.32">Ars Technica Builds Make Magazine's Steadicam (hardware, hardhack)

An anonymous reader writes "Make magazine has been out for a little over a month now and was given high marks in a Slashdot review. Ars Technica has taken their review one step further by building the $14 steadicam project and testing it out. (be sure to check out the QuickTime vhttp://hardware.slashdot.org/article.pl?sid=05/03/29/0056206&amp;from=rsseo at the end to see their results...)"

http://hardware.slashdot.org/article.pl?shttp://hardware.slashdot.org/article.pl?sid=05/03/29/0056206&amp;from=rss=05/03/29/0056206&amp;from=rss</t>
<t tx="ekr.20050329092553.33">New Photovoltaics Made with Titanium Foil (science, tech)

Memorize writes "A company called Daystartech has released a new type of photovoltaic cell which, unlike almost all the cells currently in use, does not silicon. This is based on a thin titanium film. Given the current shortage of solar-grade silicon, and all-time high oil prices, maybe titanium solar panels are here at the right time. The questions are, will they release it as a consumer solar product, and what will be the price per kilowatt hour?"

http://science.slashdot.org/article.pl?shttp://science.slashdot.org/article.pl?sid=05/03/28/2320211&amp;from=rss=05/03/28/2320211&amp;from=rss</t>
<t tx="ekr.20050329092553.4">Splits paralyse Iraqi parliament

Iraq's parliament reconvenes, but remains deadlocked over the formation of a new government.</t>
<t tx="ekr.20050329092553.5">Mongolians protest for new poll

Activists in Mongolia call for fresh elections, 
in an action apparently inspired by the situation in Kyrgyzstan.</t>
<t tx="ekr.20050329092553.6">Libya's Bulgarian medics appeal

Six medics appeal against the death sentence imposed in Libya for deliberately infecting children with HIV.</t>
<t tx="ekr.20050329092553.7">Schiavo rivals 'agree to autopsy'

Terri Schiavo's husband and parents seek to discover the extent of her brain-damage after her death.</t>
<t tx="ekr.20050329092553.8">Would-be sex tourist, 87, jailed

An octogenarian US man is jailed for 20 years for trying to travel to the Philippines for sex with young girls.</t>
<t tx="ekr.20050329092553.9">Golf: Funk claims Players title

Fred Funk's final-round 70 gives him victory in the lucrative Players Championship at Sawgrass.</t>
<t tx="ekr.20050402080206">@

This is LeoN-0.0.1 as created by Rodrigo Benenson, very slightly reorganized form.

An important project for Leo's long-term development.

See leo/doc/LeoN for important research papers that form the basis of this project.</t>
<t tx="ekr.20050402080206.1">@killcolor

Read the docustrings in the code.

Run the code LeoN.py to test it. 

You need to read sun98acheiving.pdf to understand what is all this stuff about.  This and other .pdf files are now in the leo/doc/LeoN folder.

Rodrigo Benenson. 2003. LeoN project. &lt;rodrigob@elo.utfsm.cl&gt;</t>
<t tx="ekr.20050402080206.2">@language plain

LeoN is Leo over the Network.

LeoN is Collaborative Leo.

Leo is http://leo.sf.net

@language plain

Leo over network requirements
-----------------------------

This is my rsum of the Requirements and design issues for Leo over the Network. (LeoN).

First in sake of simplicity a N-clients/One server architecture is imposed, being much more easy to design and implement.
Also it's required that the code could be as most Plugin as possible and as most python Modules independent as possible (one and only one instalation required).

Now, the list presented approximately in the logic order of implementation:

&lt;Step one, Merging&gt;

&lt;Step two, Publishing&gt;

&lt;Step three, Interacting by turns&gt;

&lt;&lt;Step four, Realtime interaction&gt;&gt;

Please comment this document.

RodrigoB. </t>
<t tx="ekr.20050402080206.3">Step four, "Realtime interaction":
- There should be a way that multiple online users edit on realtime the same Node.
This is the final step and is truly difficult. Probably this code should be merged from a parallel (but related) project.
(Guy X,Y,Z having a code party.)

- The client should show the editors cursors and edition on realtime.
Adquire the status, of Hydra Open Source, Multiplatform, Clone.
(Guy X,Y,Z enjoying the code party.)

Some features were intentionally omited:
- Versioning system. (there exists better solutions)
- Voice chat. (there exists parallel solutions)


</t>
<t tx="ekr.20050402080206.4">The realtime edition  could be implemented initially on a lock/unlock fashion automatized on a per line basis, very much like an online CVS editor...

The complications should be left to a parallel project, or maybe to another community (search, propose and merge/translate)

@nocolor</t>
<t tx="ekr.20050402080206.5">29/06/03

Hi!

It's time to news again. This last weeks were my final exams weeks but LeoN devellopment is going on as planned.

The last two weeks where focused on the Gui control, intercepting the whole list of actions that the user can do into the collaborative outline. There still some importants events to manage, but I think almost the base code is there. As mentioned this stage is absolutelly non trivial nor little; and is characterised to be some how frustating ("Tk marks are before or bellow a charater? Event occurs before or after effects?", and similars) and slow (because you have to test by hand the gui to debug it). The important elements missing will be done at the time it becomes strictly necessary.


The LeoN code is already pretty big and relativelly complex (3500 raw lines count) and there is a big list of things to do. Anyway no one said it would be easy.
Somes days ago I drafted the code base for Step4, hopefully the more important piece of code, due of it reusability and because I think it will give to LeoN an important sparky effect (near realtime multiuser text edition).


So now the actual plan is:
- Focus the next two weeks on the implementation of Step4 and his unit tests.
- Release the Step4 code. (because it is usefull without Leo and could be used in parallel projects)
- Integrate Step4 and Step(2,3) (one week)
- Move the code over Leo 3.1x  and Twisted 1.0.6 (which unfortunelly changed some classes used in LeoN (cred module)) (horizont: one week)
- After that I will focus strictly on finishing the usability elements and (if everything go fine) will start the releases iterations. This stage will have at least the following milestones:
	- Finish and debug the interface hooks (this can be long...)
	- Implement server persistence (should be easy)
	- Implement the admin interface (should be boring)
	- Implement Clones (two weeks if things go fine)
	- Improve the LeoN web views (implement more than one view  model?)
	- Allow as easy as possible instalations

Of course the releases will be all alpha during a probably long period until the devellopers are happy and then we will switch to beta and when everyone will be happy : the first stable Release !

I'm pretty impacient to finish the vapourware status of LeoN, we have the luck that the timing are acceptable, and Leo has some importants things to do before LeoN will become the first priority. This will give me the time to work on the mentioned plan.

RodrigoB.</t>
<t tx="ekr.20050402080206.6">As said, it is times to news. Briefly.

about step4
-----------

The code is ready and running since wednesday (mercredi) on the morning, but until now I'm  grumbling-grumbling with the code to get it working as supposed; I have found some minor bugs and solved some conceptuals problems and bugs. Debugging code of someelse algorithm is notoriously harder than working on your own ideas but the work give his fruits and each day we are one step nearer to us dreams.
Most of the hard problems are due to some ambiguities or not so clear ideas in the papers, so I have to crunch my brain to guess the correct way to manage the presented abstractions (or apply a 'guess, try, evaluate' strategy).

Due to this problems, and after five days of debugging work I will delay the code release until I get the unit test passed, this should not take more than a week more (I hope so, but you never know if the actual bug is or not the last one).


what is next
------------

- Finish debug of step4
- Implement and test the one server various clients collaborative editing (a special case of the above class)
- move codebase to 3.12b* and twisted 1.0.6
- merge step2, step3, step4 
- start the release of the code snapshots.
- start working on last frozen elements and on the Todo List:
	- hooks installations and debug (starting by node renaming)
	- admin interface
	- server side persistence 
	- clone support
	- cut and paste (with download interface)
	- better web server views
	- design a web plugin system ?
	- debugging, debugging
	- as easy as possible instalations
	- work on the design of LeoN2 features

I will stay working on a two weeks devellopment cycles, and post news at the end of each cycle.


RodrigoB.</t>
<t tx="ekr.20050402080206.7">@nocolor

25/06/03 Copying of the main algorithms into the code. RodrigoB.
01/07/03 Programming. RodrigoB.
02/07/03 Programming. RodrigoB.
05/07/03 Reading about the garbage collector stuff. RodrigoB.
07/07/03 Programming. RodrigoB.
08/07/03 Programming, operations herit from dict, support splitted ops, working on tests, syntax debugging. RodrigoB.
09/07/03 Implementing operations relations, starting debug iterations based on unittests.
		 Added another parameters form for receive_operation. RodrigoB.
10/07/03 Debugging conceptual aspects; management of timestamps on transformed operations. minor bugs fixed. Splitted special cases appears.RodrigoB.
12/07/03 Searching bugs. bugfixes. RodrigoB.
13/07/03 Implementing the garbage collector. Searching bugs. bugfixes. Testing garbage collector. RA problems. RodrigoB.
14/07/03 (vive la France!) Testing an idea (__eq__). Little edit to the root docustring. RodrigoB.
15/07/03 Hunting the Last Bug. Eureka. First successful execution. Code cleanup. Using unittest module. Release 1. RodrigoB.

Todo

- Find a good TestConcurrentEditable2 to test LostInformation cases

- LI is absolutelly not verified
- Find the Recover_LI specifications.
- Find a better way to quit the ambiguities on the 'if else {}' operation pertenence. (save_RA, save_LI conditions ?)

- collect garbage do not work anymore exactly like in the example. (is this a problem ?)

- Implement ConcurrentEditableServer
- Implement the  client-server tests

- Debug.

@color
@language python

</t>
<t tx="ekr.20050724100334">c.prettyPrintPythonNode()</t>
<t tx="ekr.20050817132814">@nocolor

Important: the rst3 plugin has largely been superceded by similar
commands built into Leo's core.

To activate the rst3 plugin, do the following:

1. Go to http://silvercity.sourceforge.net/.
- Follow the link 'SilverCity Releases'.
- Download the release that fits to your Python version.
- Double-klick on the downloaded file.

2. Go to http://docutils.sourceforge.net/.
- Have a look for item 'Download'
- Get, as the editor says, the latest snapshot by following the link
  'docutils-snapshot.tgz'.
- Make sure you have a application that can handle this format. 7zip is doing this great.
- Unpack it to a temporary folder.
- Open a console window, go to the temporary folder and type 'setup.py install'
  or '&lt;path_to_python.exe&gt;\python setup.py install'.

3. Start up Leo
- Check in the menu 'Edit' for item 'Write-Restructured-Text'.

@color</t>
<t tx="ekr.20050819055746">c.save()</t>
<t tx="ekr.20051025144116">c.spellCommands.openSpellTab()</t>
<t tx="ekr.20060107092833"></t>
<t tx="ekr.20060107092833.1"># New in version 0.20

def __init__ (self,c):

    self.c = c</t>
<t tx="ekr.20060109114710">c.openLeoSettings()</t>
<t tx="ekr.20060110125615"></t>
<t tx="ekr.20060513122450.100">def __init__(self,cc):

    self.cc = cc
    ConfigClass.PageClass.__init__(self,cc,"Compiler")
</t>
<t tx="ekr.20060513122450.101">def Browse(self):

    for o in self.Objects:
        if o and o.Name == "Compiler":
            break
    else: return

    ft = ('Executables', '.exe;.bin'),
    s = tkFileDialog.askopenfilename(filetypes=ft,title="Locate Compiler...")
    if s == None:
        return Error("xcc: ","Action canceled by user!")
    elif s == "":
        return Error("xcc: ","Empty path returned!")

    e.Set(os.path.normpath(s))
</t>
<t tx="ekr.20060513122450.102">def AddPath(self,name):
    d = tkFileDialog.askdirectory()
    if d != "":
        d = d.replace("/","\\")
        for o in self.Objects:
            if o.Name == name:
                opaths = o.Get().splitlines()
                npaths = []

                for p in opaths:
                    p = p.strip()
                    if p != "":
                        npaths.append(p)

                npaths.append(d)

                o.Set(string.join(npaths,"\n"))
</t>
<t tx="ekr.20060513122450.103">def CreateObjects(self,master): #must overide

    @others



</t>
<t tx="ekr.20060513122450.104">x=10
y=10
text_w = 350
text_h = 80

# compiler entry -
self.AddObject(self.ENTRY(master,"Compiler",x=5,y=5,w=350,h=20))
b = Tk.Button(master,text=" ...",command=self.Browse)
master.create_window(360,self.Y-2,anchor='nw',window=b)
</t>
<t tx="ekr.20060513122450.105">self.AddSep()
#-------------------------------------------------

t1 = self.TEXT(master,"Arguments",x=5,y=self.H,vs=True)
self.HELP(master,boxtitle="Arguments info",msg=CplArgumentsHelp,x=360,y=self.H+20)
self.AddObject(t1)

#------------------------------------------
t1 = self.TEXT(master,"Debug arguments",x=5,y=self.H,vs=True)
self.HELP(master,boxtitle="Debug arguments info",msg=CplDebugArgumentsHelp,x=360,y=self.H+20)
self.AddObject(t1)
</t>
<t tx="ekr.20060513122450.106">self.AddSep()
#-------------------------------------------------------------
b = Tk.Button(master,text="Browse",command=lambda:self.AddPath("Include search paths"))
master.create_window(360,self.H+58,anchor='nw',window=b)
t1 = self.TEXT(master,"Include search paths",x=5,y=self.H)
self.HELP(master,boxtitle="Include search paths info",msg=IncludeSearchPathsHelp,x=360,y=self.H+20)
self.AddObject(t1)

#-------------------------------------------------------------
b = Tk.Button(master,text="Browse",command=lambda:self.AddPath("Library search paths"))
master.create_window(360,self.H+58,anchor='nw',window=b)
t1 = self.TEXT(master,"Library search paths",x=5,y=self.H)
self.HELP(master,boxtitle="Library search paths info",msg=LibrarySearchPathsHelp,x=360,y=self.H+20)
self.AddObject(t1)

#-------------------------------------------------------------
t1 = self.TEXT(master,"Used libraries",x=5,y=self.H)
self.HELP(master,boxtitle="Used libraries info",msg=UsedLibrariesHelp,x=360,y=self.H+20)
self.AddObject(t1)
</t>
<t tx="ekr.20060513122450.107">ww =19
self.AddSep()
#------------------------------------------------------
lf = Tk.Frame(master,relief='flat',bd=2)
master.create_window(self.X,self.H+2,width=text_w,height=20,anchor='nw',window=lf)
Tk.Label(lf,text="Compiler symbols:").pack(side="left")
self.H += 22

self.HELP(master,boxtitle="Include path and Library path info",msg=IncludePathAndLibraryPathHelp,x=360,y=self.H)
#Include path
e1 = self.ENTRY(master,"Include path",x=5,y=self.H)
#Library path
e2 = self.ENTRY(master,"Library path",x=180,y=self.H)
self.AddObject(e1)
self.AddObject(e2)

self.HELP(master,boxtitle="Use library and Check syntaxe info",msg=UseLibraryAndCheckSyntaxeHelp,x=360,y=self.H)
#Use library
e1 = self.ENTRY(master,"Use library",x=5,y=self.H)
#Check syntaxe
e2 = self.ENTRY(master,"Check syntaxe",x=180,y=self.H)
self.AddObject(e1)
self.AddObject(e2)

self.HELP(master,boxtitle="Build exe and Build dll info",msg=BuildExeAndBuildDllHelp,x=360,y=self.H)
#Build exe
e1 = self.ENTRY(master,"Build exe",x=5,y=self.H)
#Build dll
e2 = self.ENTRY(master,"Build dll",x=180,y=self.H)
self.AddObject(e1)
self.AddObject(e2)

self.HELP(master,boxtitle="Compile pch and Use pch info",msg=CompilePchAndUsePchHelp,x=360,y=self.H)
#Compile pch
e1 = self.ENTRY(master,"Compile pch",x=5,y=self.H)
#Use pch
e2 = self.ENTRY(master,"Use pch",x=180,y=self.H)
self.AddObject(e1)
self.AddObject(e2)
</t>
<t tx="ekr.20060513122450.108"># ------------------
self.AddSep()
e = self.ENTRY(master,"Error detection",x=5,y=self.H,w=350,re=True)
self.HELP(master,boxtitle="Error detection info",msg=CplArgumentsHelp,x=360,y=self.H)
self.AddObject(e)
</t>
<t tx="ekr.20060513122450.109">class DbgPageClass(PageClass):
    @others
</t>
<t tx="ekr.20060513122450.110">def __init__(self,cc):

    self.cc = cc
    ConfigClass.PageClass.__init__(self,cc,"Debugger")
</t>
<t tx="ekr.20060513122450.111">def Browse(self):

    for o in self.Objects:
        if o != None and o.Name == "Debugger":
            break
    else: return

    ft = ('Executables', '.exe;.bin'),
    s = tkFileDialog.askopenfilename(filetypes=ft,title="Locate Debugger...")

    if s == None:
        return Error("xcc: ","Action canceled by user!")
    elif s == "":
        return Error("xcc: ","Empty path returned!")

    e.Set(os.path.normpath(s))
</t>
<t tx="ekr.20060513122450.112">def CreateObjects(self,master):#must overide
    @others
</t>
<t tx="ekr.20060513122450.113">x=10
y=10
text_w = 350
text_h = 80

# compiler entry
self.AddObject(self.ENTRY(master,"Debugger",x=5,y=5,w=350,h=20))
b = Tk.Button(master,text=" ...",command=self.Browse)
master.create_window(360,self.Y-2,anchor='nw',window=b)	
</t>
<t tx="ekr.20060513122450.114">self.AddSep()
t1 = self.TEXT(master,"Arguments",x=5,y=self.H,vs=True)
self.HELP(master,boxtitle="Arguments info",msg=DbgArgumentsHelp,x=360,y=self.H+20)
self.AddObject(t1)
</t>
<t tx="ekr.20060513122450.115">self.AddSep()
e1 = self.ENTRY(master,"Prompt pattern",x=5,y=self.H,re=True) 
e2 = self.ENTRY(master,"Pipe eol",x=180,y=self.H)

self.HELP(master,boxtitle="Prompt pattern and Pipe eol info",msg=DbgPipingHelp,x=360,y=self.H)
self.AddObject(e1)
self.AddObject(e2)
</t>
<t tx="ekr.20060513122450.116">ww =19

self.AddSep()

lf = Tk.Frame(master,relief='flat',bd=2)
master.create_window(5,self.H+2,width=text_w,height=20,anchor='nw',window=lf)
Tk.Label(lf,text="Debugger commands symbols:").pack(side="left")
self.H += 22

# ------------------
e1 = self.ENTRY(master,"Go",x=5,y=self.H)
e2 = self.ENTRY(master,"Step in",x=180,y=self.H)
self.AddObject(e1)
self.AddObject(e2)

# ------------------
e1 = self.ENTRY(master,"Continue",x=5,y=self.H)
e2 = self.ENTRY(master,"Step over",x=180,y=self.H)
self.AddObject(e1)
self.AddObject(e2)

# ------------------
e1 = self.ENTRY(master,"Stop",x=5,y=self.H)
e2 = self.ENTRY(master,"Step out",x=180,y=self.H)
self.AddObject(e1)
self.AddObject(e2)

# ------------------
e1 = self.ENTRY(master,"Evaluate",x=5,y=self.H)
self.AddObject(e1)
</t>
<t tx="ekr.20060513122450.117">#------------------------------------------------------
self.AddSep()
t1 = self.TEXT(master,"Startup task",x=5,y=self.H,vs=True)

self.HELP(master,boxtitle="Startup task info",msg=DbgStartupTaskHelp,x=360,y=self.H+20)

self.AddObject(t1)
</t>
<t tx="ekr.20060513122450.118"># ------------------
self.AddSep()
e = self.ENTRY(master,"Target pid task",x=5,y=self.H,w=350,vs=True)

self.HELP(master,boxtitle="Target pid task and Find pid info",msg=DbgTargetPidHelp,x=360,y=self.H)
self.AddObject(e)

e = self.ENTRY(master,"Find pid",x=5,y=self.H,w=350,re=True,vs=True)
self.AddObject(e)
</t>
<t tx="ekr.20060513122450.119">#------------------------------------------------------
self.AddSep()
self.HELP(master,boxtitle="Break detection info",msg=DbgBreakDetectionHelp,x=360,y=self.H+20)
self.AddObject(self.TEXT(master,"Break detection",x=5,y=self.H,w=text_w,h=text_h,re=True))

self.AddSep()
e1 = self.ENTRY(master,"Set break",x=5,y=self.H,vs=True)
e2 = self.ENTRY(master,"Clear break",x=180,y=self.H,vs=True)
self.HELP(master,boxtitle="Set break and Clear break info",msg=DbgSetClearBreakHelp,x=360,y=self.H)
self.AddObject(e1)
self.AddObject(e2)

self.AddSep()
self.HELP(master,boxtitle="List breaks and Identify break info",msg=DbgBreakIdHelp,x=360,y=self.H)
self.AddObject(self.ENTRY(master,"List breaks",x=5,y=self.H,w=350))
e = self.ENTRY(master,"Identify break",x=5,y=self.H,w=350,re=True)
self.AddObject(e)

# ------------------
self.AddSep()
self.HELP(master,boxtitle="Query location and Find location info",msg=DbgLocationHelp,x=360,y=self.H)
self.AddObject(self.ENTRY(master,"Query location",x=5,y=self.H,w=350))
e = self.ENTRY(master,"Find location",x=5,y=self.H,w=350,re=True,vs=True)
self.AddObject(e)
</t>
<t tx="ekr.20060513122450.120">#-------------------------------------------------------------
self.AddSep()
t1 = self.TEXT(master,"Regular expression",x=4,y=self.H,w=173,re=True,vs=True)
t2 = self.TEXT(master,"Task",x=180,y=self.H,w=173,vs=True)
self.HELP(master,boxtitle="Regular expression and Task info",msg=DbgMiscExpHelp,x=360,y=self.H+20)
self.AddObject(t1)
self.AddObject(t2)
</t>
<t tx="ekr.20060513122450.121">class ExePageClass(PageClass):
    @others
</t>
<t tx="ekr.20060513122450.122">def __init__(self,cc):

    self.cc = cc
    ConfigClass.PageClass.__init__(self,cc,"Executable")
</t>
<t tx="ekr.20060513122450.123">def CreateObjects(self,master):#must overide
    bd=self["background"]
    x=10
    y=10
    text_w = 350
    text_h = 80
    @others
    self.create_line(0,self.H+5,self.W+1,self.H+5)
</t>
<t tx="ekr.20060513122450.124">self.AddObject(self.TEXT(master,"Execution arguments",x=5,y=5))
</t>
<t tx="ekr.20060513122450.125">self.AddSep()
e1 = self.ENTRY(master,"Dll caller",x=5,y=self.H,w=280,h=20)
b = Tk.Button(master,text="Browse...",width=10,default='disabled')
master.create_window(self.X+285,self.H,width=60,height=20,anchor='nw',window=b)
self.AddObject(e1)
</t>
<t tx="ekr.20060513122450.126">class CodePageClass(PageClass):
    @others
</t>
<t tx="ekr.20060513122450.127">def __init__(self,cc):

    self.cc = cc
    ConfigClass.PageClass.__init__(self,"Code")
</t>
<t tx="ekr.20060513122450.128">def CreateObjects(self,master):#must overide
    bd=self["background"]
    x=10
    y=10
    text_w = 350
    text_h = 80
    @others
    self.AddSep()
</t>
<t tx="ekr.20060513122450.129">self.AddObject(self.TEXT(master,"File header",x=5,y=5,w=350,h=80))
self.AddSep()
self.AddObject(self.ENTRY(master,"Class opening",x=5,y=self.H,w=350,h=20))
self.AddObject(self.ENTRY(master,"Class closing",x=5,y=self.H,w=350,h=20))
self.AddObject(self.ENTRY(master,"Class header",x=5,y=self.H,w=350,h=20))
self.AddObject(self.ENTRY(master,"Class footer",x=5,y=self.H,w=350,h=20))
self.AddSep()
self.AddObject(self.ENTRY(master,"Function header",x=5,y=self.H,w=350,h=20))
self.AddObject(self.ENTRY(master,"Function footer",x=5,y=self.H,w=350,h=20))
self.AddObject(self.ENTRY(master,"Function opening",x=5,y=self.H,w=350,h=20))
self.AddObject(self.ENTRY(master,"Function closing",x=5,y=self.H,w=350,h=20))
self.AddSep()
self.AddObject(self.TEXT(master,"File footer",x=5,y=self.H,w=350,h=80))
</t>
<t tx="ekr.20060513122450.295"></t>
<t tx="ekr.20060513122450.296">def sGatherInfo(self):

    cc = self

    g.trace(cc.SELECTED_NODE)

    if cc.SELECTED_NODE:
        cc.sExtractHeadInfo()

        @others

        cc.VERBOSE = cc.OPTS.get("Xcc verbose")
        cc.FILTER_OUTPUT = cc.OPTS.get("Filter output")
        return True

    return False
</t>
<t tx="ekr.20060513122450.297">cc.NAME = cc.sGet("NAME")
cc.EXT = cc.sGet("EXT")
cc.REL_PATH = cc.sGet("REL_PATH")
cc.ABS_PATH = cc.sGet("ABS_PATH")
cc.CWD = os.getcwd()

if not cc.NAME:
    return Error("xcc: ","Node have no name!")
</t>
<t tx="ekr.20060513122450.298">cc.OPTS = cc.sGet("Options")
cc.CPL = cc.sGet("Compiler")
cc.DBG = cc.sGet("Debugger")
cc.EXE = cc.sGet("Executable")
</t>
<t tx="ekr.20060513122450.299">cc.CREATE_FILES = cc.OPTS.get("Create files")

if cc.CREATE_FILES:

    if cc.REL_PATH and os.access(cc.REL_PATH,os.F_OK) != 1:
        os.makedirs(cc.REL_PATH)

    if cc.EXT == "h": cc.SRC_EXT = cc.EXT

    if cc.EXT == "exe": cc.SRC_EXT = "cpp"

    if cc.EXT == "cpp" or cc.EXT == "c":
        cc.SRC_EXT = cc.EXT

    if cc.EXT == "dll": cc.SRC_EXT = "cpp"
</t>
<t tx="ekr.20060513122450.300">cc.COMPILE = cc.OPTS.get("Compile")

if cc.COMPILE:
    cc.COMPILER = cc.CPL.get("Compiler")
    if not cc.COMPILER:
        return Error("xcc: ","Compiler is undefined!")
</t>
<t tx="ekr.20060513122450.301">cc.EXECUTE = cc.OPTS.get("Execute")
</t>
<t tx="ekr.20060513122450.302">cc.DEBUG = cc.OPTS.get("Debug")

if cc.DEBUG:
    cc.DEBUGGER = cc.DBG.get("Debugger")
    if not cc.DEBUGGER:
        return Error("xcc: ","Debugger is undefined!")

    if cc.OPTS.get("Seek breapoints") and not cc.DBG.get("Breaks start index"):
        Warning("xcc: ","Breaks start index is undefined, using 0")
        cc.DBG["Breaks start index"] = "0"
</t>
<t tx="ekr.20060513122450.303">def sExtractHeadInfo (self):

    cc = self

    w = cc.SELECTED_NODE.h [5:]
    if w:
        path, name = os.path.split(w)
        name, ext = os.path.splitext(name)
        ext = ext.lower().replace(".","") or 'exe'
    else:
        path, name, ext = '', '', ''

    cc.sSet("REL_PATH",path)
    cc.sSet("NAME",name)
    cc.sSet("EXT",ext)
    theDir = g.choose(path,cc.CWD+"\\"+path,cc.CWD)
    cc.sSet("ABS_PATH",theDir)
</t>
<t tx="ekr.20060513122450.304">def sGetBrowseInfo (self):

    cc = self

    w = cc.SELECTED_NODE.h [5:]
    if w:
        cc.REL_PATH, cc.NAME = os.path.split(w)
        cc.NAME, EXT = os.path.splitext(cc.NAME)
        cc.EXT = EXT.lower().replace(".","") or 'exe'
    else:
        cc.REL_PATH, cc.NAME, cc.EXT = '', '', 'exe'

    cc.CWD = cc.ABS_PATH = os.getcwd()

    if cc.REL_PATH: cc.ABS_PATH = cc.ABS_PATH + "\\" + cc.REL_PATH

    if cc.EXT == "h": cc.SRC_EXT = cc.EXT
    if cc.EXT == "exe": cc.SRC_EXT = "cpp"
    if cc.EXT in ('c','cpp'): cc.SRC_EXT = cc.EXT
    if cc.EXT == "dll": cc.SRC_EXT = "cpp"

    cc.PTS = cc.sGet("Options",{})
</t>
<t tx="ekr.20060513122450.305">def sGetWriteInfo(self):

    cc = self

    if cc.NAME == "":
        return Error("xcc: ","Node have no name!")

    if cc.REL_PATH != "" and os.access(cc.REL_PATH,os.F_OK) != 1:
        os.makedirs(cc.REL_PATH)

    cc.COD = cc.sGet("Code")	
    #FILE_HDR = COD["File header"]
    #FILE_FTR = COD["File footer"]
    #CLASS_HDR = COD["Class header"]
    #CLASS_FTR = COD["Class footer"]
    #CLASS_OPN = COD["Class opening"]
    #CLASS_END = COD["Class closing"]
    if not cc.CLASS_OPN: cc.CLASS_OPN = "{\n"	
    if not cc.CLASS_END: cc.CLASS_END = "};\n"
    #FUNC_HDR = COD["Function header"]
    #FUNC_FTR = COD["Function footer"]
    #FUNC_OPN = COD["Function opening"]
    #FUNC_END = COD["Function closing"]
    if not cc.FUNC_OPN: cc.FUNC_OPN = "{\n"	
    if not cc.FUNC_END: cc.FUNC_END = "}\n"
    return True
</t>
<t tx="ekr.20060513122450.306">def sGetCompileInfo(self):

    cc = self
    cc.CPL = cc.sGet("Compiler")

    g.trace(cc.CPL)

    if not cc.CPL.get("Compiler"):
        return Error("xcc: ","No compiler defined!")

    cc.VERBOSE = cc.OPTS.get("Xcc verbose")
    return True

</t>
<t tx="ekr.20060513122450.307">def sGetDebugInfo(self):

    cc = self

    cc.DBG = cc.sGet("Debugger")
    if cc.DBG["Debugger"]:
        cc.VERBOSE = cc.OPTS.get("Xcc verbose")
        return True
    else:
        return Error("xcc: ","No debugger defined!")
</t>
<t tx="ekr.20060513122450.308">def sGetExecInfo():

    cc = self

    cc.EXE = cc.sGet("Executable")		
    return True
</t>
<t tx="ekr.20060513122450.309">def sGoToError(self,e=None):

    cc = self

    mask = [" ",":","(",")"]
    if e == None:
        row,col = cc.LeoBodyText.index("insert").split(".")
        row = int(row)
        col = int(col)
        lines = cc.SELECTED_NODE.b.splitlines()
        e = lines[row-1]
        e=e.replace("/","\\")

    edexp = cc.CPL.get("Error detection")
    m = re.search(edexp,e,re.IGNORECASE)
    if m != None:
        try:
            file = m.group("FILE")
            line = m.group("LINE")
            id = m.group("ID")
            edef = m.group("DEF")
            path,name = os.path.split(CPL["Compiler"])
            Error(name+" : ","Error: "+id+" in "+file+" line "+line+" : "+edef)

        except Exception:
            Warning("xcc: ","Unable to process error detection!")
            return

        name,ext = os.path.splitext(file)
        if name == cc.NAME:
            SeekErrorClass(cc,int(line),ext.replace(".",""),color=ErrorColor)
</t>
<t tx="ekr.20060513122450.310">def sGo(self):	#this is where the selected node also become the active node

    cc = self

    if not cc.NAME:
        return Error("xcc: ","Node has no name!")

    cc.sSetText("@language c++\n")

    if not cc.CreateFiles() or not cc.Compile():
        return False
    if cc.OPTS.get("Execute") == "True" and cc.OPTS.get("Debug") == "False":
        if not cc.Execute():
            return False
    if cc.OPTS.get("Debug") == "True":
        if not cc.Debug():
            return False
    return True
</t>
<t tx="ekr.20060513122450.311">def sSet (self,name,value):

    cc = self

    cc.SELECTED_DICT [name] = value
</t>
<t tx="ekr.20060513122450.312">def sGet(self,name,init=""):

    cc = self

    if name not in cc.SELECTED_DICT:
        cc.sSet(name,init)

    return cc.SELECTED_DICT[name]
</t>
<t tx="ekr.20060513122450.313">def sIsDict(self):

    cc = self

    if not cc.SELECTED_NODE:
        return False

    v = cc.SELECTED_NODE.v	

    return hasattr(v,"unknownAttributes") and "xcc_cfg" in v.unknownAttributes
</t>
<t tx="ekr.20060513122450.314">def sGetDict(self): # Get xcc parent dict alias "xcc_cfg" in ua

    cc = self

    if not cc.SELECTED_NODE:
        return None

    v = cc.SELECTED_NODE.v

    if not hasattr(v,"unknownAttributes"):
        v.unknownAttributes = {}

    if "xcc_cfg" in v.unknownAttributes:
        return v.unknownAttributes["xcc_cfg"]
    else:
        v.unknownAttributes["xcc_cfg"] = d = {}
        return d
</t>
<t tx="ekr.20060513122450.315">def sInitDict(self):

    cc = self

    Warning("xcc: ","Writing blank configuration!")
    cc.sSetText("@language c++")
    cc.Config.ClearConfig()
    cc.Config.SaveToNode()
    cc.sSet("INITED","True")



</t>
<t tx="ekr.20060513122450.316">def sSelect(self,node=None):

    cc = self ; c = cc.c

    if node:
        if cc.SELECTED_NODE:
            cc.Config.Hide()
            if cc.SELECTED_NODE:
                cc.SELECTED_NODE = node		
        else:
            cc.SELECTED_NODE = node

        cc.SELECTED_DICT = cc.sGetDict()

        if cc.SELECTED_NODE != cc.ACTIVE_NODE and cc.SELECTED_NODE.isMarked():
            cc.SELECTED_NODE.clearMarked()
            c.redraw()

        cc.sGetBrowseInfo()
        cc.sShow()
    elif cc.SELECTED_NODE:
        cc.Config.Hide()
        cc.sHide()
        cc.SELECTED_NODE = None
        cc.SELECTED_DICT = cc.sGetDict()
</t>
<t tx="ekr.20060513122450.317">def sSync(self):

    cc = self

    cc.SELECTED_DICT = cc.sGetDict()
    if cc.SELECTED_DICT:
        cc.sExtractHeadInfo()

    cc.CHILD_DICT = cc.cGetDict()
</t>
<t tx="ekr.20060513122450.318">def sShow(self):

    cc = self
    cc.LeoBodyText.pack_forget()
    cc.LeoYBodyBar.pack_forget()

    cc.ToolBar.Show()
    cc.LeoXBodyBar.pack(side="bottom",fill="x")
    cc.LeoYBodyBar.pack(side="right",fill="y")
    cc.LeoBodyText.pack(fill="both",expand=1)
    cc.LeoBodyText["wrap"] = 'none'

    cc.ToolBar.Spacer["state"] = 'normal'
    cc.ToolBar.Spacer.delete('1.0','end')
    cc.ToolBar.Spacer.insert("insert","."+cc.EXT)
    cc.ToolBar.Spacer["state"] = 'disabled'

    cc.ToolBar.Display["state"] = 'normal'
    cc.ToolBar.Display.delete('1.0','end')
    cc.ToolBar.Display["state"] = 'disabled'

    cc.Watcher.Sync()
</t>
<t tx="ekr.20060513122450.319">def sHide(self):

    cc = self

    cc.LeoXBodyBar.pack_forget()
    cc.ToolBar.Hide()
    cc.LeoBodyText["wrap"]=cc.LeoWrap
</t>
<t tx="ekr.20060513122450.320">def sSetText(self,text=""):

    cc = self

    cc.setBodyText(SELECTED_NODE,text)
</t>
<t tx="ekr.20060513122450.321">def sAddText(self,text):

    cc = self

    cc.setBodyText(SELECTED_NODE,cc.SELECTED_NODE.b+text)

    if not cc.CHILD_NODE:
        l,c = cc.LeoBodyText.index("end").split(".")
        cc.LeoBodyText.see(l+".0")
</t>
<t tx="ekr.20060513122450.53">class ConfigClass:
    @others
</t>
<t tx="ekr.20060513122450.54">class PageClass(Tk.Canvas):
    @others
</t>
<t tx="ekr.20060513122450.55">class CHECK:
    @others
</t>
<t tx="ekr.20060513122450.56">def __init__(self,master,n,x=0,y=0):

    self.Check = Tk.StringVar()
    self.Name = n
    c = Tk.Checkbutton(master,text=n,onvalue="True",offvalue="False",variable=self.Check)
    master.create_window(x,y,anchor='nw',window=c)
</t>
<t tx="ekr.20060513122450.57">def Get(self):
    return self.Check.get()
</t>
<t tx="ekr.20060513122450.58">def Set(self,value):
    self.Check.set(value)
</t>
<t tx="ekr.20060513122450.59">class ENTRY:
    @others
</t>
<t tx="ekr.20060513122450.60">def __init__(self,c,n,w=175,h=22,e=1,a='nw',x=0,y=0,re=False,vs=False):
    self.Name = n

    if re != False: fg = RegExpFgColor
    else: fg = "black"

    if vs != False: bg = VarSupBgColor
    else: bg = "white"

    self.MasterFrame = mf = Tk.Frame(c,relief='groove',height=h,width=w)
    self.ID = c.create_window(x,y,anchor=a,window=mf,height=h,width=w)	

    self.Entry = Tk.Entry(mf,width=1,bg=bg)
    self.Entry.pack(side="right",fill="x",expand=e)
    l = Tk.Label(mf,text=n+":",fg=fg).pack(side="right")
</t>
<t tx="ekr.20060513122450.61">def Get(self):
    return self.Entry.get()
</t>
<t tx="ekr.20060513122450.62">def Set(self,text):
    self.Entry.delete(0,'end')
    self.Entry.insert('end',text)
</t>
<t tx="ekr.20060513122450.63">class TEXT:
    @others
</t>
<t tx="ekr.20060513122450.64">def __init__(self,c,n,w=350,h=80,a='nw',x=0,y=0,re=False,vs=False):#text are 3 column wide

    self.Name = n

    if re != False: fg = RegExpFgColor
    else: fg = "black"

    if vs != False: bg = VarSupBgColor
    else: bg = "white"

    self.MasterFrame = mf = Tk.Frame(c,relief='groove')
    self.ID = c.create_window(x,y+1,anchor=a,window=mf,width=w,height=h)

    lf = Tk.Frame(mf,relief='flat')
    lf.pack(side="top",fill="x",expand=1)			
    Tk.Label(lf,text=n+":",fg=fg).pack(side="left")

    self.Text = Tk.Text(mf,bg=bg)
    self.Text.pack(side="top",fill="x",expand=1)
</t>
<t tx="ekr.20060513122450.65">def Get(self):
    s = self.Text.get(1.0,'end')
    lines = s.splitlines()
    res = ""
    for l in lines:
        if l != "":
            res += l+"\n"
    return res
</t>
<t tx="ekr.20060513122450.66">def Set(self,text):
    self.Text.delete(1.0,'end')
    self.Text.insert('end',text)
</t>
<t tx="ekr.20060513122450.67">class LABEL:
    @others
</t>
<t tx="ekr.20060513122450.68">def __init__(self,c,text,w=175,h=22,e=1,a='nw',x=0,y=0,color="#%02x%02x%02x" % (150,150,150)):

    self.MasterFrame = mf = Tk.Frame(c,relief='groove',height=h,width=w)
    self.ID = c.create_window(x,y,anchor=a,window=mf,height=h,width=w)	

    self.Label = Tk.Label(c,text=text,justify='left',fg=color)
    self.ID = c.create_window(x,y,anchor=a,window=self.Label)
</t>
<t tx="ekr.20060513122450.69">class HELP(Tk.Button):
    @others
</t>
<t tx="ekr.20060513122450.70">def __init__(self,c,buttontext="Help",boxtitle="Help",msg="!",x=5,y=0):

    self.Title = boxtitle
    self.Message = msg
    Tk.Button.__init__(self,c,text=buttontext,command=self.Help)
    self.ID = c.create_window(x,y,anchor='nw',window=self)
</t>
<t tx="ekr.20060513122450.71">def Help(self):
    tkMessageBox.showinfo(self.Title,self.Message)
</t>
<t tx="ekr.20060513122450.72">def __init__(self,cc,name):

    self.cc = cc
    self.name = name
    self.Objects = []
    Tk.Canvas.__init__(self,cc.LeoFrame.split1Pane2)
    self.X=self.Y=self.W=self.H = 0
    self.CreateObjects(self)
</t>
<t tx="ekr.20060513122450.73">def AddObject(self,o):

    if o != None:
        self.Objects.append(o)
        self.X,self.Y,self.W,self.H = self.bbox('all')
</t>
<t tx="ekr.20060513122450.74">def BBox(self):
    self.X,self.Y,self.W,self.H = self.bbox('all')
</t>
<t tx="ekr.20060513122450.75">def AddSep(self,length=380,color="black"):

    if length != None:
        l = length
    else:
        l = self.W
    self.create_line(5,self.H+4,l+5,self.H+4,fill=color)
    self.H += 10
</t>
<t tx="ekr.20060513122450.76">def CreateObjects(self,master):#must overide
    pass
</t>
<t tx="ekr.20060513122450.77">def SaveObjects(self,pd=None):

    cc = self.cc

    if pd == None:
        pd = cc.sGet(self.name,init={})

    for o in self.Objects:
        pd[o.Name] = o.Get()
</t>
<t tx="ekr.20060513122450.78">def LoadObjects(self,pd=None):	

    cc = self.cc
    if pd == None:
        pd = cc.sGet(self.name,{})

    g.trace(self.name,pd)

    for o in self.Objects:
        if o.Name not in pd:				
            pd[o.Name] = o.Get()
        else:
            o.Set(pd[o.Name])
</t>
<t tx="ekr.20060513122450.79">def ClearObjects(self,value=""):
    for o in self.Objects:
        o.Set(value)
</t>
<t tx="ekr.20060513122450.80">def Hide(self):

    cc = self.cc
    self.pack_forget()

    b = cc.Config.GetButton(self.name)
    b.config(relief='groove',fg="black")

    cc.LeoYBodyBar.config(command=cc.LeoBodyText.yview)
    cc.LeoBodyText.config(yscrollcommand=cc.LeoYBodyBar.set)
</t>
<t tx="ekr.20060513122450.81">def Show(self):

    cc = self.cc

    if cc.Config.ActivePage:
        cc.Config.ActivePage.Hide()

    cc.Config.ActivePage = self
    b = cc.Config.GetButton(self.name)
    b.config(relief='sunken',fg="blue")	

    self.config(scrollregion=self.bbox('all'))
    self.config(yscrollcommand=cc.LeoYBodyBar.set)

    cc.LeoYBodyBar.config(command=self.yview)
    cc.LeoYBodyBar.pack(side="right",fill="y")
    self.pack(expand=1,fill="both")
</t>
<t tx="ekr.20060513122450.82">def __init__(self,cc):

    self.cc = cc
    self.Pages = []
    self.Buttons = []
    self.ActivePage = None

    #switch frame
    self.SwitchFrame = Tk.Frame(
        cc.LeoFrame.split1Pane2,relief='groove',bd=2,height=40,width=100)

    #title
    self.Title = Tk.Entry(self.SwitchFrame,justify='center')
    self.Title.pack(side="top",fill="x",expand=1)	

    self.AddPages()	
    #add pages switches
    for page in self.Pages:
        if page:
            b = Tk.Button(self.SwitchFrame,text=page.name,width=10,command=page.Show,relief='groove')
            self.Buttons.append(b)
            b.pack(side="left")
            if not self.ActivePage:
                self.ActivePage = page

    if 0: #Cancel button
        # Not needed.
        b = Tk.Button(self.SwitchFrame,text="Cancel",command=lambda: self.Hide(False))
        b.pack(side="right")

    #Load button
    b = Tk.Button(self.SwitchFrame,text="Load...",command=self.LoadFromFile)
    b.pack(side="right")

    #Save button
    b = Tk.Button(self.SwitchFrame,text="Save...",command=self.SaveToFile)
    b.pack(side="right")	

    self.BreakTags = {}
    self.visible = False
</t>
<t tx="ekr.20060513122450.83">def GetPage(self,name):

    for p in self.Pages:
        if p and p.name == name:
            return p
</t>
<t tx="ekr.20060513122450.84">def GetButton(self,name):

    for b in self.Buttons:
        if b and b["text"] == name:
            return b
</t>
<t tx="ekr.20060513122450.85">def Hide(self,save=True):

    cc = self.cc

    if self.visible == True:
        self.ActivePage.Hide()	
        self.SwitchFrame.pack_forget()
        cc.LeoYBodyBar.config(command=cc.LeoBodyText.yview)
        cc.LeoBodyText.config(yscrollcommand=cc.LeoYBodyBar.set)
        cc.LeoXBodyBar.pack(side = "bottom",fill="x")
        if cc.CHILD_NODE:
            cc.BreakBar.Show()
        cc.LeoBodyText.pack(expand=1, fill="both")

        if save == True:
            self.SaveToNode()
        cc.ToolBar.ConfigButton.config(command=self.Show,relief='raised')
        cc.ToolBar.DisplayFrame.pack(side="top",fill="x",expand=1)
        self.visible = False
</t>
<t tx="ekr.20060513122450.86">def Show(self):

    cc = self.cc
    if cc.Watcher.visible:
        cc.Watcher.Hide()			
    if cc.BreakBar.visible:
        cc.BreakBar.Hide()
    cc.ToolBar.DisplayFrame.pack_forget()
    cc.LeoBodyText.pack_forget()
    cc.LeoXBodyBar.pack_forget()
    cc.LeoYBodyBar.pack_forget()

    self.SwitchFrame.pack(side="top", fill="x")
    self.LoadFromNode()
    self.ActivePage.Show()
    cc.ToolBar.ConfigButton.config(command=self.Hide,relief='sunken')
    self.visible = True
    cc.c.redraw()
</t>
<t tx="ekr.20060513122450.87">def ClearConfig(self):
    for p in self.Pages:
        if p.name == "Options":
            p.ClearObjects("False")
        else:
            p.ClearObjects()
</t>
<t tx="ekr.20060513122450.88">def LoadFromNode(self):

    cc = self.cc
    self.Title.delete(0,'end')
    self.Title.insert('end',cc.sGet("Title"))

    for p in self.Pages:
        if p:
            p.LoadObjects()
</t>
<t tx="ekr.20060513122450.89">def SaveToNode(self):

    cc = self.cc

    cc.sSet("Title",self.Title.get())

    for p in self.Pages:
        p and p.SaveObjects()
</t>
<t tx="ekr.20060513122450.90">def LoadFromFile(self):
    try:
        ft = ('XCC Config files', '.xcc'),
        s = tkFileDialog.askopenfilename(filetypes=ft,title="Open xcc connfiguration file...")

        if s == "":
            Error("xcc: ","Load action canceled by user!")
            return

        #read file and compose code
        f = file(s,"r")
        td = None
        code = "td ="+f.readline()
        f.close()

        # load in temp dict
        try:
            exec(code)
        except Exception:
            TraceBack()
            Error("xcc: ","File content is invalid!")
            return

        #	load each pages
        for p in self.Pages:
            if p.name in td:
                p.LoadObjects(td[p.name])

        #set title to file name
        name,ext = os.path.splitext(s)
        path,name = os.path.split(name)		
        self.Title.delete(0,'end')
        self.Title.insert('end',name)		

        #save to node to ensure integrity
        self.SaveToNode()

    except Exception:
        TraceBack()




</t>
<t tx="ekr.20060513122450.91">def SaveToFile(self):
    try:


        ft = ('XCC Config files', '.xcc'),
        s = tkFileDialog.asksaveasfilename(
        filetypes=ft,
        title="Save xcc connfiguration file...",
        initialfile = self.Title.get()
        )

        if s == "":
            Error("xcc: ","Save action canceled by user!")
            return		

        name,ext = os.path.splitext(s)

        td = {}

        # save each pages
        for p in self.Pages:
            td[p.name] = {}
            p.SaveObjects(td[p.name])	

        #write the dict to file
        f = file(name+".xcc","w+")
        Message("xcc: ","Writing config in "+name+".xcc")
        f.write(str(td))
        f.close()

        # reset title to file name
        path,name = os.path.split(name)		
        self.Title.delete(0,'end')
        self.Title.insert('end',name)

        # save to node
        self.SaveToNode()
    except Exception:
        TraceBack()







</t>
<t tx="ekr.20060513122450.92">def Apply(self):
    self.SaveToNode()
    self.Hide()
</t>
<t tx="ekr.20060513122450.93">def AddPages(self):

    cc = self.cc
    self.Pages.append(self.OptPageClass(cc))
    self.Pages.append(self.CplPageClass(cc))
    self.Pages.append(self.DbgPageClass(cc))
    self.Pages.append(self.ExePageClass(cc))
    #self.Pages.append(self.CodePageClass(cc))
</t>
<t tx="ekr.20060513122450.94">class OptPageClass(PageClass):

    @others
</t>
<t tx="ekr.20060513122450.95">def __init__(self,cc):

    self.cc = cc
    ConfigClass.PageClass.__init__(self,cc,"Options")
</t>
<t tx="ekr.20060513122450.96">def CreateObjects(self,master): # must overide

    @others

    self.AddSep(length=self.W)
</t>
<t tx="ekr.20060513122450.97">s1 = self.CHECK(master,"Create files",x=5,y=5)
s2 = self.CHECK(master,"Auto include header",x=100,y=5)
self.AddObject(s1)
self.AddObject(s2)

self.AddSep(length=self.W)
s1 = self.CHECK(master,"Compile",x=5,y=self.H)
s2 = self.CHECK(master,"Seek first error",x=100,y=self.H)
self.AddObject(s1)
self.AddObject(s2)

self.AddSep(length=self.W)
s1 = self.CHECK(master,"Execute",x=5,y=self.H)
s2 = self.CHECK(master,"Connect to pipe",x=100,y=self.H)
self.AddObject(s1)
self.AddObject(s2)

self.AddSep(length=self.W)
s1 = self.CHECK(master,"Debug",x=5,y=self.H)
s2 = self.CHECK(master,"Seek breakpoints",x=100,y=self.H)
self.AddObject(s1)
self.AddObject(s2)

#-------------------------------------------------------------
self.AddSep(self.W)
self.AddObject(self.CHECK(master,"Xcc verbose",x=5,y=self.H))
self.AddObject(self.CHECK(master,"Filter output",x=5,y=self.H))
</t>
<t tx="ekr.20060513122450.98">#self.AddSep(self.W)
#b = Tk.Button(master,text="Import...",width=10,default='disabled',command = ImportFiles)
#master.create_window(self.X+5,self.H,width=60,height=20,anchor='nw',window=b)
#c1 = self.CHECK(master,"Merge",x=80,y=self.H)
#c2 = self.CHECK(master,"Use corresponding source/header",x=150,y=self.H)
#self.AddObject(c1)
#self.AddObject(c2)
</t>
<t tx="ekr.20060513122450.99">class CplPageClass(PageClass):
    @others
</t>
<t tx="ekr.20060513122613"></t>
<t tx="ekr.20060513122613.1">@
opengl.h is just a test for long files
cltest\testprog is an xcc project to test functionality under win32 compile env, with it's gcc equivalent underneath.

no plugin conflicts detected with core plugins, read-only nodes, unl or linecol plugin.
should work with most plugins...
</t>
<t tx="ekr.20060513122613.10">#ifndef GL_DEFS
GL_EXT(void,glBlendColor,(GLclampf, GLclampf, GLclampf, GLclampf))
GL_EXT(void,glBlendEquation,(GLenum))
GL_EXT(void,glDrawRangeElements,(GLenum, GLuint, GLuint, GLsizei, GLenum, const GLvoid *))
GL_EXT(void,glColorTable,(GLenum, GLenum, GLsizei, GLenum, GLenum, const GLvoid *))
GL_EXT(void,glColorTableParameterfv,(GLenum, GLenum, const GLfloat *))
GL_EXT(void,glColorTableParameteriv,(GLenum, GLenum, const GLint *))
GL_EXT(void,glCopyColorTable,(GLenum, GLenum, GLint, GLint, GLsizei))
GL_EXT(void,glGetColorTable,(GLenum, GLenum, GLenum, GLvoid *))
GL_EXT(void,glGetColorTableParameterfv,(GLenum, GLenum, GLfloat *))
GL_EXT(void,glGetColorTableParameteriv,(GLenum, GLenum, GLint *))
GL_EXT(void,glColorSubTable,(GLenum, GLsizei, GLsizei, GLenum, GLenum, const GLvoid *))
GL_EXT(void,glCopyColorSubTable,(GLenum, GLsizei, GLint, GLint, GLsizei))
GL_EXT(void,glConvolutionFilter1D,(GLenum, GLenum, GLsizei, GLenum, GLenum, const GLvoid *))
GL_EXT(void,glConvolutionFilter2D,(GLenum, GLenum, GLsizei, GLsizei, GLenum, GLenum, const GLvoid *))
GL_EXT(void,glConvolutionParameterf,(GLenum, GLenum, GLfloat))
GL_EXT(void,glConvolutionParameterfv,(GLenum, GLenum, const GLfloat *))
GL_EXT(void,glConvolutionParameteri,(GLenum, GLenum, GLint))
GL_EXT(void,glConvolutionParameteriv,(GLenum, GLenum, const GLint *))
GL_EXT(void,glCopyConvolutionFilter1D,(GLenum, GLenum, GLint, GLint, GLsizei))
GL_EXT(void,glCopyConvolutionFilter2D,(GLenum, GLenum, GLint, GLint, GLsizei, GLsizei))
GL_EXT(void,glGetConvolutionFilter,(GLenum, GLenum, GLenum, GLvoid *))
GL_EXT(void,glGetConvolutionParameterfv,(GLenum, GLenum, GLfloat *))
GL_EXT(void,glGetConvolutionParameteriv,(GLenum, GLenum, GLint *))
GL_EXT(void,glGetSeparableFilter,(GLenum, GLenum, GLenum, GLvoid *, GLvoid *, GLvoid *))
GL_EXT(void,glSeparableFilter2D,(GLenum, GLenum, GLsizei, GLsizei, GLenum, GLenum, const GLvoid *, const GLvoid *))
GL_EXT(void,glGetHistogram,(GLenum, GLboolean, GLenum, GLenum, GLvoid *))
GL_EXT(void,glGetHistogramParameterfv,(GLenum, GLenum, GLfloat *))
GL_EXT(void,glGetHistogramParameteriv,(GLenum, GLenum, GLint *))
GL_EXT(void,glGetMinmax,(GLenum, GLboolean, GLenum, GLenum, GLvoid *))
GL_EXT(void,glGetMinmaxParameterfv,(GLenum, GLenum, GLfloat *))
GL_EXT(void,glGetMinmaxParameteriv,(GLenum, GLenum, GLint *))
GL_EXT(void,glHistogram,(GLenum, GLsizei, GLenum, GLboolean))
GL_EXT(void,glMinmax,(GLenum, GLenum, GLboolean))
GL_EXT(void,glResetHistogram,(GLenum))
GL_EXT(void,glResetMinmax,(GLenum))
GL_EXT(void,glTexImage3D,(GLenum, GLint, GLint, GLsizei, GLsizei, GLsizei, GLint, GLenum, GLenum, const GLvoid *))
GL_EXT(void,glTexSubImage3D,(GLenum, GLint, GLint, GLint, GLint, GLsizei, GLsizei, GLsizei, GLenum, GLenum, const GLvoid *))
GL_EXT(void,glCopyTexSubImage3D,(GLenum, GLint, GLint, GLint, GLint, GLint, GLint, GLsizei, GLsizei))
#endif</t>
<t tx="ekr.20060513122613.11">#if USE_OPENGL &gt;= 3
	@others
#endif</t>
<t tx="ekr.20060513122613.12">#ifdef GL_DEFS
#define GL_TEXTURE0                       0x84C0
#define GL_TEXTURE1                       0x84C1
#define GL_TEXTURE2                       0x84C2
#define GL_TEXTURE3                       0x84C3
#define GL_TEXTURE4                       0x84C4
#define GL_TEXTURE5                       0x84C5
#define GL_TEXTURE6                       0x84C6
#define GL_TEXTURE7                       0x84C7
#define GL_TEXTURE8                       0x84C8
#define GL_TEXTURE9                       0x84C9
#define GL_TEXTURE10                      0x84CA
#define GL_TEXTURE11                      0x84CB
#define GL_TEXTURE12                      0x84CC
#define GL_TEXTURE13                      0x84CD
#define GL_TEXTURE14                      0x84CE
#define GL_TEXTURE15                      0x84CF
#define GL_TEXTURE16                      0x84D0
#define GL_TEXTURE17                      0x84D1
#define GL_TEXTURE18                      0x84D2
#define GL_TEXTURE19                      0x84D3
#define GL_TEXTURE20                      0x84D4
#define GL_TEXTURE21                      0x84D5
#define GL_TEXTURE22                      0x84D6
#define GL_TEXTURE23                      0x84D7
#define GL_TEXTURE24                      0x84D8
#define GL_TEXTURE25                      0x84D9
#define GL_TEXTURE26                      0x84DA
#define GL_TEXTURE27                      0x84DB
#define GL_TEXTURE28                      0x84DC
#define GL_TEXTURE29                      0x84DD
#define GL_TEXTURE30                      0x84DE
#define GL_TEXTURE31                      0x84DF
#define GL_ACTIVE_TEXTURE                 0x84E0
#define GL_CLIENT_ACTIVE_TEXTURE          0x84E1
#define GL_MAX_TEXTURE_UNITS              0x84E2
#define GL_TRANSPOSE_MODELVIEW_MATRIX     0x84E3
#define GL_TRANSPOSE_PROJECTION_MATRIX    0x84E4
#define GL_TRANSPOSE_TEXTURE_MATRIX       0x84E5
#define GL_TRANSPOSE_COLOR_MATRIX         0x84E6
#define GL_MULTISAMPLE                    0x809D
#define GL_SAMPLE_ALPHA_TO_COVERAGE       0x809E
#define GL_SAMPLE_ALPHA_TO_ONE            0x809F
#define GL_SAMPLE_COVERAGE                0x80A0
#define GL_SAMPLE_BUFFERS                 0x80A8
#define GL_SAMPLES                        0x80A9
#define GL_SAMPLE_COVERAGE_VALUE          0x80AA
#define GL_SAMPLE_COVERAGE_INVERT         0x80AB
#define GL_MULTISAMPLE_BIT                0x20000000
#define GL_NORMAL_MAP                     0x8511
#define GL_REFLECTION_MAP                 0x8512
#define GL_TEXTURE_CUBE_MAP               0x8513
#define GL_TEXTURE_BINDING_CUBE_MAP       0x8514
#define GL_TEXTURE_CUBE_MAP_POSITIVE_X    0x8515
#define GL_TEXTURE_CUBE_MAP_NEGATIVE_X    0x8516
#define GL_TEXTURE_CUBE_MAP_POSITIVE_Y    0x8517
#define GL_TEXTURE_CUBE_MAP_NEGATIVE_Y    0x8518
#define GL_TEXTURE_CUBE_MAP_POSITIVE_Z    0x8519
#define GL_TEXTURE_CUBE_MAP_NEGATIVE_Z    0x851A
#define GL_PROXY_TEXTURE_CUBE_MAP         0x851B
#define GL_MAX_CUBE_MAP_TEXTURE_SIZE      0x851C
#define GL_COMPRESSED_ALPHA               0x84E9
#define GL_COMPRESSED_LUMINANCE           0x84EA
#define GL_COMPRESSED_LUMINANCE_ALPHA     0x84EB
#define GL_COMPRESSED_INTENSITY           0x84EC
#define GL_COMPRESSED_RGB                 0x84ED
#define GL_COMPRESSED_RGBA                0x84EE
#define GL_TEXTURE_COMPRESSION_HINT       0x84EF
#define GL_TEXTURE_COMPRESSED_IMAGE_SIZE  0x86A0
#define GL_TEXTURE_COMPRESSED             0x86A1
#define GL_NUM_COMPRESSED_TEXTURE_FORMATS 0x86A2
#define GL_COMPRESSED_TEXTURE_FORMATS     0x86A3
#define GL_CLAMP_TO_BORDER                0x812D
#define GL_CLAMP_TO_BORDER_SGIS           0x812D
#define GL_COMBINE                        0x8570
#define GL_COMBINE_RGB                    0x8571
#define GL_COMBINE_ALPHA                  0x8572
#define GL_SOURCE0_RGB                    0x8580
#define GL_SOURCE1_RGB                    0x8581
#define GL_SOURCE2_RGB                    0x8582
#define GL_SOURCE0_ALPHA                  0x8588
#define GL_SOURCE1_ALPHA                  0x8589
#define GL_SOURCE2_ALPHA                  0x858A
#define GL_OPERAND0_RGB                   0x8590
#define GL_OPERAND1_RGB                   0x8591
#define GL_OPERAND2_RGB                   0x8592
#define GL_OPERAND0_ALPHA                 0x8598
#define GL_OPERAND1_ALPHA                 0x8599
#define GL_OPERAND2_ALPHA                 0x859A
#define GL_RGB_SCALE                      0x8573
#define GL_ADD_SIGNED                     0x8574
#define GL_INTERPOLATE                    0x8575
#define GL_SUBTRACT                       0x84E7
#define GL_CONSTANT                       0x8576
#define GL_PRIMARY_COLOR                  0x8577
#define GL_PREVIOUS                       0x8578
#define GL_DOT3_RGB                       0x86AE
#define GL_DOT3_RGBA                      0x86AF
#endif
</t>
<t tx="ekr.20060513122613.13">#ifndef GL_DEFS
GL_EXT(void,glActiveTexture,(GLenum))
GL_EXT(void,glClientActiveTexture,(GLenum))
GL_EXT(void,glMultiTexCoord1d,(GLenum,GLdouble))
GL_EXT(void,glMultiTexCoord1dv,(GLenum,const GLdouble *))
GL_EXT(void,glMultiTexCoord1f,(GLenum,GLfloat))
GL_EXT(void,glMultiTexCoord1fv,(GLenum,const GLfloat *))
GL_EXT(void,glMultiTexCoord1i,(GLenum,GLint))
GL_EXT(void,glMultiTexCoord1iv,(GLenum,const GLint*))
GL_EXT(void,glMultiTexCoord1s,(GLenum,GLshort))
GL_EXT(void,glMultiTexCoord1sv,(GLenum,const GLshort*))
GL_EXT(void,glMultiTexCoord2d,(GLenum,GLdouble,GLdouble))
GL_EXT(void,glMultiTexCoord2dv,(GLenum,const GLdouble*))
GL_EXT(void,glMultiTexCoord2f,(GLenum,GLfloat,GLfloat))
GL_EXT(void,glMultiTexCoord2fv,(GLenum,const GLfloat*))
GL_EXT(void,glMultiTexCoord2i,(GLenum,GLint,GLint))
GL_EXT(void,glMultiTexCoord2iv,(GLenum,const GLint*))
GL_EXT(void,glMultiTexCoord2s,(GLenum,GLshort,GLshort))
GL_EXT(void,glMultiTexCoord2sv,(GLenum,const GLshort*))
GL_EXT(void,glMultiTexCoord3d,(GLenum,GLdouble,GLdouble,GLdouble))
GL_EXT(void,glMultiTexCoord3dv,(GLenum,const GLdouble*))
GL_EXT(void,glMultiTexCoord3f,(GLenum,GLfloat,GLfloat,GLfloat))
GL_EXT(void,glMultiTexCoord3fv,(GLenum,const GLfloat*))
GL_EXT(void,glMultiTexCoord3i,(GLenum,GLint,GLint,GLint))
GL_EXT(void,glMultiTexCoord3iv,(GLenum,const GLint*))
GL_EXT(void,glMultiTexCoord3s,(GLenum,GLshort,GLshort,GLshort))
GL_EXT(void,glMultiTexCoord3sv,(GLenum,const GLshort*))
GL_EXT(void,glMultiTexCoord4d,(GLenum,GLdouble,GLdouble,GLdouble,GLdouble))
GL_EXT(void,glMultiTexCoord4dv,(GLenum,const GLdouble *))
GL_EXT(void,glMultiTexCoord4f,(GLenum,GLfloat,GLfloat,GLfloat,GLfloat))
GL_EXT(void,glMultiTexCoord4fv,(GLenum,const GLfloat *))
GL_EXT(void,glMultiTexCoord4i,(GLenum,GLint,GLint,GLint,GLint))
GL_EXT(void,glMultiTexCoord4iv,(GLenum,const GLint *))
GL_EXT(void,glMultiTexCoord4s,(GLenum,GLshort,GLshort,GLshort,GLshort))
GL_EXT(void,glMultiTexCoord4sv,(GLenum,const GLshort *))
GL_EXT(void,glLoadTransposeMatrixf,(const GLfloat *))
GL_EXT(void,glLoadTransposeMatrixd,(const GLdouble *))
GL_EXT(void,glMultTransposeMatrixf,(const GLfloat *))
GL_EXT(void,glMultTransposeMatrixd,(const GLdouble *))
GL_EXT(void,glSampleCoverage,(GLclampf,GLboolean))
GL_EXT(void,glCompressedTexImage3D,(GLenum,GLint,GLenum,GLsizei,GLsizei,GLsizei,GLint,GLsizei,const GLvoid *))
GL_EXT(void,glCompressedTexImage2D,(GLenum,GLint,GLenum,GLsizei,GLsizei,GLint,GLsizei,const GLvoid *))
GL_EXT(void,glCompressedTexImage1D,(GLenum,GLint,GLenum,GLsizei,GLint,GLsizei,const GLvoid *))
GL_EXT(void,glCompressedTexSubImage3D,(GLenum,GLint,GLint,GLint,GLint,GLsizei,GLsizei,GLsizei,GLenum,GLsizei,const GLvoid *))
GL_EXT(void,glCompressedTexSubImage2D,(GLenum,GLint,GLint,GLint,GLsizei,GLsizei,GLenum,GLsizei,const GLvoid *))
GL_EXT(void,glCompressedTexSubImage1D,(GLenum,GLint,GLint,GLsizei,GLenum,GLsizei,const GLvoid *))
GL_EXT(void,glGetCompressedTexImage,(GLenum,GLint,GLvoid *))
#endif</t>
<t tx="ekr.20060513122613.14">#if USE_OPENGL &gt;= 4
	@others
#endif</t>
<t tx="ekr.20060513122613.15">#ifdef GL_DEFS
#define GL_BLEND_DST_RGB                  0x80C8
#define GL_BLEND_SRC_RGB                  0x80C9
#define GL_BLEND_DST_ALPHA                0x80CA
#define GL_BLEND_SRC_ALPHA                0x80CB
#define GL_POINT_SIZE_MIN                 0x8126
#define GL_POINT_SIZE_MAX                 0x8127
#define GL_POINT_FADE_THRESHOLD_SIZE      0x8128
#define GL_POINT_DISTANCE_ATTENUATION     0x8129
#define GL_GENERATE_MIPMAP                0x8191
#define GL_GENERATE_MIPMAP_HINT           0x8192
#define GL_DEPTH_COMPONENT16              0x81A5
#define GL_DEPTH_COMPONENT24              0x81A6
#define GL_DEPTH_COMPONENT32              0x81A7
#define GL_MIRRORED_REPEAT                0x8370
#define GL_FOG_COORDINATE_SOURCE          0x8450
#define GL_FOG_COORDINATE                 0x8451
#define GL_FRAGMENT_DEPTH                 0x8452
#define GL_CURRENT_FOG_COORDINATE         0x8453
#define GL_FOG_COORDINATE_ARRAY_TYPE      0x8454
#define GL_FOG_COORDINATE_ARRAY_STRIDE    0x8455
#define GL_FOG_COORDINATE_ARRAY_POINTER   0x8456
#define GL_FOG_COORDINATE_ARRAY           0x8457
#define GL_COLOR_SUM                      0x8458
#define GL_CURRENT_SECONDARY_COLOR        0x8459
#define GL_SECONDARY_COLOR_ARRAY_SIZE     0x845A
#define GL_SECONDARY_COLOR_ARRAY_TYPE     0x845B
#define GL_SECONDARY_COLOR_ARRAY_STRIDE   0x845C
#define GL_SECONDARY_COLOR_ARRAY_POINTER  0x845D
#define GL_SECONDARY_COLOR_ARRAY          0x845E
#define GL_MAX_TEXTURE_LOD_BIAS           0x84FD
#define GL_TEXTURE_FILTER_CONTROL         0x8500
#define GL_TEXTURE_LOD_BIAS               0x8501
#define GL_INCR_WRAP                      0x8507
#define GL_DECR_WRAP                      0x8508
#define GL_TEXTURE_DEPTH_SIZE             0x884A
#define GL_DEPTH_TEXTURE_MODE             0x884B
#define GL_TEXTURE_COMPARE_MODE           0x884C
#define GL_TEXTURE_COMPARE_FUNC           0x884D
#define GL_COMPARE_R_TO_TEXTURE           0x884E
#endif</t>
<t tx="ekr.20060513122613.16">#ifndef GL_DEFS
GL_EXT(void,glBlendFuncSeparate,(GLenum,GLenum,GLenum,GLenum))
GL_EXT(void,glFogCoordf,(GLfloat))
GL_EXT(void,glFogCoordfv,(const GLfloat *))
GL_EXT(void,glFogCoordd,(GLdouble))
GL_EXT(void,glFogCoorddv,(const GLdouble *))
GL_EXT(void,glFogCoordPointer,(GLenum,GLsizei,const GLvoid *))
GL_EXT(void,glMultiDrawArrays,(GLenum,GLint *,GLsizei *,GLsizei))
GL_EXT(void,glMultiDrawElements,(GLenum,const GLsizei *,GLenum,const GLvoid* *,GLsizei))
GL_EXT(void,glPointParameterf,(GLenum,GLfloat))
GL_EXT(void,glPointParameterfv,(GLenum,const GLfloat *))
GL_EXT(void,glPointParameteri,(GLenum,GLint))
GL_EXT(void,glPointParameteriv,(GLenum,const GLint *))
GL_EXT(void,glSecondaryColor3b,(GLbyte,GLbyte,GLbyte))
GL_EXT(void,glSecondaryColor3bv,(const GLbyte *))
GL_EXT(void,glSecondaryColor3d,(GLdouble,GLdouble,GLdouble))
GL_EXT(void,glSecondaryColor3dv,(const GLdouble *))
GL_EXT(void,glSecondaryColor3f,(GLfloat,GLfloat,GLfloat))
GL_EXT(void,glSecondaryColor3fv,(const GLfloat *))
GL_EXT(void,glSecondaryColor3i,(GLint,GLint,GLint))
GL_EXT(void,glSecondaryColor3iv,(const GLint *))
GL_EXT(void,glSecondaryColor3s,(GLshort,GLshort,GLshort))
GL_EXT(void,glSecondaryColor3sv,(const GLshort *))
GL_EXT(void,glSecondaryColor3ub,(GLubyte,GLubyte,GLubyte))
GL_EXT(void,glSecondaryColor3ubv,(const GLubyte *))
GL_EXT(void,glSecondaryColor3ui,(GLuint,GLuint,GLuint))
GL_EXT(void,glSecondaryColor3uiv,(const GLuint *))
GL_EXT(void,glSecondaryColor3us,(GLushort,GLushort,GLushort))
GL_EXT(void,glSecondaryColor3usv,(const GLushort *))
GL_EXT(void,glSecondaryColorPointer,(GLint,GLenum,GLsizei,const GLvoid *))
GL_EXT(void,glWindowPos2d,(GLdouble,GLdouble))
GL_EXT(void,glWindowPos2dv,(const GLdouble *))
GL_EXT(void,glWindowPos2f,(GLfloat,GLfloat))
GL_EXT(void,glWindowPos2fv,(const GLfloat *))
GL_EXT(void,glWindowPos2i,(GLint,GLint))
GL_EXT(void,glWindowPos2iv,(const GLint *))
GL_EXT(void,glWindowPos2s,(GLshort,GLshort))
GL_EXT(void,glWindowPos2sv,(const GLshort *))
GL_EXT(void,glWindowPos3d,(GLdouble,GLdouble,GLdouble))
GL_EXT(void,glWindowPos3dv,(const GLdouble *))
GL_EXT(void,glWindowPos3f,(GLfloat,GLfloat,GLfloat))
GL_EXT(void,glWindowPos3fv,(const GLfloat *))
GL_EXT(void,glWindowPos3i,(GLint,GLint,GLint))
GL_EXT(void,glWindowPos3iv,(const GLint *))
GL_EXT(void,glWindowPos3s,(GLshort,GLshort,GLshort))
GL_EXT(void,glWindowPos3sv,(const GLshort *))
#endif</t>
<t tx="ekr.20060513122613.17" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#if USE_OPENGL &gt;= 5
	@others
#endif</t>
<t tx="ekr.20060513122613.18" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#ifdef GL_DEFS
#define GL_BUFFER_SIZE                    0x8764
#define GL_BUFFER_USAGE                   0x8765
#define GL_QUERY_COUNTER_BITS             0x8864
#define GL_CURRENT_QUERY                  0x8865
#define GL_QUERY_RESULT                   0x8866
#define GL_QUERY_RESULT_AVAILABLE         0x8867
#define GL_ARRAY_BUFFER                   0x8892
#define GL_ELEMENT_ARRAY_BUFFER           0x8893
#define GL_ARRAY_BUFFER_BINDING           0x8894
#define GL_ELEMENT_ARRAY_BUFFER_BINDING   0x8895
#define GL_VERTEX_ARRAY_BUFFER_BINDING    0x8896
#define GL_NORMAL_ARRAY_BUFFER_BINDING    0x8897
#define GL_COLOR_ARRAY_BUFFER_BINDING     0x8898
#define GL_INDEX_ARRAY_BUFFER_BINDING     0x8899
#define GL_TEXTURE_COORD_ARRAY_BUFFER_BINDING 0x889A
#define GL_EDGE_FLAG_ARRAY_BUFFER_BINDING 0x889B
#define GL_SECONDARY_COLOR_ARRAY_BUFFER_BINDING 0x889C
#define GL_FOG_COORDINATE_ARRAY_BUFFER_BINDING 0x889D
#define GL_WEIGHT_ARRAY_BUFFER_BINDING    0x889E
#define GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING 0x889F
#define GL_READ_ONLY                      0x88B8
#define GL_WRITE_ONLY                     0x88B9
#define GL_READ_WRITE                     0x88BA
#define GL_BUFFER_ACCESS                  0x88BB
#define GL_BUFFER_MAPPED                  0x88BC
#define GL_BUFFER_MAP_POINTER             0x88BD
#define GL_STREAM_DRAW                    0x88E0
#define GL_STREAM_READ                    0x88E1
#define GL_STREAM_COPY                    0x88E2
#define GL_STATIC_DRAW                    0x88E4
#define GL_STATIC_READ                    0x88E5
#define GL_STATIC_COPY                    0x88E6
#define GL_DYNAMIC_DRAW                   0x88E8
#define GL_DYNAMIC_READ                   0x88E9
#define GL_DYNAMIC_COPY                   0x88EA
#define GL_SAMPLES_PASSED                 0x8914
#define GL_FOG_COORD_SOURCE               GL_FOG_COORDINATE_SOURCE
#define GL_FOG_COORD                      GL_FOG_COORDINATE
#define GL_CURRENT_FOG_COORD              GL_CURRENT_FOG_COORDINATE
#define GL_FOG_COORD_ARRAY_TYPE           GL_FOG_COORDINATE_ARRAY_TYPE
#define GL_FOG_COORD_ARRAY_STRIDE         GL_FOG_COORDINATE_ARRAY_STRIDE
#define GL_FOG_COORD_ARRAY_POINTER        GL_FOG_COORDINATE_ARRAY_POINTER
#define GL_FOG_COORD_ARRAY                GL_FOG_COORDINATE_ARRAY
#define GL_FOG_COORD_ARRAY_BUFFER_BINDING GL_FOG_COORDINATE_ARRAY_BUFFER_BINDING
#define GL_SRC0_RGB                       GL_SOURCE0_RGB
#define GL_SRC1_RGB                       GL_SOURCE1_RGB
#define GL_SRC2_RGB                       GL_SOURCE2_RGB
#define GL_SRC0_ALPHA                     GL_SOURCE0_ALPHA
#define GL_SRC1_ALPHA                     GL_SOURCE1_ALPHA
#define GL_SRC2_ALPHA                     GL_SOURCE2_ALPHA
#endif</t>
<t tx="ekr.20060513122613.19" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#ifndef GL_DEFS
GL_EXT(void,glGenQueries,(GLsizei,GLuint *))
GL_EXT(void,glDeleteQueries,(GLsizei,const GLuint *))
GL_EXT(GLboolean,glIsQuery,(GLuint))
GL_EXT(void,glBeginQuery,(GLenum,GLuint))
GL_EXT(void,glEndQuery,(GLenum))
GL_EXT(void,glGetQueryiv,(GLenum,GLenum,GLint *))
GL_EXT(void,glGetQueryObjectiv,(GLuint,GLenum,GLint *))
GL_EXT(void,glGetQueryObjectuiv,(GLuint,GLenum,GLuint *))
GL_EXT(void,glBindBuffer,(GLenum,GLuint))
GL_EXT(void,glDeleteBuffers,(GLsizei,const GLuint *))
GL_EXT(void,glGenBuffers,(GLsizei,GLuint *))
GL_EXT(GLboolean,glIsBuffer,(GLuint))
GL_EXT(void,glBufferData,(GLenum,GLsizeiptr,const GLvoid *,GLenum))
GL_EXT(void,glBufferSubData,(GLenum,GLintptr,GLsizeiptr,const GLvoid *))
GL_EXT(void,glGetBufferSubData,(GLenum,GLintptr,GLsizeiptr,GLvoid *))
GL_EXT(GLvoid*,glMapBuffer,(GLenum,GLenum))
GL_EXT(GLboolean,glUnmapBuffer,(GLenum))
GL_EXT(void,glGetBufferParameteriv,(GLenum,GLenum,GLint *))
GL_EXT(void,glGetBufferPointerv,(GLenum,GLenum,GLvoid* *))
#endif</t>
<t tx="ekr.20060513122613.2" xcc_cfg="7d710028580a00000045786563757461626c6571017d710228580a000000446c6c2063616c6c65727103580000000071045813000000457865637574696f6e20617267756d656e747371056804755804000000436f64657106680458070000004144445f4c4f477107680458050000005469746c65710868045808000000446562756767657271097d710a28580e0000004964656e7469667920627265616b710b6804580f00000054617267657420706964207461736b710c680458080000005069706520656f6c710d68045809000000417267756d656e7473710e6804580e00000050726f6d7074207061747465726e710f6804580e0000005175657279206c6f636174696f6e71106804580800000046696e642070696471116804580b000000436c65617220627265616b7112680458080000004576616c7561746571136804580400000053746f707114680458040000005374657071156804580b0000004c69737420627265616b737116680458040000005461736b71176804580f000000427265616b20646574656374696f6e71186804580800000053746570206f757471196804580900000053657420627265616b711a6804580d00000046696e64206c6f636174696f6e711b680458070000005374657020696e711c6804680968045812000000526567756c61722065787072657373696f6e711d68045808000000436f6e74696e7565711e68045802000000476f711f6804580c00000053746172747570207461736b71206804580900000053746570206f766572712158040000006e65787471227558070000005345545f4c4f47712368045806000000494e495445447124580400000054727565712558070000004f7074696f6e7371267d712728580b00000058636320766572626f73657128580500000046616c73657129580700000045786563757465712a580500000046616c7365712b580c0000004372656174652066696c6573712c580400000054727565712d58100000005365656b20627265616b706f696e7473712e580500000046616c7365712f580f000000436f6e6e65637420746f20706970657130580500000046616c736571315807000000436f6d70696c657132580500000046616c73657133580d00000046696c746572206f75747075747134580500000046616c7365713558130000004175746f20696e636c756465206865616465727136580500000046616c73657137580500000044656275677138580500000046616c7365713958100000005365656b206669727374206572726f72713a580500000046616c7365713b580c000000436f6c6f72697a65206c6f67713c580500000046616c7365713d755808000000436f6d70696c6572713e7d713f285814000000496e636c7564652073656172636820706174687371406804580f0000004572726f7220646574656374696f6e71416804580b000000557365206c69627261727971426804580e00000055736564206c696272617269657371436804580f000000446562756720617267756d656e747371446804580d000000436865636b2073796e7461786571456804580c0000004c696272617279207061746871466804680e680458090000004275696c6420646c6c714768045807000000557365207063687148680458090000004275696c64206578657149680458140000004c69627261727920736561726368207061746873714a6804580c000000496e636c7564652070617468714b6804580b000000436f6d70696c6520706368714c6804683e680475752e">@language c++

</t>
<t tx="ekr.20060513122613.20" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#ifndef GL_DEFS
WGL_PROC(BOOL,wglCopyContext,(HGLRC,HGLRC,UINT))
WGL_PROC(HGLRC,wglCreateContext,(HDC))
WGL_PROC(HGLRC,wglCreateLayerContext,(HDC,int))
WGL_PROC(BOOL,wglDeleteContext,(HGLRC))
WGL_PROC(HGLRC,wglGetCurrentContext,(VOID))
WGL_PROC(HDC,wglGetCurrentDC,(VOID))
WGL_PROC(PROC,wglGetProcAddress,(LPCSTR))
WGL_PROC(BOOL,wglMakeCurrent,(HDC,HGLRC))
WGL_PROC(BOOL,wglShareLists,(HGLRC,HGLRC))
WGL_PROC(BOOL,wglUseFontBitmapsA,(HDC,DWORD,DWORD,DWORD))
WGL_PROC(BOOL,wglUseFontBitmapsW,(HDC,DWORD,DWORD,DWORD))
WGL_PROC(BOOL,wglSwapBuffers,(HDC))
WGL_PROC(BOOL,wglUseFontOutlinesA,(HDC,DWORD,DWORD,DWORD,FLOAT,FLOAT,int,LPGLYPHMETRICSFLOAT))
WGL_PROC(BOOL,wglUseFontOutlinesW,(HDC,DWORD,DWORD,DWORD,FLOAT,FLOAT,int,LPGLYPHMETRICSFLOAT))
WGL_PROC(BOOL,wglDescribeLayerPlane,(HDC,int,int,UINT,LPLAYERPLANEDESCRIPTOR))
WGL_PROC(int,wglSetLayerPaletteEntries,(HDC,int,int,int,CONST COLORREF *))
WGL_PROC(int,wglGetLayerPaletteEntries,(HDC,int,int,int,COLORREF *))
WGL_PROC(BOOL,wglRealizeLayerPalette,(HDC,int,BOOL))
WGL_PROC(BOOL,wglSwapLayerBuffers,(HDC,UINT))
#if (WINVER &gt;= 0x0500)
	WGL_PROC(DWORD,SwapMultipleBuffers,(UINT,CONST WGLSWAP *))
#endif
#endif
</t>
<t tx="ekr.20060513122613.21" xcc_cfg="7d710028580a00000045786563757461626c6571017d710228580a000000446c6c2063616c6c65727103580000000071045813000000457865637574696f6e20617267756d656e747371056804755804000000436f64657106680458070000004144445f4c4f477107680458050000005469746c6571085810000000636c5f6364625f77696e33325f657865710958050000005761746368710a5d710b580100000061710c61580b000000427265616b706f696e7473710d7d710e2858050000006370703a38710f5807000000456e61626c6564711058060000006370703a3138711168107558070000005345545f4c4f47711268045806000000494e4954454471135804000000547275657114580b000000427265616b506f696e747371157d71162858060000006370703a313571175807000000456e61626c6564711858060000006370703a313371195807000000456e61626c6564711a7558070000004f7074696f6e73711b7d711c28580b00000058636320766572626f7365711d580400000054727565711e580700000045786563757465711f580500000046616c73657120580c0000004372656174652066696c65737121580400000054727565712258100000005365656b20627265616b706f696e747371235804000000547275657124580f000000436f6e6e65637420746f2070697065712568045807000000436f6d70696c6571265804000000547275657127580d00000046696c746572206f75747075747128580500000046616c7365712958130000004175746f20696e636c75646520686561646572712a580400000054727565712b58050000004465627567712c580400000054727565712d58100000005365656b206669727374206572726f72712e580500000046616c7365712f755808000000446562756767657271307d713128580e0000004964656e7469667920627265616b7132582700000020283f503c49443e5b302d395d2b29202e2b5f46494c455f282040207c3a295f4c494e455f2e2b7133580f00000054617267657420706964207461736b713458090000002e746c697374202d63713558080000005069706520656f6c713658040000005c6e5c7271375809000000417267756d656e74737138585c0000002d6c696e6573202d47202d320a2d7372637061746820225f414253504154485f220a2d7920227372762a5f414253504154485f220a2d6920225f414253504154485f220a225f414253504154485f5c5c5f4e414d455f2e657865220a7139580e00000050726f6d7074207061747465726e713a58010000003e713b580e0000005175657279206c6f636174696f6e713c58090000006c732e203b206c7363713d580800000046696e6420706964713e5821000000306e283f503c5049443e5b302d395d2b29202e2a5f4e414d455f5c2e5f4558545f713f580b000000436c65617220627265616b714058070000006263205f49445f714158080000004576616c75617465714258020000003f3f7143580400000053746f707144580100000071714558040000005374657071465801000000707147580b0000004c69737420627265616b7371485802000000626c714958040000005461736b714a6804580f000000427265616b20646574656374696f6e714b5816000000427265616b706f696e74205b302d395d2b206869740a714c580800000053746570206f7574714d58020000006775714e580900000053657420627265616b714f5812000000627020605f46494c455f3a5f4c494e455f607150580d00000046696e64206c6f636174696f6e7151583200000043757272656e743a202e2a5f4e414d455f5c2e283f503c4558543e2e2b295c28283f503c4c494e453e5b302d395d2b295c29715258070000005374657020696e715358010000007471546830581e000000433a5c53444b5c437573746f6d33325c77696e6462675c6364622e65786571555812000000526567756c61722065787072657373696f6e7156580c000000507265737320454e5445520a71575808000000436f6e74696e7565715858010000006771595802000000476f715a6859580c00000053746172747570207461736b715b582b0000007371653b6c2b2a3b206c7370202d61203120303b206c737020303b2062702077696e6d61696e3b2020670a715c580900000053746570206f766572715d58040000006e657874715e755808000000436f6d70696c6572715f7d7160285814000000496e636c7564652073656172636820706174687371615832000000433a5c53444b5c437573746f6d33325c696e636c7564650a433a5c53444b5c437573746f6d33325c696e636c75646533320a7162580f0000004572726f7220646574656374696f6e71635849000000283f503c46494c453e5b5e5c5c5d2b295c28283f503c4c494e453e5b302d395d2b295c29203a206572726f7220283f503c49443e435b302d395d2b293a20283f503c4445463e2e2b297164580b000000557365206c6962726172797165580c0000002f44454641554c544c49423a7166580e00000055736564206c69627261726965737167580b0000007573657233322e6c69620a7168580f000000446562756720617267756d656e7473716958a5000000225f414253504154485f5c5f4e414d455f2e5f5352434558545f220a2f4665225f414253504154485f5c5f4e414d455f2e5f4558545f220a2f466f225f414253504154485f5c5f4e414d455f2e6f626a220a2f4664225f414253504154485f5c5f4e414d455f220a5f494e4350415448535f0a5f4255494c445f640a2f6e6f6c6f676f0a2f5a690a2f6c696e6b0a5f4c494250415448535f0a5f4c49425241524945535f0a716a580d000000436865636b2073796e74617865716b58030000002f5a73716c580c0000004c6962726172792070617468716d58090000002f4c4942504154483a716e6838588a000000225f414253504154485f5c5f4e414d455f2e5f5352434558545f220a2f4665225f414253504154485f5c5f4e414d455f2e5f4558545f220a2f466f225f414253504154485f5c5f4e414d455f2e6f626a220a5f494e4350415448535f0a5f4255494c445f0a2f6e6f6c6f676f0a2f6c696e6b0a5f4c494250415448535f0a5f4c49425241524945535f0a716f58090000004275696c6420646c6c717058030000002f4c447171580700000055736520706368717258030000002f5975717358090000004275696c6420657865717458030000002f4d4c717558140000004c696272617279207365617263682070617468737176582a000000433a5c53444b5c437573746f6d33325c6c69620a433a5c53444b5c437573746f6d33325c6c696233320a7177580c000000496e636c7564652070617468717858020000002f497179580b000000436f6d70696c6520706368717a58030000002f5963717b685f5816000000433a5c53444b5c437573746f6d33325c636c2e657865717c75752e">@language c++
</t>
<t tx="ekr.20060513122613.22" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e"></t>
<t tx="ekr.20060513122613.23" xcc_child_cfg="7d71002858100000004865616465724c696e654e756d626572710158010000003071025810000000536f757263654c696e654e756d62657271036802580b000000427265616b506f696e747371047d7105752e">#define WIN32_LEAN_AND_MEAN
#include &lt;windows.h&gt; // the main windows headers
#include &lt;windowsx.h&gt; // a lot of cool macros</t>
<t tx="ekr.20060513122613.24" xcc_child_cfg="7d71002858100000004865616465724c696e654e756d626572710158010000003571025810000000536f757263654c696e654e756d62657271035801000000347104580b000000427265616b506f696e747371057d71062858010000003171075807000000456e61626c65647108580200000031317109680875752e">char* a ="allo";
// call message box api with NULL for parent window handle
MessageBox(NULL, "THERE CAN BE ONLY ONE!!!",
"MY FIRST WINDOWS PROGRAM",
MB_OK | MB_ICONEXCLAMATION);
a="salut";
a="jean";
a="pierre";
a="pierre";
// exit program
return(0);

</t>
<t tx="ekr.20060513122613.25" xcc_cfg="7d710028580a00000045786563757461626c6571017d710228580a000000446c6c2063616c6c65727103580000000071045813000000457865637574696f6e20617267756d656e747371056804755804000000436f64657106680458070000004144445f4c4f477107680458050000005469746c657108580b0000006763635f6764625f657865710958050000005761746368710a5d710b580100000061710c61580b000000427265616b706f696e7473710d7d710e2858050000006370703a38710f5807000000456e61626c6564711058060000006370703a3138711168107558070000005345545f4c4f4771125811000000406c616e677561676520632b2b0a20430a71135806000000494e4954454471145804000000547275657115580b000000427265616b506f696e747371167d71172858050000006370703a3871185807000000456e61626c6564711958060000006370703a3135711a5807000000456e61626c6564711b58060000006370703a3132711c5807000000456e61626c6564711d7558070000004f7074696f6e73711e7d711f28580b00000058636320766572626f7365712058040000005472756571215807000000457865637574657122580500000046616c73657123580c0000004372656174652066696c65737124580400000054727565712558100000005365656b20627265616b706f696e747371265804000000547275657127580f000000436f6e6e65637420746f2070697065712868045807000000436f6d70696c657129580400000054727565712a580d00000046696c746572206f7574707574712b580500000046616c7365712c58130000004175746f20696e636c75646520686561646572712d580400000054727565712e58050000004465627567712f580400000054727565713058100000005365656b206669727374206572726f7271315804000000547275657132755808000000446562756767657271337d713428580e0000004964656e7469667920627265616b71356804580f00000054617267657420706964207461736b713658320000007368656c6c207461736b6c697374202f6e68202f66692022494d4147454e414d45206571205f4e414d455f2e5f4558545f22713758080000005069706520656f6c713858020000005c6e71395809000000417267756d656e7473713a5819000000225f414253504154485f5c5c5f4e414d455f2e65786522200a713b580e00000050726f6d7074207061747465726e713c58030000005b295d713d580e0000005175657279206c6f636174696f6e713e580100000066713f580800000046696e6420706964714058210000005f4e414d455f5c2e5f4558545f202b283f503c5049443e5b302d395d2b29202e2b7141580b000000436c65617220627265616b71425813000000636c656172205f46494c455f3a5f4c494e455f714358080000004576616c75617465714458060000007072696e74207145580400000053746f707146580100000071714758040000005374657071485804000000737465707149580b0000004c69737420627265616b73714a680458040000005461736b714b5802000000710a714c580f000000427265616b20646574656374696f6e714d5816000000427265616b706f696e74205b302d395d2b2c202e2b0a714e580800000053746570206f7574714f580600000066696e6973687150580900000053657420627265616b71515813000000627265616b205f46494c455f3a5f4c494e455f7152580d00000046696e64206c6f636174696f6e7153582800000061742e2b5f4e414d455f5c2e283f503c4558543e2e2b293a283f503c4c494e453e5b302d395d2b29715458070000005374657020696e7155580400000073746570715668335818000000433a5c53444b5c4d696e47575c62696e5c6764622e65786571575812000000526567756c61722065787072657373696f6e7158580f00000050726f6772616d206578697465640a71595808000000436f6e74696e7565715a5808000000636f6e74696e7565715b5802000000476f715c580300000072756e715d580c00000053746172747570207461736b715e582e000000627265616b206d61696e0a736574206c69737473697a6520310a73657420636f6e6669726d206f66660a72756e0a715f580900000053746570206f766572716058040000006e6578747161755808000000436f6d70696c657271627d7163285814000000496e636c7564652073656172636820706174687371645815000000433a5c53444b5c4d696e47575c696e636c7564650a7165580f0000004572726f7220646574656374696f6e71665849000000283f503c46494c453e5b5e5c5c5d2b295c28283f503c4c494e453e5b302d395d2b295c29203a206572726f7220283f503c49443e435b302d395d2b293a20283f503c4445463e2e2b297167580b000000557365206c696272617279716858020000002d6c7169580e00000055736564206c6962726172696573716a6804580f000000446562756720617267756d656e7473716b585c000000225f414253504154485f5c5f4e414d455f2e5f5352434558545f220a2d6f225f414253504154485f5c5f4e414d455f2e5f4558545f220a5f494e4350415448535f0a2d670a5f4c494250415448535f0a5f4c49425241524945535f0a716c580d000000436865636b2073796e74617865716d58030000002f5a73716e580c0000004c6962726172792070617468716f58020000002d4c7170683a5859000000225f414253504154485f5c5f4e414d455f2e5f5352434558545f220a2d6f225f414253504154485f5c5f4e414d455f2e5f4558545f220a5f494e4350415448535f0a5f4c494250415448535f0a5f4c49425241524945535f0a717158090000004275696c6420646c6c717258030000002f4c447173580700000055736520706368717458030000002f5975717558090000004275696c6420657865717658030000002f4d4c717758140000004c6962726172792073656172636820706174687371785811000000433a5c53444b5c4d696e47575c6c69620a7179580c000000496e636c7564652070617468717a58020000002d49717b580b000000436f6d70696c6520706368717c58030000002f5963717d68625818000000433a5c53444b5c4d696e47575c62696e5c6763632e657865717e75752e">@language c++
</t>
<t tx="ekr.20060513122613.3" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#ifndef USE_OPENGL
	#define USE_OPENGL 1
#endif</t>
<t tx="ekr.20060513122613.4" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#ifdef GL_DEFS
typedef unsigned int GLenum;
typedef unsigned char GLboolean;
typedef unsigned int GLbitfield;
typedef signed char GLbyte;
typedef short GLshort;
typedef int GLint;
typedef int GLsizei;
typedef unsigned char GLubyte;
typedef unsigned short GLushort;
typedef unsigned int GLuint;
typedef float GLfloat;
typedef float GLclampf;
typedef double GLdouble;
typedef double GLclampd;
typedef void GLvoid;
typedef unsigned int GLintptr;
typedef unsigned int GLsizeiptr;
#endif</t>
<t tx="ekr.20060513122613.5" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#if USE_OPENGL &gt;= 1
	@others
#endif</t>
<t tx="ekr.20060513122613.6" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#ifdef GL_DEFS
#define GL_VERSION_1_1                    1
#define GL_ACCUM                          0x0100
#define GL_LOAD                           0x0101
#define GL_RETURN                         0x0102
#define GL_MULT                           0x0103
#define GL_ADD                            0x0104
#define GL_NEVER                          0x0200
#define GL_LESS                           0x0201
#define GL_EQUAL                          0x0202
#define GL_LEQUAL                         0x0203
#define GL_GREATER                        0x0204
#define GL_NOTEQUAL                       0x0205
#define GL_GEQUAL                         0x0206
#define GL_ALWAYS                         0x0207
#define GL_CURRENT_BIT                    0x00000001
#define GL_POINT_BIT                      0x00000002
#define GL_LINE_BIT                       0x00000004
#define GL_POLYGON_BIT                    0x00000008
#define GL_POLYGON_STIPPLE_BIT            0x00000010
#define GL_PIXEL_MODE_BIT                 0x00000020
#define GL_LIGHTING_BIT                   0x00000040
#define GL_FOG_BIT                        0x00000080
#define GL_DEPTH_BUFFER_BIT               0x00000100
#define GL_ACCUM_BUFFER_BIT               0x00000200
#define GL_STENCIL_BUFFER_BIT             0x00000400
#define GL_VIEWPORT_BIT                   0x00000800
#define GL_TRANSFORM_BIT                  0x00001000
#define GL_ENABLE_BIT                     0x00002000
#define GL_COLOR_BUFFER_BIT               0x00004000
#define GL_HINT_BIT                       0x00008000
#define GL_EVAL_BIT                       0x00010000
#define GL_LIST_BIT                       0x00020000
#define GL_TEXTURE_BIT                    0x00040000
#define GL_SCISSOR_BIT                    0x00080000
#define GL_ALL_ATTRIB_BITS                0x000fffff
#define GL_POINTS                         0x0000
#define GL_LINES                          0x0001
#define GL_LINE_LOOP                      0x0002
#define GL_LINE_STRIP                     0x0003
#define GL_TRIANGLES                      0x0004
#define GL_TRIANGLE_STRIP                 0x0005
#define GL_TRIANGLE_FAN                   0x0006
#define GL_QUADS                          0x0007
#define GL_QUAD_STRIP                     0x0008
#define GL_POLYGON                        0x0009
#define GL_ZERO                           0
#define GL_ONE                            1
#define GL_SRC_COLOR                      0x0300
#define GL_ONE_MINUS_SRC_COLOR            0x0301
#define GL_SRC_ALPHA                      0x0302
#define GL_ONE_MINUS_SRC_ALPHA            0x0303
#define GL_DST_ALPHA                      0x0304
#define GL_ONE_MINUS_DST_ALPHA            0x0305
#define GL_DST_COLOR                      0x0306
#define GL_ONE_MINUS_DST_COLOR            0x0307
#define GL_SRC_ALPHA_SATURATE             0x0308
#define GL_TRUE                           1
#define GL_FALSE                          0
#define GL_CLIP_PLANE0                    0x3000
#define GL_CLIP_PLANE1                    0x3001
#define GL_CLIP_PLANE2                    0x3002
#define GL_CLIP_PLANE3                    0x3003
#define GL_CLIP_PLANE4                    0x3004
#define GL_CLIP_PLANE5                    0x3005
#define GL_BYTE                           0x1400
#define GL_UNSIGNED_BYTE                  0x1401
#define GL_SHORT                          0x1402
#define GL_UNSIGNED_SHORT                 0x1403
#define GL_INT                            0x1404
#define GL_UNSIGNED_INT                   0x1405
#define GL_FLOAT                          0x1406
#define GL_2_BYTES                        0x1407
#define GL_3_BYTES                        0x1408
#define GL_4_BYTES                        0x1409
#define GL_DOUBLE                         0x140A
#define GL_NONE                           0
#define GL_FRONT_LEFT                     0x0400
#define GL_FRONT_RIGHT                    0x0401
#define GL_BACK_LEFT                      0x0402
#define GL_BACK_RIGHT                     0x0403
#define GL_FRONT                          0x0404
#define GL_BACK                           0x0405
#define GL_LEFT                           0x0406
#define GL_RIGHT                          0x0407
#define GL_FRONT_AND_BACK                 0x0408
#define GL_AUX0                           0x0409
#define GL_AUX1                           0x040A
#define GL_AUX2                           0x040B
#define GL_AUX3                           0x040C
#define GL_NO_ERROR                       0
#define GL_INVALID_ENUM                   0x0500
#define GL_INVALID_VALUE                  0x0501
#define GL_INVALID_OPERATION              0x0502
#define GL_STACK_OVERFLOW                 0x0503
#define GL_STACK_UNDERFLOW                0x0504
#define GL_OUT_OF_MEMORY                  0x0505
#define GL_2D                             0x0600
#define GL_3D                             0x0601
#define GL_3D_COLOR                       0x0602
#define GL_3D_COLOR_TEXTURE               0x0603
#define GL_4D_COLOR_TEXTURE               0x0604
#define GL_PASS_THROUGH_TOKEN             0x0700
#define GL_POINT_TOKEN                    0x0701
#define GL_LINE_TOKEN                     0x0702
#define GL_POLYGON_TOKEN                  0x0703
#define GL_BITMAP_TOKEN                   0x0704
#define GL_DRAW_PIXEL_TOKEN               0x0705
#define GL_COPY_PIXEL_TOKEN               0x0706
#define GL_LINE_RESET_TOKEN               0x0707
#define GL_EXP                            0x0800
#define GL_EXP2                           0x0801
#define GL_CW                             0x0900
#define GL_CCW                            0x0901
#define GL_COEFF                          0x0A00
#define GL_ORDER                          0x0A01
#define GL_DOMAIN                         0x0A02
#define GL_CURRENT_COLOR                  0x0B00
#define GL_CURRENT_INDEX                  0x0B01
#define GL_CURRENT_NORMAL                 0x0B02
#define GL_CURRENT_TEXTURE_COORDS         0x0B03
#define GL_CURRENT_RASTER_COLOR           0x0B04
#define GL_CURRENT_RASTER_INDEX           0x0B05
#define GL_CURRENT_RASTER_TEXTURE_COORDS  0x0B06
#define GL_CURRENT_RASTER_POSITION        0x0B07
#define GL_CURRENT_RASTER_POSITION_VALID  0x0B08
#define GL_CURRENT_RASTER_DISTANCE        0x0B09
#define GL_POINT_SMOOTH                   0x0B10
#define GL_POINT_SIZE                     0x0B11
#define GL_POINT_SIZE_RANGE               0x0B12
#define GL_POINT_SIZE_GRANULARITY         0x0B13
#define GL_LINE_SMOOTH                    0x0B20
#define GL_LINE_WIDTH                     0x0B21
#define GL_LINE_WIDTH_RANGE               0x0B22
#define GL_LINE_WIDTH_GRANULARITY         0x0B23
#define GL_LINE_STIPPLE                   0x0B24
#define GL_LINE_STIPPLE_PATTERN           0x0B25
#define GL_LINE_STIPPLE_REPEAT            0x0B26
#define GL_LIST_MODE                      0x0B30
#define GL_MAX_LIST_NESTING               0x0B31
#define GL_LIST_BASE                      0x0B32
#define GL_LIST_INDEX                     0x0B33
#define GL_POLYGON_MODE                   0x0B40
#define GL_POLYGON_SMOOTH                 0x0B41
#define GL_POLYGON_STIPPLE                0x0B42
#define GL_EDGE_FLAG                      0x0B43
#define GL_CULL_FACE                      0x0B44
#define GL_CULL_FACE_MODE                 0x0B45
#define GL_FRONT_FACE                     0x0B46
#define GL_LIGHTING                       0x0B50
#define GL_LIGHT_MODEL_LOCAL_VIEWER       0x0B51
#define GL_LIGHT_MODEL_TWO_SIDE           0x0B52
#define GL_LIGHT_MODEL_AMBIENT            0x0B53
#define GL_SHADE_MODEL                    0x0B54
#define GL_COLOR_MATERIAL_FACE            0x0B55
#define GL_COLOR_MATERIAL_PARAMETER       0x0B56
#define GL_COLOR_MATERIAL                 0x0B57
#define GL_FOG                            0x0B60
#define GL_FOG_INDEX                      0x0B61
#define GL_FOG_DENSITY                    0x0B62
#define GL_FOG_START                      0x0B63
#define GL_FOG_END                        0x0B64
#define GL_FOG_MODE                       0x0B65
#define GL_FOG_COLOR                      0x0B66
#define GL_DEPTH_RANGE                    0x0B70
#define GL_DEPTH_TEST                     0x0B71
#define GL_DEPTH_WRITEMASK                0x0B72
#define GL_DEPTH_CLEAR_VALUE              0x0B73
#define GL_DEPTH_FUNC                     0x0B74
#define GL_ACCUM_CLEAR_VALUE              0x0B80
#define GL_STENCIL_TEST                   0x0B90
#define GL_STENCIL_CLEAR_VALUE            0x0B91
#define GL_STENCIL_FUNC                   0x0B92
#define GL_STENCIL_VALUE_MASK             0x0B93
#define GL_STENCIL_FAIL                   0x0B94
#define GL_STENCIL_PASS_DEPTH_FAIL        0x0B95
#define GL_STENCIL_PASS_DEPTH_PASS        0x0B96
#define GL_STENCIL_REF                    0x0B97
#define GL_STENCIL_WRITEMASK              0x0B98
#define GL_MATRIX_MODE                    0x0BA0
#define GL_NORMALIZE                      0x0BA1
#define GL_VIEWPORT                       0x0BA2
#define GL_MODELVIEW_STACK_DEPTH          0x0BA3
#define GL_PROJECTION_STACK_DEPTH         0x0BA4
#define GL_TEXTURE_STACK_DEPTH            0x0BA5
#define GL_MODELVIEW_MATRIX               0x0BA6
#define GL_PROJECTION_MATRIX              0x0BA7
#define GL_TEXTURE_MATRIX                 0x0BA8
#define GL_ATTRIB_STACK_DEPTH             0x0BB0
#define GL_CLIENT_ATTRIB_STACK_DEPTH      0x0BB1
#define GL_ALPHA_TEST                     0x0BC0
#define GL_ALPHA_TEST_FUNC                0x0BC1
#define GL_ALPHA_TEST_REF                 0x0BC2
#define GL_DITHER                         0x0BD0
#define GL_BLEND_DST                      0x0BE0
#define GL_BLEND_SRC                      0x0BE1
#define GL_BLEND                          0x0BE2
#define GL_LOGIC_OP_MODE                  0x0BF0
#define GL_INDEX_LOGIC_OP                 0x0BF1
#define GL_COLOR_LOGIC_OP                 0x0BF2
#define GL_AUX_BUFFERS                    0x0C00
#define GL_DRAW_BUFFER                    0x0C01
#define GL_READ_BUFFER                    0x0C02
#define GL_SCISSOR_BOX                    0x0C10
#define GL_SCISSOR_TEST                   0x0C11
#define GL_INDEX_CLEAR_VALUE              0x0C20
#define GL_INDEX_WRITEMASK                0x0C21
#define GL_COLOR_CLEAR_VALUE              0x0C22
#define GL_COLOR_WRITEMASK                0x0C23
#define GL_INDEX_MODE                     0x0C30
#define GL_RGBA_MODE                      0x0C31
#define GL_DOUBLEBUFFER                   0x0C32
#define GL_STEREO                         0x0C33
#define GL_RENDER_MODE                    0x0C40
#define GL_PERSPECTIVE_CORRECTION_HINT    0x0C50
#define GL_POINT_SMOOTH_HINT              0x0C51
#define GL_LINE_SMOOTH_HINT               0x0C52
#define GL_POLYGON_SMOOTH_HINT            0x0C53
#define GL_FOG_HINT                       0x0C54
#define GL_TEXTURE_GEN_S                  0x0C60
#define GL_TEXTURE_GEN_T                  0x0C61
#define GL_TEXTURE_GEN_R                  0x0C62
#define GL_TEXTURE_GEN_Q                  0x0C63
#define GL_PIXEL_MAP_I_TO_I               0x0C70
#define GL_PIXEL_MAP_S_TO_S               0x0C71
#define GL_PIXEL_MAP_I_TO_R               0x0C72
#define GL_PIXEL_MAP_I_TO_G               0x0C73
#define GL_PIXEL_MAP_I_TO_B               0x0C74
#define GL_PIXEL_MAP_I_TO_A               0x0C75
#define GL_PIXEL_MAP_R_TO_R               0x0C76
#define GL_PIXEL_MAP_G_TO_G               0x0C77
#define GL_PIXEL_MAP_B_TO_B               0x0C78
#define GL_PIXEL_MAP_A_TO_A               0x0C79
#define GL_PIXEL_MAP_I_TO_I_SIZE          0x0CB0
#define GL_PIXEL_MAP_S_TO_S_SIZE          0x0CB1
#define GL_PIXEL_MAP_I_TO_R_SIZE          0x0CB2
#define GL_PIXEL_MAP_I_TO_G_SIZE          0x0CB3
#define GL_PIXEL_MAP_I_TO_B_SIZE          0x0CB4
#define GL_PIXEL_MAP_I_TO_A_SIZE          0x0CB5
#define GL_PIXEL_MAP_R_TO_R_SIZE          0x0CB6
#define GL_PIXEL_MAP_G_TO_G_SIZE          0x0CB7
#define GL_PIXEL_MAP_B_TO_B_SIZE          0x0CB8
#define GL_PIXEL_MAP_A_TO_A_SIZE          0x0CB9
#define GL_UNPACK_SWAP_BYTES              0x0CF0
#define GL_UNPACK_LSB_FIRST               0x0CF1
#define GL_UNPACK_ROW_LENGTH              0x0CF2
#define GL_UNPACK_SKIP_ROWS               0x0CF3
#define GL_UNPACK_SKIP_PIXELS             0x0CF4
#define GL_UNPACK_ALIGNMENT               0x0CF5
#define GL_PACK_SWAP_BYTES                0x0D00
#define GL_PACK_LSB_FIRST                 0x0D01
#define GL_PACK_ROW_LENGTH                0x0D02
#define GL_PACK_SKIP_ROWS                 0x0D03
#define GL_PACK_SKIP_PIXELS               0x0D04
#define GL_PACK_ALIGNMENT                 0x0D05
#define GL_MAP_COLOR                      0x0D10
#define GL_MAP_STENCIL                    0x0D11
#define GL_INDEX_SHIFT                    0x0D12
#define GL_INDEX_OFFSET                   0x0D13
#define GL_RED_SCALE                      0x0D14
#define GL_RED_BIAS                       0x0D15
#define GL_ZOOM_X                         0x0D16
#define GL_ZOOM_Y                         0x0D17
#define GL_GREEN_SCALE                    0x0D18
#define GL_GREEN_BIAS                     0x0D19
#define GL_BLUE_SCALE                     0x0D1A
#define GL_BLUE_BIAS                      0x0D1B
#define GL_ALPHA_SCALE                    0x0D1C
#define GL_ALPHA_BIAS                     0x0D1D
#define GL_DEPTH_SCALE                    0x0D1E
#define GL_DEPTH_BIAS                     0x0D1F
#define GL_MAX_EVAL_ORDER                 0x0D30
#define GL_MAX_LIGHTS                     0x0D31
#define GL_MAX_CLIP_PLANES                0x0D32
#define GL_MAX_TEXTURE_SIZE               0x0D33
#define GL_MAX_PIXEL_MAP_TABLE            0x0D34
#define GL_MAX_ATTRIB_STACK_DEPTH         0x0D35
#define GL_MAX_MODELVIEW_STACK_DEPTH      0x0D36
#define GL_MAX_NAME_STACK_DEPTH           0x0D37
#define GL_MAX_PROJECTION_STACK_DEPTH     0x0D38
#define GL_MAX_TEXTURE_STACK_DEPTH        0x0D39
#define GL_MAX_VIEWPORT_DIMS              0x0D3A
#define GL_MAX_CLIENT_ATTRIB_STACK_DEPTH  0x0D3B
#define GL_SUBPIXEL_BITS                  0x0D50
#define GL_INDEX_BITS                     0x0D51
#define GL_RED_BITS                       0x0D52
#define GL_GREEN_BITS                     0x0D53
#define GL_BLUE_BITS                      0x0D54
#define GL_ALPHA_BITS                     0x0D55
#define GL_DEPTH_BITS                     0x0D56
#define GL_STENCIL_BITS                   0x0D57
#define GL_ACCUM_RED_BITS                 0x0D58
#define GL_ACCUM_GREEN_BITS               0x0D59
#define GL_ACCUM_BLUE_BITS                0x0D5A
#define GL_ACCUM_ALPHA_BITS               0x0D5B
#define GL_NAME_STACK_DEPTH               0x0D70
#define GL_AUTO_NORMAL                    0x0D80
#define GL_MAP1_COLOR_4                   0x0D90
#define GL_MAP1_INDEX                     0x0D91
#define GL_MAP1_NORMAL                    0x0D92
#define GL_MAP1_TEXTURE_COORD_1           0x0D93
#define GL_MAP1_TEXTURE_COORD_2           0x0D94
#define GL_MAP1_TEXTURE_COORD_3           0x0D95
#define GL_MAP1_TEXTURE_COORD_4           0x0D96
#define GL_MAP1_VERTEX_3                  0x0D97
#define GL_MAP1_VERTEX_4                  0x0D98
#define GL_MAP2_COLOR_4                   0x0DB0
#define GL_MAP2_INDEX                     0x0DB1
#define GL_MAP2_NORMAL                    0x0DB2
#define GL_MAP2_TEXTURE_COORD_1           0x0DB3
#define GL_MAP2_TEXTURE_COORD_2           0x0DB4
#define GL_MAP2_TEXTURE_COORD_3           0x0DB5
#define GL_MAP2_TEXTURE_COORD_4           0x0DB6
#define GL_MAP2_VERTEX_3                  0x0DB7
#define GL_MAP2_VERTEX_4                  0x0DB8
#define GL_MAP1_GRID_DOMAIN               0x0DD0
#define GL_MAP1_GRID_SEGMENTS             0x0DD1
#define GL_MAP2_GRID_DOMAIN               0x0DD2
#define GL_MAP2_GRID_SEGMENTS             0x0DD3
#define GL_TEXTURE_1D                     0x0DE0
#define GL_TEXTURE_2D                     0x0DE1
#define GL_FEEDBACK_BUFFER_POINTER        0x0DF0
#define GL_FEEDBACK_BUFFER_SIZE           0x0DF1
#define GL_FEEDBACK_BUFFER_TYPE           0x0DF2
#define GL_SELECTION_BUFFER_POINTER       0x0DF3
#define GL_SELECTION_BUFFER_SIZE          0x0DF4
#define GL_TEXTURE_WIDTH                  0x1000
#define GL_TEXTURE_HEIGHT                 0x1001
#define GL_TEXTURE_INTERNAL_FORMAT        0x1003
#define GL_TEXTURE_BORDER_COLOR           0x1004
#define GL_TEXTURE_BORDER                 0x1005
#define GL_DONT_CARE                      0x1100
#define GL_FASTEST                        0x1101
#define GL_NICEST                         0x1102
#define GL_LIGHT0                         0x4000
#define GL_LIGHT1                         0x4001
#define GL_LIGHT2                         0x4002
#define GL_LIGHT3                         0x4003
#define GL_LIGHT4                         0x4004
#define GL_LIGHT5                         0x4005
#define GL_LIGHT6                         0x4006
#define GL_LIGHT7                         0x4007
#define GL_AMBIENT                        0x1200
#define GL_DIFFUSE                        0x1201
#define GL_SPECULAR                       0x1202
#define GL_POSITION                       0x1203
#define GL_SPOT_DIRECTION                 0x1204
#define GL_SPOT_EXPONENT                  0x1205
#define GL_SPOT_CUTOFF                    0x1206
#define GL_CONSTANT_ATTENUATION           0x1207
#define GL_LINEAR_ATTENUATION             0x1208
#define GL_QUADRATIC_ATTENUATION          0x1209
#define GL_COMPILE                        0x1300
#define GL_COMPILE_AND_EXECUTE            0x1301
#define GL_CLEAR                          0x1500
#define GL_AND                            0x1501
#define GL_AND_REVERSE                    0x1502
#define GL_COPY                           0x1503
#define GL_AND_INVERTED                   0x1504
#define GL_NOOP                           0x1505
#define GL_XOR                            0x1506
#define GL_OR                             0x1507
#define GL_NOR                            0x1508
#define GL_EQUIV                          0x1509
#define GL_INVERT                         0x150A
#define GL_OR_REVERSE                     0x150B
#define GL_COPY_INVERTED                  0x150C
#define GL_OR_INVERTED                    0x150D
#define GL_NAND                           0x150E
#define GL_SET                            0x150F
#define GL_EMISSION                       0x1600
#define GL_SHININESS                      0x1601
#define GL_AMBIENT_AND_DIFFUSE            0x1602
#define GL_COLOR_INDEXES                  0x1603
#define GL_MODELVIEW                      0x1700
#define GL_PROJECTION                     0x1701
#define GL_TEXTURE                        0x1702
#define GL_COLOR                          0x1800
#define GL_DEPTH                          0x1801
#define GL_STENCIL                        0x1802
#define GL_COLOR_INDEX                    0x1900
#define GL_STENCIL_INDEX                  0x1901
#define GL_DEPTH_COMPONENT                0x1902
#define GL_RED                            0x1903
#define GL_GREEN                          0x1904
#define GL_BLUE                           0x1905
#define GL_ALPHA                          0x1906
#define GL_RGB                            0x1907
#define GL_RGBA                           0x1908
#define GL_LUMINANCE                      0x1909
#define GL_LUMINANCE_ALPHA                0x190A
#define GL_BITMAP                         0x1A00
#define GL_POINT                          0x1B00
#define GL_LINE                           0x1B01
#define GL_FILL                           0x1B02
#define GL_RENDER                         0x1C00
#define GL_FEEDBACK                       0x1C01
#define GL_SELECT                         0x1C02
#define GL_FLAT                           0x1D00
#define GL_SMOOTH                         0x1D01
#define GL_KEEP                           0x1E00
#define GL_REPLACE                        0x1E01
#define GL_INCR                           0x1E02
#define GL_DECR                           0x1E03
#define GL_VENDOR                         0x1F00
#define GL_RENDERER                       0x1F01
#define GL_VERSION                        0x1F02
#define GL_EXTENSIONS                     0x1F03
#define GL_S                              0x2000
#define GL_T                              0x2001
#define GL_R                              0x2002
#define GL_Q                              0x2003
#define GL_MODULATE                       0x2100
#define GL_DECAL                          0x2101
#define GL_TEXTURE_ENV_MODE               0x2200
#define GL_TEXTURE_ENV_COLOR              0x2201
#define GL_TEXTURE_ENV                    0x2300
#define GL_EYE_LINEAR                     0x2400
#define GL_OBJECT_LINEAR                  0x2401
#define GL_SPHERE_MAP                     0x2402
#define GL_TEXTURE_GEN_MODE               0x2500
#define GL_OBJECT_PLANE                   0x2501
#define GL_EYE_PLANE                      0x2502
#define GL_NEAREST                        0x2600
#define GL_LINEAR                         0x2601
#define GL_NEAREST_MIPMAP_NEAREST         0x2700
#define GL_LINEAR_MIPMAP_NEAREST          0x2701
#define GL_NEAREST_MIPMAP_LINEAR          0x2702
#define GL_LINEAR_MIPMAP_LINEAR           0x2703
#define GL_TEXTURE_MAG_FILTER             0x2800
#define GL_TEXTURE_MIN_FILTER             0x2801
#define GL_TEXTURE_WRAP_S                 0x2802
#define GL_TEXTURE_WRAP_T                 0x2803
#define GL_CLAMP                          0x2900
#define GL_REPEAT                         0x2901
#define GL_CLIENT_PIXEL_STORE_BIT         0x00000001
#define GL_CLIENT_VERTEX_ARRAY_BIT        0x00000002
#define GL_CLIENT_ALL_ATTRIB_BITS         0xffffffff
#define GL_POLYGON_OFFSET_FACTOR          0x8038
#define GL_POLYGON_OFFSET_UNITS           0x2A00
#define GL_POLYGON_OFFSET_POINT           0x2A01
#define GL_POLYGON_OFFSET_LINE            0x2A02
#define GL_POLYGON_OFFSET_FILL            0x8037
#define GL_ALPHA4                         0x803B
#define GL_ALPHA8                         0x803C
#define GL_ALPHA12                        0x803D
#define GL_ALPHA16                        0x803E
#define GL_LUMINANCE4                     0x803F
#define GL_LUMINANCE8                     0x8040
#define GL_LUMINANCE12                    0x8041
#define GL_LUMINANCE16                    0x8042
#define GL_LUMINANCE4_ALPHA4              0x8043
#define GL_LUMINANCE6_ALPHA2              0x8044
#define GL_LUMINANCE8_ALPHA8              0x8045
#define GL_LUMINANCE12_ALPHA4             0x8046
#define GL_LUMINANCE12_ALPHA12            0x8047
#define GL_LUMINANCE16_ALPHA16            0x8048
#define GL_INTENSITY                      0x8049
#define GL_INTENSITY4                     0x804A
#define GL_INTENSITY8                     0x804B
#define GL_INTENSITY12                    0x804C
#define GL_INTENSITY16                    0x804D
#define GL_R3_G3_B2                       0x2A10
#define GL_RGB4                           0x804F
#define GL_RGB5                           0x8050
#define GL_RGB8                           0x8051
#define GL_RGB10                          0x8052
#define GL_RGB12                          0x8053
#define GL_RGB16                          0x8054
#define GL_RGBA2                          0x8055
#define GL_RGBA4                          0x8056
#define GL_RGB5_A1                        0x8057
#define GL_RGBA8                          0x8058
#define GL_RGB10_A2                       0x8059
#define GL_RGBA12                         0x805A
#define GL_RGBA16                         0x805B
#define GL_TEXTURE_RED_SIZE               0x805C
#define GL_TEXTURE_GREEN_SIZE             0x805D
#define GL_TEXTURE_BLUE_SIZE              0x805E
#define GL_TEXTURE_ALPHA_SIZE             0x805F
#define GL_TEXTURE_LUMINANCE_SIZE         0x8060
#define GL_TEXTURE_INTENSITY_SIZE         0x8061
#define GL_PROXY_TEXTURE_1D               0x8063
#define GL_PROXY_TEXTURE_2D               0x8064
#define GL_TEXTURE_PRIORITY               0x8066
#define GL_TEXTURE_RESIDENT               0x8067
#define GL_TEXTURE_BINDING_1D             0x8068
#define GL_TEXTURE_BINDING_2D             0x8069
#define GL_VERTEX_ARRAY                   0x8074
#define GL_NORMAL_ARRAY                   0x8075
#define GL_COLOR_ARRAY                    0x8076
#define GL_INDEX_ARRAY                    0x8077
#define GL_TEXTURE_COORD_ARRAY            0x8078
#define GL_EDGE_FLAG_ARRAY                0x8079
#define GL_VERTEX_ARRAY_SIZE              0x807A
#define GL_VERTEX_ARRAY_TYPE              0x807B
#define GL_VERTEX_ARRAY_STRIDE            0x807C
#define GL_NORMAL_ARRAY_TYPE              0x807E
#define GL_NORMAL_ARRAY_STRIDE            0x807F
#define GL_COLOR_ARRAY_SIZE               0x8081
#define GL_COLOR_ARRAY_TYPE               0x8082
#define GL_COLOR_ARRAY_STRIDE             0x8083
#define GL_INDEX_ARRAY_TYPE               0x8085
#define GL_INDEX_ARRAY_STRIDE             0x8086
#define GL_TEXTURE_COORD_ARRAY_SIZE       0x8088
#define GL_TEXTURE_COORD_ARRAY_TYPE       0x8089
#define GL_TEXTURE_COORD_ARRAY_STRIDE     0x808A
#define GL_EDGE_FLAG_ARRAY_STRIDE         0x808C
#define GL_VERTEX_ARRAY_POINTER           0x808E
#define GL_NORMAL_ARRAY_POINTER           0x808F
#define GL_COLOR_ARRAY_POINTER            0x8090
#define GL_INDEX_ARRAY_POINTER            0x8091
#define GL_TEXTURE_COORD_ARRAY_POINTER    0x8092
#define GL_EDGE_FLAG_ARRAY_POINTER        0x8093
#define GL_V2F                            0x2A20
#define GL_V3F                            0x2A21
#define GL_C4UB_V2F                       0x2A22
#define GL_C4UB_V3F                       0x2A23
#define GL_C3F_V3F                        0x2A24
#define GL_N3F_V3F                        0x2A25
#define GL_C4F_N3F_V3F                    0x2A26
#define GL_T2F_V3F                        0x2A27
#define GL_T4F_V4F                        0x2A28
#define GL_T2F_C4UB_V3F                   0x2A29
#define GL_T2F_C3F_V3F                    0x2A2A
#define GL_T2F_N3F_V3F                    0x2A2B
#define GL_T2F_C4F_N3F_V3F                0x2A2C
#define GL_T4F_C4F_N3F_V4F                0x2A2D
#endif</t>
<t tx="ekr.20060513122613.7" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#ifndef GL_DEFS
GL_PROC(void,glAccum,(GLenum op, GLfloat value))
GL_PROC(void,glAlphaFunc,(GLenum func, GLclampf ref))
GL_PROC(GLboolean,glAreTexturesResident,(GLsizei n, const GLuint *textures, GLboolean *residences))
GL_PROC(void,glArrayElement,(GLint i))
GL_PROC(void,glBegin,(GLenum mode))
GL_PROC(void,glBindTexture,(GLenum target, GLuint texture))
GL_PROC(void,glBitmap,(GLsizei width, GLsizei height, GLfloat xorig, GLfloat yorig, GLfloat xmove, GLfloat ymove, const GLubyte *bitmap))
GL_PROC(void,glBlendFunc,(GLenum sfactor, GLenum dfactor))
GL_PROC(void,glCallList,(GLuint list))
GL_PROC(void,glCallLists,(GLsizei n, GLenum type, const GLvoid *lists))
GL_PROC(void,glClear,(GLbitfield mask))
GL_PROC(void,glClearAccum,(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha))
GL_PROC(void,glClearColor,(GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha))
GL_PROC(void,glClearDepth,(GLclampd depth))
GL_PROC(void,glClearIndex,(GLfloat c))
GL_PROC(void,glClearStencil,(GLint s))
GL_PROC(void,glClipPlane,(GLenum plane, const GLdouble *equation))
GL_PROC(void,glColor3b,(GLbyte red, GLbyte green, GLbyte blue))
GL_PROC(void,glColor3bv,(const GLbyte *v))
GL_PROC(void,glColor3d,(GLdouble red, GLdouble green, GLdouble blue))
GL_PROC(void,glColor3dv,(const GLdouble *v))
GL_PROC(void,glColor3f,(GLfloat red, GLfloat green, GLfloat blue))
GL_PROC(void,glColor3fv,(const GLfloat *v))
GL_PROC(void,glColor3i,(GLint red, GLint green, GLint blue))
GL_PROC(void,glColor3iv,(const GLint *v))
GL_PROC(void,glColor3s,(GLshort red, GLshort green, GLshort blue))
GL_PROC(void,glColor3sv,(const GLshort *v))
GL_PROC(void,glColor3ub,(GLubyte red, GLubyte green, GLubyte blue))
GL_PROC(void,glColor3ubv,(const GLubyte *v))
GL_PROC(void,glColor3ui,(GLuint red, GLuint green, GLuint blue))
GL_PROC(void,glColor3uiv,(const GLuint *v))
GL_PROC(void,glColor3us,(GLushort red, GLushort green, GLushort blue))
GL_PROC(void,glColor3usv,(const GLushort *v))
GL_PROC(void,glColor4b,(GLbyte red, GLbyte green, GLbyte blue, GLbyte alpha))
GL_PROC(void,glColor4bv,(const GLbyte *v))
GL_PROC(void,glColor4d,(GLdouble red, GLdouble green, GLdouble blue, GLdouble alpha))
GL_PROC(void,glColor4dv,(const GLdouble *v))
GL_PROC(void,glColor4f,(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha))
GL_PROC(void,glColor4fv,(const GLfloat *v))
GL_PROC(void,glColor4i,(GLint red, GLint green, GLint blue, GLint alpha))
GL_PROC(void,glColor4iv,(const GLint *v))
GL_PROC(void,glColor4s,(GLshort red, GLshort green, GLshort blue, GLshort alpha))
GL_PROC(void,glColor4sv,(const GLshort *v))
GL_PROC(void,glColor4ub,(GLubyte red, GLubyte green, GLubyte blue, GLubyte alpha))
GL_PROC(void,glColor4ubv,(const GLubyte *v))
GL_PROC(void,glColor4ui,(GLuint red, GLuint green, GLuint blue, GLuint alpha))
GL_PROC(void,glColor4uiv,(const GLuint *v))
GL_PROC(void,glColor4us,(GLushort red, GLushort green, GLushort blue, GLushort alpha))
GL_PROC(void,glColor4usv,(const GLushort *v))
GL_PROC(void,glColorMask,(GLboolean red, GLboolean green, GLboolean blue, GLboolean alpha))
GL_PROC(void,glColorMaterial,(GLenum face, GLenum mode))
GL_PROC(void,glColorPointer,(GLint size, GLenum type, GLsizei stride, const GLvoid *pointer))
GL_PROC(void,glCopyPixels,(GLint x, GLint y, GLsizei width, GLsizei height, GLenum type))
GL_PROC(void,glCopyTexImage1D,(GLenum target, GLint level, GLenum internalFormat, GLint x, GLint y, GLsizei width, GLint border))
GL_PROC(void,glCopyTexImage2D,(GLenum target, GLint level, GLenum internalFormat, GLint x, GLint y, GLsizei width, GLsizei height, GLint border))
GL_PROC(void,glCopyTexSubImage1D,(GLenum target, GLint level, GLint xoffset, GLint x, GLint y, GLsizei width))
GL_PROC(void,glCopyTexSubImage2D,(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLint x, GLint y, GLsizei width, GLsizei height))
GL_PROC(void,glCullFace,(GLenum mode))
GL_PROC(void,glDeleteLists,(GLuint list, GLsizei range))
GL_PROC(void,glDeleteTextures,(GLsizei n, const GLuint *textures))
GL_PROC(void,glDepthFunc,(GLenum func))
GL_PROC(void,glDepthMask,(GLboolean flag))
GL_PROC(void,glDepthRange,(GLclampd zNear, GLclampd zFar))
GL_PROC(void,glDisable,(GLenum cap))
GL_PROC(void,glDisableClientState,(GLenum array))
GL_PROC(void,glDrawArrays,(GLenum mode, GLint first, GLsizei count))
GL_PROC(void,glDrawBuffer,(GLenum mode))
GL_PROC(void,glDrawElements,(GLenum mode, GLsizei count, GLenum type, const GLvoid *indices))
GL_PROC(void,glDrawPixels,(GLsizei width, GLsizei height, GLenum format, GLenum type, const GLvoid *pixels))
GL_PROC(void,glEdgeFlag,(GLboolean flag))
GL_PROC(void,glEdgeFlagPointer,(GLsizei stride, const GLvoid *pointer))
GL_PROC(void,glEdgeFlagv,(const GLboolean *flag))
GL_PROC(void,glEnable,(GLenum cap))
GL_PROC(void,glEnableClientState,(GLenum array))
GL_PROC(void,glEnd,(void))
GL_PROC(void,glEndList,(void))
GL_PROC(void,glEvalCoord1d,(GLdouble u))
GL_PROC(void,glEvalCoord1dv,(const GLdouble *u))
GL_PROC(void,glEvalCoord1f,(GLfloat u))
GL_PROC(void,glEvalCoord1fv,(const GLfloat *u))
GL_PROC(void,glEvalCoord2d,(GLdouble u, GLdouble v))
GL_PROC(void,glEvalCoord2dv,(const GLdouble *u))
GL_PROC(void,glEvalCoord2f,(GLfloat u, GLfloat v))
GL_PROC(void,glEvalCoord2fv,(const GLfloat *u))
GL_PROC(void,glEvalMesh1,(GLenum mode, GLint i1, GLint i2))
GL_PROC(void,glEvalMesh2,(GLenum mode, GLint i1, GLint i2, GLint j1, GLint j2))
GL_PROC(void,glEvalPoint1,(GLint i))
GL_PROC(void,glEvalPoint2,(GLint i, GLint j))
GL_PROC(void,glFeedbackBuffer,(GLsizei size, GLenum type, GLfloat *buffer))
GL_PROC(void,glFinish,(void))
GL_PROC(void,glFlush,(void))
GL_PROC(void,glFogf,(GLenum pname, GLfloat param))
GL_PROC(void,glFogfv,(GLenum pname, const GLfloat *params))
GL_PROC(void,glFogi,(GLenum pname, GLint param))
GL_PROC(void,glFogiv,(GLenum pname, const GLint *params))
GL_PROC(void,glFrontFace,(GLenum mode))
GL_PROC(void,glFrustum,(GLdouble left, GLdouble right, GLdouble bottom, GLdouble top, GLdouble zNear, GLdouble zFar))
GL_PROC(GLuint,glGenLists,(GLsizei range))
GL_PROC(void,glGenTextures,(GLsizei n, GLuint *textures))
GL_PROC(void,glGetBooleanv,(GLenum pname, GLboolean *params))
GL_PROC(void,glGetClipPlane,(GLenum plane, GLdouble *equation))
GL_PROC(void,glGetDoublev,(GLenum pname, GLdouble *params))
GL_PROC(GLenum,glGetError,(void))
GL_PROC(void,glGetFloatv,(GLenum pname, GLfloat *params))
GL_PROC(void,glGetIntegerv,(GLenum pname, GLint *params))
GL_PROC(void,glGetLightfv,(GLenum light, GLenum pname, GLfloat *params))
GL_PROC(void,glGetLightiv,(GLenum light, GLenum pname, GLint *params))
GL_PROC(void,glGetMapdv,(GLenum target, GLenum query, GLdouble *v))
GL_PROC(void,glGetMapfv,(GLenum target, GLenum query, GLfloat *v))
GL_PROC(void,glGetMapiv,(GLenum target, GLenum query, GLint *v))
GL_PROC(void,glGetMaterialfv,(GLenum face, GLenum pname, GLfloat *params))
GL_PROC(void,glGetMaterialiv,(GLenum face, GLenum pname, GLint *params))
GL_PROC(void,glGetPixelMapfv,(GLenum map, GLfloat *values))
GL_PROC(void,glGetPixelMapuiv,(GLenum map, GLuint *values))
GL_PROC(void,glGetPixelMapusv,(GLenum map, GLushort *values))
GL_PROC(void,glGetPointerv,(GLenum pname, GLvoid* *params))
GL_PROC(void,glGetPolygonStipple,(GLubyte *mask))
GL_PROC(const GLubyte *,glGetString,(GLenum name))
GL_PROC(void,glGetTexEnvfv,(GLenum target, GLenum pname, GLfloat *params))
GL_PROC(void,glGetTexEnviv,(GLenum target, GLenum pname, GLint *params))
GL_PROC(void,glGetTexGendv,(GLenum coord, GLenum pname, GLdouble *params))
GL_PROC(void,glGetTexGenfv,(GLenum coord, GLenum pname, GLfloat *params))
GL_PROC(void,glGetTexGeniv,(GLenum coord, GLenum pname, GLint *params))
GL_PROC(void,glGetTexImage,(GLenum target, GLint level, GLenum format, GLenum type, GLvoid *pixels))
GL_PROC(void,glGetTexLevelParameterfv,(GLenum target, GLint level, GLenum pname, GLfloat *params))
GL_PROC(void,glGetTexLevelParameteriv,(GLenum target, GLint level, GLenum pname, GLint *params))
GL_PROC(void,glGetTexParameterfv,(GLenum target, GLenum pname, GLfloat *params))
GL_PROC(void,glGetTexParameteriv,(GLenum target, GLenum pname, GLint *params))
GL_PROC(void,glHint,(GLenum target, GLenum mode))
GL_PROC(void,glIndexMask,(GLuint mask))
GL_PROC(void,glIndexPointer,(GLenum type, GLsizei stride, const GLvoid *pointer))
GL_PROC(void,glIndexd,(GLdouble c))
GL_PROC(void,glIndexdv,(const GLdouble *c))
GL_PROC(void,glIndexf,(GLfloat c))
GL_PROC(void,glIndexfv,(const GLfloat *c))
GL_PROC(void,glIndexi,(GLint c))
GL_PROC(void,glIndexiv,(const GLint *c))
GL_PROC(void,glIndexs,(GLshort c))
GL_PROC(void,glIndexsv,(const GLshort *c))
GL_PROC(void,glIndexub,(GLubyte c))
GL_PROC(void,glIndexubv,(const GLubyte *c))
GL_PROC(void,glInitNames,(void))
GL_PROC(void,glInterleavedArrays,(GLenum format, GLsizei stride, const GLvoid *pointer))
GL_PROC(GLboolean,glIsEnabled,(GLenum cap))
GL_PROC(GLboolean,glIsList,(GLuint list))
GL_PROC(GLboolean,glIsTexture,(GLuint texture))
GL_PROC(void,glLightModelf,(GLenum pname, GLfloat param))
GL_PROC(void,glLightModelfv,(GLenum pname, const GLfloat *params))
GL_PROC(void,glLightModeli,(GLenum pname, GLint param))
GL_PROC(void,glLightModeliv,(GLenum pname, const GLint *params))
GL_PROC(void,glLightf,(GLenum light, GLenum pname, GLfloat param))
GL_PROC(void,glLightfv,(GLenum light, GLenum pname, const GLfloat *params))
GL_PROC(void,glLighti,(GLenum light, GLenum pname, GLint param))
GL_PROC(void,glLightiv,(GLenum light, GLenum pname, const GLint *params))
GL_PROC(void,glLineStipple,(GLint factor, GLushort pattern))
GL_PROC(void,glLineWidth,(GLfloat width))
GL_PROC(void,glListBase,(GLuint base))
GL_PROC(void,glLoadIdentity,(void))
GL_PROC(void,glLoadMatrixd,(const GLdouble *m))
GL_PROC(void,glLoadMatrixf,(const GLfloat *m))
GL_PROC(void,glLoadName,(GLuint name))
GL_PROC(void,glLogicOp,(GLenum opcode))
GL_PROC(void,glMap1d,(GLenum target, GLdouble u1, GLdouble u2, GLint stride, GLint order, const GLdouble *points))
GL_PROC(void,glMap1f,(GLenum target, GLfloat u1, GLfloat u2, GLint stride, GLint order, const GLfloat *points))
GL_PROC(void,glMap2d,(GLenum target, GLdouble u1, GLdouble u2, GLint ustride, GLint uorder, GLdouble v1, GLdouble v2, GLint vstride, GLint vorder, const GLdouble *points))
GL_PROC(void,glMap2f,(GLenum target, GLfloat u1, GLfloat u2, GLint ustride, GLint uorder, GLfloat v1, GLfloat v2, GLint vstride, GLint vorder, const GLfloat *points))
GL_PROC(void,glMapGrid1d,(GLint un, GLdouble u1, GLdouble u2))
GL_PROC(void,glMapGrid1f,(GLint un, GLfloat u1, GLfloat u2))
GL_PROC(void,glMapGrid2d,(GLint un, GLdouble u1, GLdouble u2, GLint vn, GLdouble v1, GLdouble v2))
GL_PROC(void,glMapGrid2f,(GLint un, GLfloat u1, GLfloat u2, GLint vn, GLfloat v1, GLfloat v2))
GL_PROC(void,glMaterialf,(GLenum face, GLenum pname, GLfloat param))
GL_PROC(void,glMaterialfv,(GLenum face, GLenum pname, const GLfloat *params))
GL_PROC(void,glMateriali,(GLenum face, GLenum pname, GLint param))
GL_PROC(void,glMaterialiv,(GLenum face, GLenum pname, const GLint *params))
GL_PROC(void,glMatrixMode,(GLenum mode))
GL_PROC(void,glMultMatrixd,(const GLdouble *m))
GL_PROC(void,glMultMatrixf,(const GLfloat *m))
GL_PROC(void,glNewList,(GLuint list, GLenum mode))
GL_PROC(void,glNormal3b,(GLbyte nx, GLbyte ny, GLbyte nz))
GL_PROC(void,glNormal3bv,(const GLbyte *v))
GL_PROC(void,glNormal3d,(GLdouble nx, GLdouble ny, GLdouble nz))
GL_PROC(void,glNormal3dv,(const GLdouble *v))
GL_PROC(void,glNormal3f,(GLfloat nx, GLfloat ny, GLfloat nz))
GL_PROC(void,glNormal3fv,(const GLfloat *v))
GL_PROC(void,glNormal3i,(GLint nx, GLint ny, GLint nz))
GL_PROC(void,glNormal3iv,(const GLint *v))
GL_PROC(void,glNormal3s,(GLshort nx, GLshort ny, GLshort nz))
GL_PROC(void,glNormal3sv,(const GLshort *v))
GL_PROC(void,glNormalPointer,(GLenum type, GLsizei stride, const GLvoid *pointer))
GL_PROC(void,glOrtho,(GLdouble left, GLdouble right, GLdouble bottom, GLdouble top, GLdouble zNear, GLdouble zFar))
GL_PROC(void,glPassThrough,(GLfloat token))
GL_PROC(void,glPixelMapfv,(GLenum map, GLsizei mapsize, const GLfloat *values))
GL_PROC(void,glPixelMapuiv,(GLenum map, GLsizei mapsize, const GLuint *values))
GL_PROC(void,glPixelMapusv,(GLenum map, GLsizei mapsize, const GLushort *values))
GL_PROC(void,glPixelStoref,(GLenum pname, GLfloat param))
GL_PROC(void,glPixelStorei,(GLenum pname, GLint param))
GL_PROC(void,glPixelTransferf,(GLenum pname, GLfloat param))
GL_PROC(void,glPixelTransferi,(GLenum pname, GLint param))
GL_PROC(void,glPixelZoom,(GLfloat xfactor, GLfloat yfactor))
GL_PROC(void,glPointSize,(GLfloat size))
GL_PROC(void,glPolygonMode,(GLenum face, GLenum mode))
GL_PROC(void,glPolygonOffset,(GLfloat factor, GLfloat units))
GL_PROC(void,glPolygonStipple,(const GLubyte *mask))
GL_PROC(void,glPopAttrib,(void))
GL_PROC(void,glPopClientAttrib,(void))
GL_PROC(void,glPopMatrix,(void))
GL_PROC(void,glPopName,(void))
GL_PROC(void,glPrioritizeTextures,(GLsizei n, const GLuint *textures, const GLclampf *priorities))
GL_PROC(void,glPushAttrib,(GLbitfield mask))
GL_PROC(void,glPushClientAttrib,(GLbitfield mask))
GL_PROC(void,glPushMatrix,(void))
GL_PROC(void,glPushName,(GLuint name))
GL_PROC(void,glRasterPos2d,(GLdouble x, GLdouble y))
GL_PROC(void,glRasterPos2dv,(const GLdouble *v))
GL_PROC(void,glRasterPos2f,(GLfloat x, GLfloat y))
GL_PROC(void,glRasterPos2fv,(const GLfloat *v))
GL_PROC(void,glRasterPos2i,(GLint x, GLint y))
GL_PROC(void,glRasterPos2iv,(const GLint *v))
GL_PROC(void,glRasterPos2s,(GLshort x, GLshort y))
GL_PROC(void,glRasterPos2sv,(const GLshort *v))
GL_PROC(void,glRasterPos3d,(GLdouble x, GLdouble y, GLdouble z))
GL_PROC(void,glRasterPos3dv,(const GLdouble *v))
GL_PROC(void,glRasterPos3f,(GLfloat x, GLfloat y, GLfloat z))
GL_PROC(void,glRasterPos3fv,(const GLfloat *v))
GL_PROC(void,glRasterPos3i,(GLint x, GLint y, GLint z))
GL_PROC(void,glRasterPos3iv,(const GLint *v))
GL_PROC(void,glRasterPos3s,(GLshort x, GLshort y, GLshort z))
GL_PROC(void,glRasterPos3sv,(const GLshort *v))
GL_PROC(void,glRasterPos4d,(GLdouble x, GLdouble y, GLdouble z, GLdouble w))
GL_PROC(void,glRasterPos4dv,(const GLdouble *v))
GL_PROC(void,glRasterPos4f,(GLfloat x, GLfloat y, GLfloat z, GLfloat w))
GL_PROC(void,glRasterPos4fv,(const GLfloat *v))
GL_PROC(void,glRasterPos4i,(GLint x, GLint y, GLint z, GLint w))
GL_PROC(void,glRasterPos4iv,(const GLint *v))
GL_PROC(void,glRasterPos4s,(GLshort x, GLshort y, GLshort z, GLshort w))
GL_PROC(void,glRasterPos4sv,(const GLshort *v))
GL_PROC(void,glReadBuffer,(GLenum mode))
GL_PROC(void,glReadPixels,(GLint x, GLint y, GLsizei width, GLsizei height, GLenum format, GLenum type, GLvoid *pixels))
GL_PROC(void,glRectd,(GLdouble x1, GLdouble y1, GLdouble x2, GLdouble y2))
GL_PROC(void,glRectdv,(const GLdouble *v1, const GLdouble *v2))
GL_PROC(void,glRectf,(GLfloat x1, GLfloat y1, GLfloat x2, GLfloat y2))
GL_PROC(void,glRectfv,(const GLfloat *v1, const GLfloat *v2))
GL_PROC(void,glRecti,(GLint x1, GLint y1, GLint x2, GLint y2))
GL_PROC(void,glRectiv,(const GLint *v1, const GLint *v2))
GL_PROC(void,glRects,(GLshort x1, GLshort y1, GLshort x2, GLshort y2))
GL_PROC(void,glRectsv,(const GLshort *v1, const GLshort *v2))
GL_PROC(GLint,glRenderMode,(GLenum mode))
GL_PROC(void,glRotated,(GLdouble angle, GLdouble x, GLdouble y, GLdouble z))
GL_PROC(void,glRotatef,(GLfloat angle, GLfloat x, GLfloat y, GLfloat z))
GL_PROC(void,glScaled,(GLdouble x, GLdouble y, GLdouble z))
GL_PROC(void,glScalef,(GLfloat x, GLfloat y, GLfloat z))
GL_PROC(void,glScissor,(GLint x, GLint y, GLsizei width, GLsizei height))
GL_PROC(void,glSelectBuffer,(GLsizei size, GLuint *buffer))
GL_PROC(void,glShadeModel,(GLenum mode))
GL_PROC(void,glStencilFunc,(GLenum func, GLint ref, GLuint mask))
GL_PROC(void,glStencilMask,(GLuint mask))
GL_PROC(void,glStencilOp,(GLenum fail, GLenum zfail, GLenum zpass))
GL_PROC(void,glTexCoord1d,(GLdouble s))
GL_PROC(void,glTexCoord1dv,(const GLdouble *v))
GL_PROC(void,glTexCoord1f,(GLfloat s))
GL_PROC(void,glTexCoord1fv,(const GLfloat *v))
GL_PROC(void,glTexCoord1i,(GLint s))
GL_PROC(void,glTexCoord1iv,(const GLint *v))
GL_PROC(void,glTexCoord1s,(GLshort s))
GL_PROC(void,glTexCoord1sv,(const GLshort *v))
GL_PROC(void,glTexCoord2d,(GLdouble s, GLdouble t))
GL_PROC(void,glTexCoord2dv,(const GLdouble *v))
GL_PROC(void,glTexCoord2f,(GLfloat s, GLfloat t))
GL_PROC(void,glTexCoord2fv,(const GLfloat *v))
GL_PROC(void,glTexCoord2i,(GLint s, GLint t))
GL_PROC(void,glTexCoord2iv,(const GLint *v))
GL_PROC(void,glTexCoord2s,(GLshort s, GLshort t))
GL_PROC(void,glTexCoord2sv,(const GLshort *v))
GL_PROC(void,glTexCoord3d,(GLdouble s, GLdouble t, GLdouble r))
GL_PROC(void,glTexCoord3dv,(const GLdouble *v))
GL_PROC(void,glTexCoord3f,(GLfloat s, GLfloat t, GLfloat r))
GL_PROC(void,glTexCoord3fv,(const GLfloat *v))
GL_PROC(void,glTexCoord3i,(GLint s, GLint t, GLint r))
GL_PROC(void,glTexCoord3iv,(const GLint *v))
GL_PROC(void,glTexCoord3s,(GLshort s, GLshort t, GLshort r))
GL_PROC(void,glTexCoord3sv,(const GLshort *v))
GL_PROC(void,glTexCoord4d,(GLdouble s, GLdouble t, GLdouble r, GLdouble q))
GL_PROC(void,glTexCoord4dv,(const GLdouble *v))
GL_PROC(void,glTexCoord4f,(GLfloat s, GLfloat t, GLfloat r, GLfloat q))
GL_PROC(void,glTexCoord4fv,(const GLfloat *v))
GL_PROC(void,glTexCoord4i,(GLint s, GLint t, GLint r, GLint q))
GL_PROC(void,glTexCoord4iv,(const GLint *v))
GL_PROC(void,glTexCoord4s,(GLshort s, GLshort t, GLshort r, GLshort q))
GL_PROC(void,glTexCoord4sv,(const GLshort *v))
GL_PROC(void,glTexCoordPointer,(GLint size, GLenum type, GLsizei stride, const GLvoid *pointer))
GL_PROC(void,glTexEnvf,(GLenum target, GLenum pname, GLfloat param))
GL_PROC(void,glTexEnvfv,(GLenum target, GLenum pname, const GLfloat *params))
GL_PROC(void,glTexEnvi,(GLenum target, GLenum pname, GLint param))
GL_PROC(void,glTexEnviv,(GLenum target, GLenum pname, const GLint *params))
GL_PROC(void,glTexGend,(GLenum coord, GLenum pname, GLdouble param))
GL_PROC(void,glTexGendv,(GLenum coord, GLenum pname, const GLdouble *params))
GL_PROC(void,glTexGenf,(GLenum coord, GLenum pname, GLfloat param))
GL_PROC(void,glTexGenfv,(GLenum coord, GLenum pname, const GLfloat *params))
GL_PROC(void,glTexGeni,(GLenum coord, GLenum pname, GLint param))
GL_PROC(void,glTexGeniv,(GLenum coord, GLenum pname, const GLint *params))
GL_PROC(void,glTexImage1D,(GLenum target, GLint level, GLint internalformat, GLsizei width, GLint border, GLenum format, GLenum type, const GLvoid *pixels))
GL_PROC(void,glTexImage2D,(GLenum target, GLint level, GLint internalformat, GLsizei width, GLsizei height, GLint border, GLenum format, GLenum type, const GLvoid *pixels))
GL_PROC(void,glTexParameterf,(GLenum target, GLenum pname, GLfloat param))
GL_PROC(void,glTexParameterfv,(GLenum target, GLenum pname, const GLfloat *params))
GL_PROC(void,glTexParameteri,(GLenum target, GLenum pname, GLint param))
GL_PROC(void,glTexParameteriv,(GLenum target, GLenum pname, const GLint *params))
GL_PROC(void,glTexSubImage1D,(GLenum target, GLint level, GLint xoffset, GLsizei width, GLenum format, GLenum type, const GLvoid *pixels))
GL_PROC(void,glTexSubImage2D,(GLenum target, GLint level, GLint xoffset, GLint yoffset, GLsizei width, GLsizei height, GLenum format, GLenum type, const GLvoid *pixels))
GL_PROC(void,glTranslated,(GLdouble x, GLdouble y, GLdouble z))
GL_PROC(void,glTranslatef,(GLfloat x, GLfloat y, GLfloat z))
GL_PROC(void,glVertex2d,(GLdouble x, GLdouble y))
GL_PROC(void,glVertex2dv,(const GLdouble *v))
GL_PROC(void,glVertex2f,(GLfloat x, GLfloat y))
GL_PROC(void,glVertex2fv,(const GLfloat *v))
GL_PROC(void,glVertex2i,(GLint x, GLint y))
GL_PROC(void,glVertex2iv,(const GLint *v))
GL_PROC(void,glVertex2s,(GLshort x, GLshort y))
GL_PROC(void,glVertex2sv,(const GLshort *v))
GL_PROC(void,glVertex3d,(GLdouble x, GLdouble y, GLdouble z))
GL_PROC(void,glVertex3dv,(const GLdouble *v))
GL_PROC(void,glVertex3f,(GLfloat x, GLfloat y, GLfloat z))
GL_PROC(void,glVertex3fv,(const GLfloat *v))
GL_PROC(void,glVertex3i,(GLint x, GLint y, GLint z))
GL_PROC(void,glVertex3iv,(const GLint *v))
GL_PROC(void,glVertex3s,(GLshort x, GLshort y, GLshort z))
GL_PROC(void,glVertex3sv,(const GLshort *v))
GL_PROC(void,glVertex4d,(GLdouble x, GLdouble y, GLdouble z, GLdouble w))
GL_PROC(void,glVertex4dv,(const GLdouble *v))
GL_PROC(void,glVertex4f,(GLfloat x, GLfloat y, GLfloat z, GLfloat w))
GL_PROC(void,glVertex4fv,(const GLfloat *v))
GL_PROC(void,glVertex4i,(GLint x, GLint y, GLint z, GLint w))
GL_PROC(void,glVertex4iv,(const GLint *v))
GL_PROC(void,glVertex4s,(GLshort x, GLshort y, GLshort z, GLshort w))
GL_PROC(void,glVertex4sv,(const GLshort *v))
GL_PROC(void,glVertexPointer,(GLint size, GLenum type, GLsizei stride, const GLvoid *pointer))
GL_PROC(void,glViewport,(GLint x, GLint y, GLsizei width, GLsizei height))
#endif</t>
<t tx="ekr.20060513122613.8" xcc_child_cfg="7d7100580b000000427265616b506f696e747371017d7102732e">#if USE_OPENGL &gt;= 2
	@others
#endif</t>
<t tx="ekr.20060513122613.9">#ifdef GL_DEFS
#define GL_UNSIGNED_BYTE_3_3_2            0x8032
#define GL_UNSIGNED_SHORT_4_4_4_4         0x8033
#define GL_UNSIGNED_SHORT_5_5_5_1         0x8034
#define GL_UNSIGNED_INT_8_8_8_8           0x8035
#define GL_UNSIGNED_INT_10_10_10_2        0x8036
#define GL_RESCALE_NORMAL                 0x803A
#define GL_TEXTURE_BINDING_3D             0x806A
#define GL_PACK_SKIP_IMAGES               0x806B
#define GL_PACK_IMAGE_HEIGHT              0x806C
#define GL_UNPACK_SKIP_IMAGES             0x806D
#define GL_UNPACK_IMAGE_HEIGHT            0x806E
#define GL_TEXTURE_3D                     0x806F
#define GL_PROXY_TEXTURE_3D               0x8070
#define GL_TEXTURE_DEPTH                  0x8071
#define GL_TEXTURE_WRAP_R                 0x8072
#define GL_MAX_3D_TEXTURE_SIZE            0x8073
#define GL_UNSIGNED_BYTE_2_3_3_REV        0x8362
#define GL_UNSIGNED_SHORT_5_6_5           0x8363
#define GL_UNSIGNED_SHORT_5_6_5_REV       0x8364
#define GL_UNSIGNED_SHORT_4_4_4_4_REV     0x8365
#define GL_UNSIGNED_SHORT_1_5_5_5_REV     0x8366
#define GL_UNSIGNED_INT_8_8_8_8_REV       0x8367
#define GL_UNSIGNED_INT_2_10_10_10_REV    0x8368
#define GL_BGR                            0x80E0
#define GL_BGRA                           0x80E1
#define GL_MAX_ELEMENTS_VERTICES          0x80E8
#define GL_MAX_ELEMENTS_INDICES           0x80E9
#define GL_CLAMP_TO_EDGE                  0x812F
#define GL_TEXTURE_MIN_LOD                0x813A
#define GL_TEXTURE_MAX_LOD                0x813B
#define GL_TEXTURE_BASE_LEVEL             0x813C
#define GL_TEXTURE_MAX_LEVEL              0x813D
#define GL_LIGHT_MODEL_COLOR_CONTROL      0x81F8
#define GL_SINGLE_COLOR                   0x81F9
#define GL_SEPARATE_SPECULAR_COLOR        0x81FA
#define GL_SMOOTH_POINT_SIZE_RANGE        0x0B12
#define GL_SMOOTH_POINT_SIZE_GRANULARITY  0x0B13
#define GL_SMOOTH_LINE_WIDTH_RANGE        0x0B22
#define GL_SMOOTH_LINE_WIDTH_GRANULARITY  0x0B23
#define GL_ALIASED_POINT_SIZE_RANGE       0x846D
#define GL_ALIASED_LINE_WIDTH_RANGE       0x846E
#endif</t>
<t tx="ekr.20060514125256"></t>
<t tx="ekr.20060530091119"></t>
<t tx="ekr.20060703162826"></t>
<t tx="ekr.20060827163237">name = "scripts.leo"
fileName = g.os_path_join(g.app.loadDir,"..","scripts",name)
ok,frame = g.openWithFileName(fileName,c)
if not ok:
    g.es("not found: %s" % name)</t>
<t tx="ekr.20060924180348"></t>
<t tx="ekr.20061023141459"></t>
<t tx="ekr.20061023141638"></t>
<t tx="ekr.20061023142737"></t>
<t tx="ekr.20061023142737.1"></t>
<t tx="ekr.20071006112739"></t>
<t tx="ekr.20071029090815"># This plugins has been disabled until it can be rewritten to handle @enabled-plugins nodes.</t>
<t tx="ekr.20071113084440"># These plugins are for testing Leo's own plugin loading logic.
# There is no reason ever to enable these plugins.</t>
<t tx="ekr.20080203083146"></t>
<t tx="ekr.20080515173014.1">([a-zA-Z_.]+)\.bind\((.*)\)(.*)$
c.bind(\1,\2)\3

[a-zA-Z_.]+

(\w)+(\.\w+)*

abc.xyz.pdq

# Bind w.bind with more than two args (none found)

w.bind\(.*,.*,.*$

[-w]\.bind\(</t>
<t tx="ekr.20080519084304.2">change = True # True: actually make the changes.
trace = True

print '-' * 40

tag = 'import leo' ; n = len('import ')

for p in p.self_and_subtree_iter():
    result = []
    for s in g.splitlines(p.bodyString()):
        i = s.find(tag,0)
        if i &gt; -1:
            # Do nothing if we have already done the translation.
            i2 = s.find('&lt;&lt;') ; i3 = s.find('import leo.core')
            if i2 == -1 and i3 == -1:
                i += n
                j = g.skip_c_id(s,i)
                word = s[i:j]
                rest = s[j:]
                if rest.strip().startswith('as'):
                    s = s[:i] + 'leo.core.' + word + rest
                else:
                    s = s[:i] + 'leo.core.' + word + ' as ' + word + rest
                if trace:
                    print p.headString()
                    j,k=g.getLine(s,i) ; print s[j:k]
        result.append(s)
    result = ''.join(result)

    if change and result != p.bodyString():
        c.setBodyString(p,result)

</t>
<t tx="ekr.20080619090226.4"></t>
<t tx="ekr.20081121105001.2080"># All gui plugins are now in leoGuiPluginsRef.leo</t>
<t tx="ekr.20090430075506.4"></t>
<t tx="ekr.20100102164842.5328">nodes = 0 ; lines = 0
for p in c.all_unique_positions():
    nodes += 1
    lines += len(g.splitLines(p.b))

pages = ((nodes * 10) + lines) / 50
s = "%d nodes,  %d lines, %d pages" % (nodes,lines,pages)
print(s); g.es(s)</t>
<t tx="ekr.20100103093121.5365"></t>
<t tx="ekr.20100907114130.5503">from leo.external import lproto
import os

addr = open(os.path.expanduser('~/.leo/leoserv_sockname')).read()
print("will connect to",addr)
pc  = lproto.LProtoClient(addr)
pc.send("""

g.es("hello world from remote") 
c = g.app.commanders()[0]

""")

# note how c persists between calls
pc.send("""
c.k.simulateCommand('stickynote')
""")</t>
<t tx="ekr.20100909111553.5583"></t>
<t tx="ekr.20100909111553.5588"># Add the tree to the external unit test</t>
<t tx="ekr.20100909121239.5670"># Works in external unit tests.
g.loadOnePlugin(c,'screenshots')
sc = c.screenshotController
assert sc

fn = sc.get_directive_path(p)
assert fn</t>
<t tx="ekr.20100909121239.5797"></t>
<t tx="ekr.20100909121239.5951">g.loadOnePlugin(c,'screenshots')
sc = c.screenshotController

h = 'Headline and body text'
p2 = g.findNodeAnywhere(c,h)
assert p2

root,h = sc.find_at_screenshot_tree_node(p2)
assert root
assert h == 'Urgent'

</t>
<t tx="ekr.20100909193419.5596">if 0: # Doesn't work well.
    g.app.unitTestGui = 'qt'</t>
<t tx="ekr.20100910115903.5597"></t>
<t tx="ekr.20100910115903.5599"></t>
<t tx="ekr.20101004082701.5674"></t>
<t tx="ekr.20101110084839.5680">'''Print all plugins not in this file.'''

import glob

suppress = (
    '__init__.py',
    # Gui's
    'baseNativeTree.py','cursesGui.py','gtkDialogs.py','gtkGui.py',
    'ironPythonGui.py',
    'qtframecommands.py','qtGui.py','qt_main.py','qt_quicksearch.py',
    'swing_gui.py','tkGui.py','wxGui.py',
    # LeoUser stuff...
    'exampleTemacsExtension.py','temacs.py','usetemacs.py',
    # Ancient rst stuff...
    'rst.py','rst2.py',
)

all = glob.glob(g.os_path_finalize_join(
    g.app.loadDir,'..','plugins','*.py'))
all = [g.shortFileName(z) for z in all]
all.sort()

here = [v.anyAtFileNodeName() for v in c.all_unique_nodes()
    if v.isAnyAtFileNode()]

missing = [s for s in all if s not in here and s not in suppress]

if missing:
    print('='*20)
    print('missing plugins...\n')
    for s in missing:
        print(s)
else:
    g.es_print('no_missing plugins')
</t>
<t tx="ekr.20101110084839.5681"># These plugins were formerly in the plugins directory but not here.
# Most of these plugins previously had old-style sentinels.</t>
<t tx="pap.20041006184225">"""
A plugin to manage Leo's Plugins:

- Enables and disables plugins.
- Shows plugin details.
- Checks for conflicting hook handlers.
- Checks for and updates plugins from the web.
"""

__version__ = "0.25"
__plugin_name__ = "Plugin Manager"
__plugin_priority__ = 10000
__plugin_requires__ = ["plugin_menu"]
__plugin_group__ = "Core"

&lt;&lt; version history &gt;&gt;
&lt;&lt; define importLeoGlobals &gt;&gt;
&lt;&lt; imports &gt;&gt;
&lt;&lt; todo &gt;&gt;

USE_PRIORITY = False # True: show non-functional priority field.

@others

if __name__ == "__main__":
    if ok:
        g.createStandAloneTkApp(pluginName=__name__)
        topLevelMenu(c=None)</t>
<t tx="pap.20041006184225.2">@

0.1 Paul Paterson: Initial version
0.2 EKR:
- The check for .ini files looks for the actual x.ini file.
  (This required that spellpyx uses spellpyx.ini rather than mod_spelling.ini.)
- Minor stylistic changes.
0.4 EKR:
- Added USE_PRIORITY switch.
  Priority is non-functional, and isn't needed.
  Leo loads plugins in the order in which they appear in pluginsManager.txt.
  Furthermore, this plugin preserves that order.
0.5 EKR: Make sure to do nothing if Pmw is not defined.
0.6 Paul Paterson:
- Fixed incorrect detection of version if single quotes used
- Now always detects a file as a plugin (previously only did this if it imported leoPlugins)
- Fixed incorrect detection of handlers if single quotes used
- Fixed incorrect detection of multiple handlers in a single line.
0.7 EKR:
- The Sets module is not defined in Python 2.2.
  This must be replaced.  This is too important a plugin for it not to work everywhere.
- Added better import tests, and message when import fails.
- Added an init method, although a simple raise would also work.
0.8 EKR:
- Use g.importExtension rather than import to get sets module.
0.9 Paul Paterson:
- Remove the "not referenced" status. All plugins are not active or inactive.
- Changed the list view to have the status at the end of the line
- Changed format of list view to be fixed font so that it looks cleaner
- Also changed format of conflict list view
- If a file contains "__not_a_plugin__ = True" then it will be omitted from the list
- Now looks for and reports the __plugin_group__ in the view and list
- Can now filter the plugins by their __plugin__group__
- Set __plugin_group__ to "Core"
- Renamed active/inactive to on/off as this works better with the groups
- Added version history display to plugin view
0.10 Paul Paterson:
- Changed the names in the plugin list view to remove at_, mod_ and capitalized
- Remove dblClick event from plugin list - it wasn't doing anything
- Can now be run stand-alone to aid in debugging problems
0.11 EKR: Use stand-alone leoGlobals module to simplify code.
0.12 EKR: Folded in some minor changes from Paul to support AutoTrees plugin.
0.13 Paul Paterson
- Fixed path in installPlugin that ignore the local_paths setting
- Generalized code to support LeoUpdate plugin.
0.14 EKR:
- Several methods now return if get.keywords('c') is None.
  This may fix some startup bugs, or not.
0.15 Paul Paterson:
- Reorganized to speed loading of initial display
- Added a "Close" button. Guess what it does?!
- Added code to dynamically enable a plugin at runtime
0.16 Paul Paterson: Complete code to dynamically enable plugins
0.17 Paul Paterson:
- Speeded up the getVersionHistory step of reading plugins
- Allow specification of plugin load order.
0.18 EKR: Added g.app.dialogs hack to ensure dialog stays in front.
0.19 EKR: Removed call to Pmw.initialise [sic]. This is now done in Leo's core.
0.20 EKR: (removed g.top)
- Init registers no hooks.
- Added new 'c' arg to topLevelMenu.
- ManagerDialog now remembers c (c will be None if called standalone).
- Added ctor to LocalPluginCollection.
- LocalPluginCollection uses self.c rather than g.top&gt;
- Can't enable plugins dynamically when called stand-alone.
- Removed KEYWORDS hack.
0.21 EKR: Removed the g.app.dialog hack.
0.22 EKR: Just changed these comments.
0.23 EKR: Changed g.createStandAloneApp to createStandAloneTkApp to make clear the dependency.
0.24 EKR: Standalone version of the code now works again.
0.25 EKR: Define local_dict in base PluginList class.  This fixes a crasher.</t>
<t tx="pap.20041006184225.3">#
# If these don't import then your Python install is hosed anyway so we don't
# protect the import statements
import fnmatch
import os
import re
import sha
import sys
import urllib
import threading
import webbrowser
import traceback
import time

try:
    import leo.core.leoGlobals as g
    standalone = False
except ImportError:
    standalone = True
    g = importLeoGlobals()

ok = g is not None
if ok:
    try:
        Pmw = g.importExtension("Pmw",    pluginName=__name__,verbose=True,required=True)
        Tk  = g.importExtension('Tkinter',pluginName=__name__,verbose=True,required=True)
    except SystemExit:
        raise
    except Exception:
        import sys
        s = 'plugins_manager.py: %s: %s' % (sys.exc_type,sys.exc_value)
        g.pr(s)
        ok = False
</t>
<t tx="pap.20041006184225.6">class Plugin:   
    """Represents a single plugin instance"""

    # Class properties.
    max_name_width = 30
    max_group_width = 10

    read_details_immediately = False

    @others</t>
<t tx="pap.20041006185727.1">def __init__(self):
    """Initialize the plugin"""
    self.filename = None
    self.name = None
    self.is_plugin = True # until proven False! speeds initial loading
    self.version = 'Unknown'
    self.description = ''
    self.handlers = []
    self.commands = []
    self.has_config = False
    self.can_read = False
    self.hash = None
    self.enabled = "Unknown"
    self.priority = None
    self.has_toplevel = False
    self.requires = []
    self.group = 'Unknown'
    self.versions = 'Unknown'
    self.contents_valid = False
    self.has_details = False
</t>
<t tx="pap.20041006190628">class PluginCollection(dict):

    """Represents a collection of plugins"""

    plugin_class = None
    background_pause = 0.05 # seconds to pause while getting details

    @others
</t>
<t tx="pap.20041006190817">class LocalPluginCollection(PluginCollection):
    """Represents a plugin collection based on the local file system"""

    plugin_class = LocalPlugin

    @others
</t>
<t tx="pap.20041006191239">def initFrom(self, location, callback=None):
    """Initialize the collection from the filesystem location.
    Returns a list of errors that occured.
    """
    if callback: callback("Looking for list of files")
    errors = []
    plugin_files = self.getFilesMatching(location)  
    for plugin_file in plugin_files:
        if callback: callback("Processing %s" % plugin_file)    
        plugin = self.plugin_class()
        # Get details
        try:
            plugin.initFrom(plugin_file)
        except Exception as err:
            errors.append((plugin_file, err))
        # Store anything that looks like a plugin
        if plugin.is_plugin:
            self[plugin.name] = plugin

    # Now we have to go back through and check for dependencies
    # We cannot do this up front because we need to know the names
    # of other plugins to detect the dependencies
    for plugin in self.values():
        plugin.getRequiredModules(self)

    # Kick-off a thread to get detailed information on the plugin
    # This can be time consuming so we don't try to do this on
    # the main thread
    handler = threading.Thread(target=self.getPluginDetails)
    handler.start()

    return errors

</t>
<t tx="pap.20041006191803">def getFilesMatching(self, location):

    """Return all the files matching the pattern"""

    return [filename for filename in self.getAllFiles(location)
                if fnmatch.fnmatch(filename, "*.py")]</t>
<t tx="pap.20041006191803.1">def getAllFiles(self, location):

    """Return all the files in the location"""

    return [os.path.join(location, filename) for filename in os.listdir(location)]</t>
<t tx="pap.20041006191829">def getAllFiles(self, location):

    """Return all the files in the location"""

    raise NotImplementedError("Must override")    
</t>
<t tx="pap.20041006192257">def __init__(self):
    """Initialize the plugin collection"""
</t>
<t tx="pap.20041006192557">class LocalPlugin(Plugin):
    """A plugin on the local file system"""

    @others</t>
<t tx="pap.20041006193013">def initFrom(self, location):
    """Initialize the plugin from the specified location"""

    # Initial properties
    self.filename = location
    self.name = self.getName(location)
    self.nicename = self.getNiceName(self.name)

    # Get the contents of the file
    try:
        text = self.getContents()
        self.getSummary(text)
    except InvalidPlugin as err:
        g.pr('InvalidPlugin',str(err))
        self.description = str(err)
    except:
        g.es('Unexpected exception in initFrom')
        g.es_exception()</t>
<t tx="pap.20041006193239">def getContents(self):

    """Return the contents of the file"""

    raise NotImplementedError("Must override")    
</t>
<t tx="pap.20041006193459">class InvalidPlugin(Exception):
    """The plugin is invalid"""

class InvalidCollection(Exception):
    """The plugin collection is invalid"""

class InvalidManager(Exception):
    """The enable manager is invalid"""
</t>
<t tx="pap.20041006193459.1">def getContents(self):

    """Return the contents of the file"""

    self.contents_valid = False

    try:
        f = file(self.filename, "r")
    except (IOError, OSError) as err:
        s = "Unable to open plugin file '%s': %s" % (self.name, err)
        g.pr(s)
        raise InvalidPlugin(s)
    try:
        try:
            self.text = text = f.read()
        finally:
            f.close()
    except Exception as err:
        s = "Unable to read plugin file '%s': %s" % (self.name, err)
        g.pr(s)
        raise InvalidPlugin(s)              

    self.contents_valid = True

    return text


</t>
<t tx="pap.20041006194759">def getDetails(self):
    """Get the details of the plugin

    We look for
        __version__
        hooks
        config
        commands
    """
    self.has_details = True
    text = self._plugin_text
    # Allow both single and double triple-quoted strings.
    match1 = self.getMatch(text, r'"""(.*?)"""')
    match2 = self.getMatch(text, r"'''(.*?)'''")
    pat1 = match1 and match1.group(1)
    pat2 = match2 and match2.group(1)
    if pat1 and pat2:
        # Take the first pattern that appears.
        self.description = g.choose(match1.start() &lt; match2.start(),pat1,pat2)
    else:
        # Take whatever.
        self.description = pat1 or pat2 or 'Unknown'
    # g.trace('%4d %s' % (len(self.description),self.name))
    self.commands = set(self.getPatterns(text, "def cmd_(\w*?)\("))
    # Get a list of the handlers
    handler_list = self.getPattern(text, r'registerHandler\((.*?)\)')
    if handler_list:
        self.handlers = set(self.getPatterns(handler_list, r'["\'](.*?)["\']'))
    else:
        self.handlers = set()
    # Look for the matching .ini file.
    ini_file_name = g.os_path_join(
        g.app.loadDir,"..","plugins",
        self.getName(self.filename)+".ini")
    ini_file_name = g.os_path_abspath(ini_file_name)
    self.has_config = g.os_path_exists(ini_file_name)
    self.hash = sha.sha(text).hexdigest()
    self.can_read = True
    if USE_PRIORITY:
        self.priority = self.getPattern(text, r'__plugin_priority__\s*=\s*(.*?)$', "-")
    self.has_toplevel = self.hasPattern(text, "def topLevelMenu")
    self.getVersionHistory(text)
</t>
<t tx="pap.20041006194759.1">def getPattern(self, text, pattern, default=None):

    """Return a single match for the specified pattern in the text or the default"""

    matches = self.getPatterns(text, pattern)
    if matches:
        return matches[0]
    else:
        return default</t>
<t tx="pap.20041006194917">def getPatterns(self, text, pattern):

    """Return all matches of the pattern in the text"""

    exp = re.compile(pattern, re.MULTILINE + re.DOTALL)

    return exp.findall(text)</t>
<t tx="pap.20041006200000">def hasPattern(self, text, pattern):

    """Return True if the text contains the pattern"""

    return self.getPattern(text, pattern) is not None</t>
<t tx="pap.20041006201849">class CVSPluginCollection(PluginCollection):

    """Represents a plugin collection based located in a CVS repository"""

    plugin_class = CVSPlugin

    @others
</t>
<t tx="pap.20041006202102">def getFilesMatching(self, location):
    """Return all the files in the location"""
    #
    # Find files
    text = self.getListingPage(location)
    cvs_host, _, cvs_location = location.split("/", 2)
    filename = re.compile(r'href="/viewcvs.py/(%s)/(.*?\.py\?rev=.*?)\&amp;view=auto"' % cvs_location)
    return [r"http://%s/viewcvs.py/*checkout*/%s/%s" % (cvs_host, item[0], item[1])
                for item in filename.findall(text)]
</t>
<t tx="pap.20041006202703">def getListingPage(self, location):
    """Return the HTML page with files listed"""
    #
    # Connect to CVS
    try:
        url = urllib.urlopen(r"http://%s" % location)
    except Exception as err:
        raise InvalidCollection("Could not get connection to CVS: %s" % err)
    #
    # Get the page with files listed
    try:
        try:
            text = url.read()
        finally:
            url.close()
    except Exception as  err:
        raise InvalidCollection("Could not read from CVS: %s" % err)
    return text    </t>
<t tx="pap.20041006203049">class CVSPlugin(Plugin):
     """A plugin on CVS"""

     read_details_immediately = True

     @others
</t>
<t tx="pap.20041006212105">def getName(self, location):

    """Determine the plugin name from the location"""

    raise NotImplementedError("Must Override")
</t>
<t tx="pap.20041006212131">def getName(self, location):

    """Determine the plugin name from the location"""

    # return os.path.split(os.path.splitext(location)[0])[1]
    head,ext = g.os_path_splitext(location)
    path,name = g.os_path_split(head)
    return name</t>
<t tx="pap.20041006212238">def getName(self, location):

    """Determine the plugin name from the location"""

    return re.match("(.*)/(.*?)\.py\?", location).groups()[1]</t>
<t tx="pap.20041006213006">def getContents(self):

    """Return the contents of the file"""

    self.contents_valid = False

    # Connect to CVS
    try:
        url = urllib.urlopen(self.filename)
    except Exception as err:
        raise InvalidPlugin("Could not get connection to CVS: %s" % err)

    # Get the page with file content
    try:
        try:
            self.text = text = url.read()
        finally:
            url.close()
    except Exception as err:
        raise InvalidPlugin("Could not read file '%s' from CVS: %s" % (self.filename, err))

    self.contents_valid = True

    return text        </t>
<t tx="pap.20041006215108">class ManagerDialog:
    """The dialog to show manager functions"""

    dialog_caption = "Plugin Manager"
    file_text = "Plugin"
    has_enable_buttons = True 
    has_conflict_buttons = True
    install_text = "Install"   
    @others</t>
<t tx="pap.20041006215108.1">def __init__(self,c,show_order=False):
    """Initialise the dialog"""

    self.c = c # New in version 0.20 of this plugin.

    # This would be wrong: it would inhibit standalone operation!
    # if not c or not c.exists: return
    self.setPaths()
    &lt;&lt; create top level window &gt;&gt;
    self.initLocalCollection()
    &lt;&lt; create frames &gt;&gt;
    &lt;&lt; create pluginView &gt;&gt;
    &lt;&lt; create PluginList &gt;&gt;
    if show_order:
        &lt;&lt; create order &gt;&gt;
    &lt;&lt; create local buttons &gt;&gt;
    &lt;&lt; create remote buttons &gt;&gt;
    &lt;&lt; create message bar &gt;&gt;
    self.plugin_list.populateList("All")

    if not standalone:
        top.grab_set() # Make the dialog a modal dialog.
        top.focus_force() # Get all keystrokes.
        root.wait_window(top)
    else:
        root.mainloop()</t>
<t tx="pap.20041006215903">def onClick(self):
    """Select an item in the list"""
    sels = self.box.getcurselection()
    if len(sels) == 0:
        pass
    else:
        self.plugin_view.showPlugin(self.local_dict[sels[0]])</t>
<t tx="pap.20041006220611">def asString(self, detail=False):

    """Return a string representation"""

    if not detail:
        if self.version &lt;&gt; "-":
            body = "%(nicename)s (v%(version)s)" % self.__dict__
        else:
            body = "%(nicename)s" % self.__dict__                        
        return inColumns((body, self.group, self.enabled), [self.max_name_width, self.max_group_width])
    else:
        return (
            "Name: %(nicename)s\n"
            "Version: %(version)s\n"
            "Active: %(enabled)s\n"
            "File: %(filename)s\n"
            "\n"
            "Description:\n%(description)s\n\n"
            "Has config file: %(has_config)s\n"
            "Commands: %(commands)s\n"
            "Handlers: %(handlers)s\n" % self.__dict__
        )</t>
<t tx="pap.20041006221212">def initLocalCollection(self):
    """Initialize the local plugin collection"""

    # Get the local plugins information
    self.local = LocalPluginCollection(self.c)
    self.local.initFrom(self.local_path)

    # Get the active status of the plugins
    self.enable = EnableManager()
    self.enable.initFrom(self.local_path)
    self.local.setEnabledStateFrom(self.enable)
</t>
<t tx="pap.20041006221438">def sortedNames(self):

    """Return a list of the plugin names sorted alphabetically

    We use decorate, sort, undecorate to sort by the nice name!

    """

    names = [(item.nicename, item.name) for item in self.values()]
    names.sort()
    return [name[1] for name in names]
</t>
<t tx="pap.20041006223915">self.notebook = notebook = Pmw.NoteBook(self.upper, raisecommand=self.selectPage)
notebook.pack(side="left", fill='both', expand=1, padx=5, pady=5)

self.local_list_page = local_list_page = notebook.add('Installed %ss' % self.file_text)
self.remote_list_page = remote_list_page = notebook.add('CVS %ss' % self.file_text)
notebook.tab('Installed %ss' % self.file_text).focus_set()
#notebook.setnaturalsize()

self.plugin_list = LocalPluginList(local_list_page, self.plugin_view, self.local, 
                                   self.file_text)
self.plugin_list.pack(side="top", fill='both', expand=1)
self.remote_plugin_list = RemotePluginList(remote_list_page, self.plugin_view, None,
                                           self.file_text)
self.remote_plugin_list.pack(side="top", fill='both', expand=1)

self.plugin_list.setSecondFilterList(["All"] + self.local.getGroups())</t>
<t tx="pap.20041006223915.1">self.plugin_view = PluginView(self.upper, self.file_text)

self.plugin_view.pack(side="right", fill='both', expand=1, padx=5, pady=5)</t>
<t tx="pap.20041006223915.2">self.buttonBox = Pmw.ButtonBox(
    self.local_list_page,
    labelpos = 'nw',
    frame_borderwidth = 2,
    frame_relief = 'groove')

# Add some buttons to the ButtonBox.
if self.has_enable_buttons:
    self.buttonBox.add('Enable', command = self.enablePlugin)
    self.buttonBox.add('Disable', command = self.disablePlugin)
    #self.buttonBox.add('Check for Updates', command = self.checkUpdates)
if self.has_conflict_buttons:
    self.buttonBox.add('Check Conflicts', command = self.checkConflicts)

self.buttonBox.pack(side="top", padx=5)</t>
<t tx="pap.20041006224151">def enablePlugin(self):
    """Enable a plugin"""
    plugin = self.plugin_list.getSelectedPlugin()
    if not plugin: return

    self.local.enablePlugin(plugin,self.enable)
    self.plugin_list.populateList()</t>
<t tx="pap.20041006224206">def disablePlugin(self):
    """Disable a plugin"""
    plugin = self.plugin_list.getSelectedPlugin()
    if not plugin: return

    self.local.disablePlugin(plugin,self.enable)
    self.plugin_list.populateList()</t>
<t tx="pap.20041006224216">def checkUpdates(self):
    """Check for updates"""
    url = self.remote_path
    self.status_message = "Searching for file list"
    self.messagebar.message("busy", "Searching for file list")
    &lt;&lt; define callbackPrint &gt;&gt;
    self.remote = CVSPluginCollection()
    self.remote_plugin_list.plugins = self.remote
    try: 
        errors = self.remote.initFrom(url,callbackPrint)    
    except Exception as err:
        &lt;&lt; put up a  connection failed dialog &gt;&gt;
    else:
        if errors:
            &lt;&lt; put up a file error dialog &gt;&gt;
    self.messagebar.resetmessages('busy')        
    self.remote.setEnabledStateFrom(self.local)
    self.remote_plugin_list.populateList()   
    self.remote_plugin_list.setSecondFilterList(["All"] + self.remote.getGroups()) </t>
<t tx="pap.20041006224808">self.messagebar = Pmw.MessageBar(self.lower,
        entry_width = 40,
        entry_relief='groove',
        labelpos = 'w',
        label_text = 'Status:')

self.messagebar.pack(side="left", fill='x', expand=1, padx=5, pady=1)


self.donebutton = Tk.Button(self.lower, text="Close", 
                            command=lambda : self.top.destroy())
self.donebutton.pack(side="right", fill="none", expand=0)


</t>
<t tx="pap.20041006232717">class EnableManager:

    """Manages the enabled/disabled status of plugins"""

    @others</t>
<t tx="pap.20041006232717.1">def initFrom(self, location):
    """Initialize the manager from a folder"""
    manager_filename = os.path.join(location, "pluginsManager.txt")
    self.location = location

    # Get the text of the plugin manager file
    try:
        f = file(manager_filename, "r")
    except (IOError, OSError) as err:
        raise InvalidManager("Unable to open plugin manager file '%s': %s" % 
                                (manager_filename, err))
    try:
        try:
            self.text = text = f.read()
        finally:
            f.close()
    except Exception as err:
        raise InvalidManager("Unable to read manager file '%s': %s" % 
                                (manager_filename, err))              
    self.parseManagerText(text)</t>
<t tx="pap.20041008200028">def parseManagerText(self, text):
    """Parse the text in the manager file"""

    # Regular expressions for scanning the file
    find_active = re.compile(r"^\s*?(\w+)\.py", re.MULTILINE)
    find_inactive = re.compile(r"^\s*?#\s*(\w+)\.py", re.MULTILINE)
    find_manager = re.compile(r"^\s*plugin_manager\.py", re.MULTILINE)

    if 1: # Put the first match in the starts dict.
        starts = OrderedDict()
        for kind,iter in (
            ('on',find_active.finditer(text)),
            ('off',find_inactive.finditer(text)),
        ):
            for match in iter:
                name = match.groups()[0]
                start = match.start()
                if start != -1:
                    bunch = starts.get(name)
                    if not bunch or bunch.start &gt; start:
                      starts[name] = g.Bunch(
                        kind=kind,name=name,start=start,match=match)

        self.actives = OrderedDict(
            [(bunch.name,bunch.match) for bunch in starts.values() if bunch.kind=='on'])

        self.inactives = OrderedDict(
            [(bunch.name,bunch.match) for bunch in starts.values() if bunch.kind=='off'])

        if 0: # debugging.
            starts2 = [(bunch.start,bunch.name,bunch.kind) for bunch in starts.values()]
            starts2.sort()
            g.trace(g.listToString(starts2,tag='starts2 list'))
            g.trace(g.dictToString(self.actives,tag='Active Plugins'))

    else: # Original code.
        # Get active plugin defintions
        self.actives = dict([(match.groups()[0], match) 
            for match in find_active.finditer(text)])

        # Get inactive plugin definitions
        self.inactives = dict([(match.groups()[0], match) 
            for match in find_inactive.finditer(text)])

    # List of all plugins
    self.all = {}
    self.all.update(self.actives)
    self.all.update(self.inactives)

    # Locaction of the plugin_manager.py plugin - this is where
    # we add additional files
    self.manager = find_manager.search(text)</t>
<t tx="pap.20041008220723">def setEnabledStateFrom(self, enabler):

    """Set the enabled state of each plugin using the enabler object"""
    for name in self:
        if name in enabler.actives:
            self[name].enabled = "On"
        else:
            self[name].enabled = "Off" 
</t>
<t tx="pap.20041008223406">def populateList(self, filter=None):
    """Populate the plugin list"""
    if not self.plugins:
        self.box.setlist([])
        return
    #if filter is None:
    filter = self.filter.getcurselection()
    secondfilter = self.secondfilter.getcurselection()
    #
    # Get old selection so that we can restore it    
    current_text = self.box.getcurselection()
    if current_text:
        current_index = self.listitems.index(current_text[0])
    #
    # Show the list
    self.local_dict = dict([(self.plugins[name].asString(), self.plugins[name])
                                for name in self.plugins])
    self.listitems = [self.plugins[name].asString() 
                        for name in self.plugins.sortedNames()
                        if filter in ("All", self.plugins[name].enabled) 
                        and secondfilter in ("All", self.plugins[name].group)]
    self.box.setlist(self.listitems)    
    #
    if current_text:
        try:
            self.box.setvalue((self.listitems[current_index],))
            self.box.component("listbox").see(current_index)
        except IndexError:
            pass # Sometimes the list is just different!
        else:
            self.onClick()</t>
<t tx="pap.20041008224318">class PluginView(Tk.Frame):

    """Frame to display a plugin's information"""

    @others</t>
<t tx="pap.20041008224318.1">def __init__(self, parent, file_text, *args, **kw):

    """Initialize the view"""

    Tk.Frame.__init__(self, parent, *args, **kw)

    self.file_text = file_text
    self.top = Tk.Frame(self)
    self.top.pack(side="top", fill="both", expand=1)
    self.bottom = Tk.Frame(self)
    self.bottom.pack(side="top", fill="both")

    @others

    if USE_PRIORITY:
        Pmw.alignlabels([
            self.name, self.version, self.status, self.group,
            self.filename, self.has_ini, self.has_toplevel,
            self.priority, 
        ])
    else:
         Pmw.alignlabels([
            self.name, self.version, self.status, self.group,
            self.filename, self.has_ini, self.has_toplevel,
        ])
</t>
<t tx="pap.20041008224625">def showPlugin(self, plugin):
    """Show a plugin"""
    # First make sure that the plugin details have been read
    plugin.ensureDetails()
    self.name.setentry(plugin.name)
    self.version.setentry(plugin.version)
    self.group.setentry(plugin.group)
    self.filename.setentry(g.os_path_abspath(plugin.filename)) # EKR
    self.status.setentry(plugin.enabled)
    self.has_ini.setentry(
        g.choose(plugin.has_config,"Yes","No"))
    self.has_toplevel.setentry(
        g.choose(plugin.has_toplevel,"Yes","No"))
    if USE_PRIORITY:
        self.priority.setentry(plugin.priority)
    self.description.settext(plugin.description.strip())
    self.version_history.settext(plugin.versions.strip())
    self.commands.setlist(plugin.commands)
    self.handlers.setlist(plugin.handlers)
    self.requires.setlist(plugin.requires)</t>
<t tx="pap.20041008225226">class PluginList(Tk.Frame):
    """Frame to display a list of plugins"""

    filter_options = []
    title = "List"
    secondtitle = "Groups"

    @others




</t>
<t tx="pap.20041008225226.1">def __init__(self, parent, plugin_view, plugins, file_text="Plugin", *args, **kw):
    """Initialize the list"""
    Tk.Frame.__init__(self, parent, *args, **kw)

    self.local_dict = {}

    self.file_text = file_text

    self.box = Pmw.ScrolledListBox(self,
            labelpos='nw',
            label_text='%s:' % (self.title % self.file_text),
            listbox_height = 6,
            selectioncommand=self.onClick,
            usehullsize = 1,
            hull_width = 300,
            hull_height = 200,
    )

    self.box.component("listbox").configure(font=("Courier", 8))

    self.filter = Pmw.OptionMenu(self,
            labelpos = 'w',
            label_text = '%s:' % (self.title % self.file_text),
            items = self.filter_options,
            menubutton_width = 16,
            command=self.populateList,
    )    

    self.filter.pack(side="top")

    self.secondfilter = Pmw.OptionMenu(self,
            labelpos = 'w',
            label_text = '%s:' % self.secondtitle,
            items = ["All"],
            menubutton_width = 16,
            command=self.populateList,
    )    

    Pmw.alignlabels([self.filter, self.secondfilter])

    self.secondfilter.pack(side="top")

    self.box.pack(side="bottom", fill='both', expand=1)    

    self.plugin_view = plugin_view
    self.plugins = plugins
</t>
<t tx="pap.20041008230728">self.name = Pmw.EntryField(self.top,
    labelpos = 'w',label_text = 'Name:')

self.name.pack(side="top", fill="x", expand=0)</t>
<t tx="pap.20041008230728.1">self.filename = Pmw.EntryField(self.top,
        labelpos = 'w',
        label_text = 'Filename:',
)

self.filename.pack(side="top", fill="x", expand=0)
</t>
<t tx="pap.20041008230728.2">self.version = Pmw.EntryField(self.top,
        labelpos = 'w',label_text = 'Version:')

self.version.pack(side="top", fill="x", expand=0)
</t>
<t tx="pap.20041008231028">self.status = Pmw.EntryField(self.top,
        labelpos = 'w',
        label_text = 'Status:',
)

self.status.pack(side="top", fill="x", expand=0)
</t>
<t tx="pap.20041008231028.1">self.text_panel = Pmw.NoteBook(self.top)
self.text_panel.pack(side="top", fill='both', expand=1, padx=5, pady=5)

description_panel = self.text_panel.add('Description')
version_panel = remote_list_page = self.text_panel.add('Version History')

&lt;&lt; Description &gt;&gt;
&lt;&lt; Version History &gt;&gt;</t>
<t tx="pap.20041008231028.2">self.commands = Pmw.ScrolledListBox(self.bottom,
        labelpos='n',
        label_text='Commands',
        listbox_height = 6,
        usehullsize = 1,
        hull_width = 150,
        hull_height = 100,
)

self.commands.pack(side="left", fill='both', expand=1)
</t>
<t tx="pap.20041008231028.3">self.handlers = Pmw.ScrolledListBox(self.bottom,
        labelpos='n',
        label_text='Hooks',
        listbox_height = 6,
        usehullsize = 1,
        hull_width = 150,
        hull_height = 100,
)

self.handlers.pack(side="left", fill='both', expand=1)
</t>
<t tx="pap.20041008231930">self.has_ini = Pmw.EntryField(self.top,
        labelpos = 'w',
        label_text = 'Has INI:',
)

self.has_ini.pack(side="top", fill="x", expand=0)</t>
<t tx="pap.20041008233733">def getSelectedPlugin(self):
    """Return the selected plugin"""
    sels = self.box.getcurselection()
    if len(sels) == 0:
        return None
    else:
        return self.local_dict[sels[0]]
</t>
<t tx="pap.20041008233947">def enablePlugin(self, plugin, enabler):
    """Enable a plugin"""
    plugin.enabled = "On"
    enabler.updateState(plugin)</t>
<t tx="pap.20041008234033">def disablePlugin(self, plugin, enabler):
    """Enable a plugin"""
    plugin.enabled = "Off"
    enabler.updateState(plugin)</t>
<t tx="pap.20041008234256">def updateState(self, plugin):
    """Update the state for the given plugin"""
    self._updateItemState(plugin.name, plugin.enabled)</t>
<t tx="pap.20041009003552">def writeFile(self, location):
    """Initialize the manager from a folder"""
    manager_filename = os.path.join(location, "pluginsManager.txt")

    # Get the text of the plugin manager file
    try:
        f = file(manager_filename, "w")
    except (IOError, OSError) as err:
        raise InvalidManager("Unable to open plugin manager file '%s': %s" % 
                                (manager_filename, err))
    try:
        try:
            f.write(self.text)
        finally:
            f.close()
    except Exception as err:
        raise InvalidManager("Unable to write manager file '%s': %s" % 
                                (manager_filename, err))              
    self.parseManagerText(self.text)</t>
<t tx="pap.20041009013256">class LocalPluginList(PluginList):
    """A list showing plugins based on the local file system"""

    title = "Locally Installed %ss"
    filter_options = ['All', 'On', 'Off']</t>
<t tx="pap.20041009013556">class RemotePluginList(PluginList):
    """A list showing plugins based on a remote file system"""

    title = "%ss on CVS"
    filter_options = ['All', 'Up to date', 'Update available', 'Changed', 'Not installed']</t>
<t tx="pap.20041009020000">self.buttonBox = Pmw.ButtonBox(
    self.remote_list_page,
    labelpos = 'nw',
    frame_borderwidth = 2,
    frame_relief = 'groove')

# Add some buttons to the ButtonBox.
self.buttonBox.add(self.install_text, command = self.installPlugin)
self.buttonBox.add('View', command = self.viewPlugin)
self.buttonBox.add('Check for Updates', command = self.checkUpdates)

self.buttonBox.pack(side="top", padx=5)</t>
<t tx="pap.20041009020000.1">def installPlugin(self):
    """Install the selected plugin"""

    # Write the file
    plugin = self.remote_plugin_list.getSelectedPlugin()        
    if not plugin: return

    self.messagebar.message("busy", "Writing file")
    plugin.writeTo(self.local_path)
    self.messagebar.message("busy", "Scanning local plugins") 
    # Go and check local filesystem for all plugins   
    self.initLocalCollection()
    # View is still pointing to the old list, so switch it now
    self.plugin_list.plugins = self.local
    self.plugin_list.populateList()
    plugin.enabled = "Up to date"
    # Update the current list too
    self.remote_plugin_list.populateList()
    self.messagebar.resetmessages('busy')</t>
<t tx="pap.20041009020000.2">def viewPlugin(self):
    """View the selected plugin in a web browser"""
    plugin = self.remote_plugin_list.getSelectedPlugin()
    if plugin:
        webbrowser.open(plugin.getViewFilename())</t>
<t tx="pap.20041009021201">def setEnabledStateFrom(self, collection):
    """Set the enabled state based on another collection"""
    for plugin in self.values():
        try:
            local_version = collection[plugin.name]
        except KeyError:
            plugin.enabled = "Not installed"
        else:
            if local_version.version &lt; plugin.version:
                plugin.enabled = "Update available"
            elif local_version.hash &lt;&gt; plugin.hash:
                plugin.enabled = "Changed"
            else:
                plugin.enabled = "Up to date"
</t>
<t tx="pap.20041009023004">def writeTo(self, location):

    """Write this plugin to the file location"""

    # Don't write if contents are invalid
    if not self.contents_valid:
        return 

    filename = os.path.join(location, "%s.py" % self.name)
    try:
        f = file(filename, "w")
    except (IOError, OSError) as err:
        raise InvalidPlugin(
            "Unable to open plugin file '%s': %s" % (filename, err))
    try:
        try:
            f.write(self.text)
        finally:
            f.close()
    except Exception as err:
        raise InvalidPlugin(
            "Unable to write plugin file '%s': %s" % (filename, err))
</t>
<t tx="pap.20041009025708">def checkConflicts(self):
    """Check for plugin conflicts"""
    plugin = self.plugin_list.getSelectedPlugin() 
    if not plugin:
        return 
    conflicts = self.local.getConflicts(plugin)
    if not conflicts:
        dialog = Pmw.MessageDialog(self.top,
            title = 'No conflicts',
            defaultbutton = 0,
            message_text = 'There are no conflicts for %s.' % plugin.name)
        dialog.iconname('Conflicts')
        dialog.activate()
    else:
        dialog = ListReportDialog(
            'Potential Conflicts for %s' % plugin.name,
            'Conflicts',
            [inColumns(item, [30]) for item in conflicts],
            400)</t>
<t tx="pap.20041009025708.1">def getConflicts(self, plugin):

    """Find conflicting hook handlers for this plugin"""

    conflicts = []
    for this_plugin in self.values():
        # g.trace(plugin.handlers,this_plugin.handlers)
        if this_plugin.name &lt;&gt; plugin.name:
            for conflict in plugin.handlers.intersection(this_plugin.handlers):
                conflicts.append((this_plugin.name, conflict))

    return conflicts
</t>
<t tx="pap.20041009135426">self.has_toplevel = Pmw.EntryField(self.top,
        labelpos = 'w',
        label_text = 'Has top level:',
)

self.has_toplevel.pack(side="top", fill="x", expand=0)</t>
<t tx="pap.20041009135426.1">if USE_PRIORITY:
    self.priority = Pmw.EntryField(self.top,
        labelpos = 'w',
        label_text = 'Priority:',
    )

    self.priority.pack(side="top", fill="x", expand=0)</t>
<t tx="pap.20041009140132"></t>
<t tx="pap.20041009140132.1"></t>
<t tx="pap.20041009141528">"""

Todo list:

- getting subset of plugins from CVS
- categorize plugins
- filter on categories
- size of plugin
- add required plugins to conflict check
- help for nomenclature

Done

- restore list top position when updating plugin list 
- proper view of remote file (colourized code)
- __requires__ list for plugins
- show __requires__
- proper dialog to show conflict list and error list from CVS

"""</t>
<t tx="pap.20041009163613">dialog = Pmw.MessageDialog(self.top,
    title = 'CVS Error',
    defaultbutton = 0,
    message_text = 'Error retrieving CVS file information: %s' % err)
dialog.iconname('CVS')      
dialog.activate()
</t>
<t tx="pap.20041009163613.1">dialog = ListReportDialog('CVS File Errors',
                          'Errors',
                          ["%s - %s" % item for item in errors],
                          500)

</t>
<t tx="pap.20041009224435">def getViewFilename(self):

    """Return the url to view the file"""

    return self.filename.replace(r"/*checkout*", "") + "&amp;view=markup"
</t>
<t tx="pap.20041009224739">self.requires = Pmw.ScrolledListBox(self.bottom,
        labelpos='n',
        label_text='Requires',
        listbox_height = 6,
        usehullsize = 1,
        hull_width = 150,
        hull_height = 100,
)

self.requires.pack(side="left", fill='both', expand=1)
</t>
<t tx="pap.20041009225149">def getRequiredModules(self, plugin_collection):
    """Determine which modules are also required by this plugin

    We check for,
     - importing Tk and PMW
     - other plugins which are imported (using plugin_collection)
     - a __plugin_requires__ definition

    """
    requires = []
    &lt;&lt; Check UI toolkits &gt;&gt;
    &lt;&lt; Check other plugins &gt;&gt;
    &lt;&lt; Directives &gt;&gt;
    self.requires = set(requires)</t>
<t tx="pap.20041009230050"># Check for UI toolkits
if self.hasImport(self.text, "Tkinter"):
    requires.append("Tkinter")

if self.hasImport(self.text, "Pmw"):
    requires.append("Pmw")</t>
<t tx="pap.20041009230351">def hasImport(self, text, module_name):

    """Return True if the text includes an import of the module"""
    if self.hasPattern(text, "import %s" % module_name):
        return True

    if self.hasPattern(text, "from %s import" % module_name):
        return True

    return False</t>
<t tx="pap.20041009230652"># Check for importing other plugin files

imports = self.getPatterns(self.text, "import (\w+)") + \
          self.getPatterns(self.text, "from (\w+) import")

for module_name in imports:
    if module_name in plugin_collection and module_name &lt;&gt; self.name:
        requires.append(module_name)
</t>
<t tx="pap.20041009230953"># Look for __plugin_requires__ directive

directive_text = self.getPattern(self.text, r'__plugin_requires__\s*=\s*(.*?)$', "[]")

try:
    directive = eval(directive_text)
except:
    g.es("__plugin_requires__ not understood for %s: '%s'" % (
            self.name, directive_text))    
else: 
    # if isinstance(directive, (str,unicode)):
    if g.isString(directive)
        requires.append(directive)
    else:
        requires.extend(directive)</t>
<t tx="pap.20041009233937">class ListReportDialog:
    """Shows a list of items to report to the user

    The list is a list of strings. It is assumed that the
    strings are of the format 'abc - xyz' and this control
    presents a filter list based on the list of distinct 
    values for abc.

    """

    @others
</t>
<t tx="pap.20041009233937.1">def __init__(self, title, name, list_data, width=300):
    """Initialize the dialog"""

    &lt;&lt; create the top level frames &gt;&gt;
    filter_options = self.getFilterOptions(list_data)
    self.list_data = list_data
    self.list_data.sort()
    &lt;&lt; create the ScrolledListBox &gt;&gt;
    &lt;&lt; create the OptionMenu &gt;&gt;

    top.grab_set() # Make the dialog a modal dialog.
    top.focus_force() # Get all keystrokes.
    root.wait_window(top)
</t>
<t tx="pap.20041009234256">self.box = Pmw.ScrolledListBox(frame,
        labelpos='nw',
        label_text=name,
        listbox_height = 6,
        usehullsize = 1,
        hull_width = width,
        hull_height = 200,
        items = list_data,
)

self.box.pack(side="bottom", fill='both', expand=1)    

self.box.component("listbox").configure(font=("Courier", 10))</t>
<t tx="pap.20041009234256.1">self.filter = Pmw.OptionMenu(frame,
        labelpos = 'w',
        label_text = 'Filter:',
        items = filter_options,
        menubutton_width = 16,
        command=self.populateList,
)    

self.filter.pack(side="top")</t>
<t tx="pap.20041009234850">def getFilterOptions(self, list_data):
    """Return a list of filter items"""
    splitter = re.compile("\s{3,}")
    names = set()
    for item in list_data:
        names.add(splitter.split(item)[1].strip())
    name_list = list(names)
    name_list.sort()
    return ["All"] + name_list</t>
<t tx="pap.20041009235457">def populateList(self, filter):
    """Populate the list"""

    # Get old selection so that we can restore it    
    current_text = self.box.getcurselection()
    if current_text:
        current_index = self.list_data.index(current_text[0])

    listitems = [item for item in self.list_data
        if item.endswith("   %s" % filter) or filter == "All"]

    self.box.setlist(listitems)    

    if current_text:
        try:
            self.box.setvalue((listitems[current_index],))
            self.box.component("listbox").see(current_index)
        except IndexError:
            pass # Sometimes the list is just different!
</t>
<t tx="pap.20050305144720">def inColumns(data, columnwidths):
    """Return the items of data with the specified column widths

    The list of widths should be one less than the list of data, eg
        inColumns((10,20,30), (5,5))
    """
    format = ""
    for col in columnwidths:
        format += "%%-%ds" % col
    format += "%s"
    #
    return format % data
</t>
<t tx="pap.20050305151106">self.group = Pmw.EntryField(self.top,
        labelpos = 'w',label_text = 'Group:')

self.group.pack(side="top", fill="x", expand=0)
</t>
<t tx="pap.20050305160811">def setSecondFilterList(self, list_items):
    """Set the items to use in the second filter list"""
    self.secondfilter.setitems(list_items)
</t>
<t tx="pap.20050305161126">def getGroups(self):
    """Return a list of the Plugin group names"""
    groups = list(set([plugin.group for plugin in self.values()]))
    groups.sort()
    return groups</t>
<t tx="pap.20050305165333">def getVersionHistory(self, text):
    """Try to extract the version history of this plugin

    This is all guesswork! We look for a Leo node called "Version history"
    or one called "Change log". If we find it then we assume that the contents
    are the version history.

    This only works if the plugin was developed in Leo as a @thin file.

    """
    extractor =r'.*\+node\S+?\&lt;\&lt; %s \&gt;\&gt;.*?\#\@\+at(.*)\#\@\-at.*\-node.*?\&lt;\&lt; %s \&gt;\&gt;.*'
    #
    # This Re is very slow on large files so we truncate since we are really pretty
    # sure that version history will be within the first 150 lines
    lines = "\n".join(text.split("\n")[:150])
    for name in ("version history", "change log"):
        searcher = re.compile(extractor % (name, name), re.DOTALL+re.M)
        match = searcher.match(lines)
        if match:
            version_text = match.groups()[0]
            self.versions = version_text.replace("#", "")
            return
</t>
<t tx="pap.20050305170921">self.description = Pmw.ScrolledText(description_panel,
        # borderframe = 1,
        labelpos = 'n',
        label_text='%s Description' % self.file_text,
        columnheader = 0,
        rowheader = 0,
        rowcolumnheader = 0,
        usehullsize = 1,
        hull_width = 300,
        hull_height = 300,
        text_wrap='word',
        text_padx = 4,
        text_pady = 4,
)
self.description.pack(side="top", fill='both', expand=1)
</t>
<t tx="pap.20050305170921.1">
self.version_history = Pmw.ScrolledText(version_panel,
        # borderframe = 1,
        labelpos = 'n',
        label_text='%s History' % self.file_text,
        columnheader = 0,
        rowheader = 0,
        rowcolumnheader = 0,
        usehullsize = 1,
        hull_width = 300,
        hull_height = 300,
        text_wrap='word',
        text_padx = 4,
        text_pady = 4,
)
self.version_history.pack(side="top", fill='both', expand=1)
</t>
<t tx="pap.20050317183038">def getNiceName(self, name):
    """Return a nice version of the plugin name

    Historically some plugins had "at_" and "mod_" prefixes to their
    name which makes the name look a little ugly in the lists. There is
    no real reason why the majority of users need to know the underlying
    name so here we create a nice readable version.

    """
    lname = name.lower()
    if lname.startswith("at_"):
        name = name[3:]
    elif lname.startswith("mod_"):
        name = name[4:]
    return name.capitalize()
</t>
<t tx="pap.20050605192322">def getAllPlugins(self):
    """Return all the plugins"""
    return self.local_dict.values()
</t>
<t tx="pap.20051001230822">def getSummary(self, text):
    """Get a summary of this plugin

    This is a quick method to get an overview of whether this 
    really is a plugin and some key information. The longer,
    more time consuming search is performed by the getDetails
    method.

    """
    self.is_plugin = not self.hasPattern(text, '__not_a_plugin__\s*=\s*True(?!")')
    self.version = self.getPattern(text, r'__version__\s*=\s*[\'"](.*?)[\'"]', "-")
    self.group = self.getPattern(text, r'__plugin_group__\s*=\s*[\'"](.*?)[\'"]', "-")
    self._plugin_text = text

    # Some plugins need to have their details read immediately
    if self.read_details_immediately:
        self.ensureDetails()
</t>
<t tx="pap.20051001231439">def getPluginDetails(self):
    """Get detailed information on all the plugins

    This can be time consuming and so is normally done on a 
    separate thread. We do a lot of pausing here also
    to ensure that we don't block other things going on.

    """
    for plugin in self.values():
        time.sleep(self.background_pause)
        plugin.ensureDetails()</t>
<t tx="pap.20051001232117">def ensureDetails(self):
    """Ensure that the details have been read for this plugin

    The details are read asynchronously but we may need to make
    sure that they are available. This method will cause the
    details to be read now if they haven't already.

    """
    if not self.has_details:
        self.getDetails()</t>
<t tx="pap.20051002002852">def enablePlugin(self, plugin, enabler):
    """Enable the plugin

    This adds the plugin to the list of plugins which will be
    started the next time that Leo runs and also tries to
    dynamically start the plugin. This may fail if the plugin
    needed to do something when Leo was first kicking off.

    We only try the dynamic start if we are running inside of
    Leo (ie not standalone) and we were able to import
    the leoPlugins module.

    """

    super(LocalPluginCollection, self).enablePlugin(plugin, enabler)

    if not self.c:
        g.es("Can not enable plugins dynaically when running stand-alone",
            color="blue")
        return

    try:
        g.loadOnePlugin(plugin.name)
        &lt;&lt; Hooks to send &gt;&gt;
        &lt;&lt; Send hooks &gt;&gt;
        &lt;&lt; Add plugin menu &gt;&gt;
    except Exception as err:
        g.es("Failed to dynamically enable '%s': %s" % (plugin.name, err),
             color="red")
    else:
        g.es("Dynamically enabled '%s'" % plugin.name, color="blue")</t>
<t tx="pap.20051002004135"># In order to simulate the startup process we need
# to send a series of hooks to the plugin

keys = {'c':self.c, 'new_c':self.c}

for hook in hook_list:
    bunch = g.app.pluginsController.handlers.get(hook, [])
    for item in bunch:
        if item.moduleName == plugin.name:
            g.es("Sending '%s' to '%s'" % (hook, plugin.name), color="green")
            item.fn(hook,keys)</t>
<t tx="pap.20051007193759"># These are the hooks to send to dynamically enabled plugins 
# to persuade them to start

hook_list = [
        'start1',
        'before-create-leo-frame',
        'unselect1',
        'unselect2',
        'select1',
        'scan-directives',
        'init-color-markup',
        'select2',
        'select3',
        'unselect1',
        'unselect2',
        'select1',
        'scan-directives',
        'init-color-markup',
        'select2',
        'select3',
        'menu1',
        'menu2',
        'create-optional-menus',
        'after-create-leo-frame',
        'new',
        'start2',
        'idle',
        'redraw-entire-outline',
        'draw-sub-outline',
        'draw-outline-node',
        'draw-outline-icon',
        'draw-outline-text-box',
        'after-redraw-outline',
        ]</t>
<t tx="pap.20051008005923"># Add the menu item to the plugins menu
import plugins_menu
filename = plugins_menu.PluginDatabase.all_plugins[plugin.name]
new_plugin = plugins_menu.PlugIn(filename)
plugins_menu.addPluginMenuItem(new_plugin,self.c)</t>
<t tx="pap.20051102225718">self.order_view_page = order_view_page = notebook.add('%s Load Order' % self.file_text)

self.order_view = order_view = LoadOrderView(order_view_page, self.file_text, self.local, self.enable, self.plugin_view)
order_view.pack(side="top", fill='both', expand=1)
</t>
<t tx="pap.20051102233259">class LoadOrderView(Tk.Frame):
    """Shows the load order of items"""

    @others</t>
<t tx="pap.20051102233259.1">def __init__(self, parent, file_text="Plugin", collection=None, enabler=None, 
             plugin_view=None, *args, **kw):
    """Initialise the view"""
    Tk.Frame.__init__(self, parent, *args, **kw)

    self.file_text = file_text
    self.collection = collection
    self.enabler = enabler
    self.plugin_view = plugin_view

    self.items = Pmw.ScrolledListBox(self,
            labelpos='nw',
            label_text='%s:' % self.file_text,
            selectioncommand = self.onClick,
            listbox_height = 6,
            usehullsize = 1,
            hull_width = 300,
            hull_height = 200,
    )

    self.items.component("listbox").configure(font=("Courier", 8))
    self.items.pack(side="top", fill='both', expand=1)    

    self.buttonBox = Pmw.ButtonBox(
        self,
        labelpos = 'w',
        label_text = 'Change Order',
        frame_borderwidth = 2,
        frame_relief = 'groove')

    self.buttonBox.add('First', command = self.moveFirst)
    self.buttonBox.add('Up', command = self.moveUp)
    self.buttonBox.add('Down', command = self.moveDown)
    self.buttonBox.add('Last', command = self.moveLast)
    self.buttonBox.add('Save', command = self.save)

    self.buttonBox.alignbuttons()

    self.buttonBox.pack(side="top", padx=5)    

</t>
<t tx="pap.20051102233801">def moveFirst(self):
    """Move the plugin to the first"""
    item = self.getSelection()
    if item:
        self.enabler.actives.moveFirst(item.name)
        self.initList()
        self.items.setvalue([item.nicename])</t>
<t tx="pap.20051102233937">def moveUp(self):
    """Move the plugin up one"""
    item = self.getSelection()
    if item:
        self.enabler.actives.moveUp(item.name)
        self.initList()
        self.items.setvalue([item.nicename])        
</t>
<t tx="pap.20051102233937.1">def moveDown(self):
    """Move the plugin down one"""
    item = self.getSelection()
    if item:
        self.enabler.actives.moveDown(item.name)
        self.initList()
        self.items.setvalue([item.nicename])        
</t>
<t tx="pap.20051102233937.2">def moveLast(self):
    """Move the plugin to the last"""
    item = self.getSelection()
    if item:
        self.enabler.actives.moveLast(item.name)
        self.initList()
        self.items.setvalue([item.nicename])</t>
<t tx="pap.20051103000804">def initList(self):
    """Initialise the members of the list"""
    self.items.setlist([self.collection[name].nicename for name in self.enabler.actives])
    self.local_dict = dict([(self.collection[name].nicename, self.collection[name])
                                for name in self.collection])
</t>
<t tx="pap.20051103001158">def selectPage(self, pagename):
    """Select a page in the tab view"""
    if pagename == "%s Load Order" % self.file_text:
        self.order_view.initList()</t>
<t tx="pap.20051103001707">def save(self):
    """Save the current order"""
    self.enabler.storeOrder()</t>
<t tx="pap.20051103001707.1">class OrderedDict(list):
    """A dictionary that retains its order

    This is implemented as a list of (key, value) pairs
    and so is not suitable for large numbers of items.

    """

    @others
</t>
<t tx="pap.20051103001707.3">def __getitem__(self, name):
    """Return an item"""
    for key, value in self.items:
        if key == name:
            return value
    else:
        raise KeyError("Item '%s' not found" % name)
</t>
<t tx="pap.20051103001743">def keys(self):
    """Return the keys"""
    return [key for key, value in self.items]</t>
<t tx="pap.20051103001922">def __iter__(self):
    """Iterate over keys"""
    return iter(self.keys())</t>
<t tx="pap.20051103002042">def __init__(self, items=None):
    """Initialise"""
    if items is None:
        items = []
    self.items = items</t>
<t tx="pap.20051103002306">def onClick(self):
    """Clicked on an item in the order view"""
    item = self.getSelection()
    if item:
        self.plugin_view.showPlugin(item)    
</t>
<t tx="pap.20051103002808">def getSelection(self):
    """Return the selected plugin"""
    sels = self.items.getcurselection()
    if len(sels) == 0:
        return None
    else:
        return self.local_dict[sels[0]]

</t>
<t tx="pap.20051103003310">def moveFirst(self, name):
    """Move the named item to the front"""
    item = name, self[name]
    self.items.remove(item)
    self.items.insert(0, item)</t>
<t tx="pap.20051103003447">def moveLast(self, name):
    """Move the named item to the back"""
    item = name, self[name]
    self.items.remove(item)
    self.items.append(item)</t>
<t tx="pap.20051103004312">def moveUp(self, name):
    """Move the named item up"""
    item = name, self[name]
    pos = self.items.index(item)
    if pos &lt;&gt; 0:
        self.items[pos], self.items[pos-1] = self.items[pos-1], self.items[pos]</t>
<t tx="pap.20051103004312.1">def moveDown(self, name):
    """Move an item down in the list"""
    item = name, self[name]
    pos = self.items.index(item)
    if pos &lt;&gt; len(self.items)-1:
        self.items[pos], self.items[pos+1] = self.items[pos+1], self.items[pos]    </t>
<t tx="pap.20051103004807">def __contains__(self, name):
    """Check for item inside"""
    try:
        dummy = self[name]
        return True
    except KeyError:
        return False</t>
<t tx="pap.20051104220845">def storeOrder(self):
    """Store the load order of plugins

    Order is stored by putting a section in the file delimited by
        # Load Order
        plugin1
        plugin2
        plugin3
        # Load Order

    We disable all plugins and insert them in the new section.
    We check to see if a load order exists and create it if not. 

    """
    #
    # Disable all active plugins
    active_plugins = self.actives.keys()
    for name in active_plugins:
        self._updateItemState(name, False)
    #
    # Look for an existing section and chop it out
    existing_parts = self.text.split("# Load Order")
    if len(existing_parts) == 3:
        self.text = "%s\n%s" % (existing_parts[0], existing_parts[2])
    #
    # Now add the section in at the end
    self.text = "# Load Order\n%s\n# Load Order%s" % (
                "\n".join([("%s.py" % name) for name in active_plugins]),
                self.text.strip())
    #
    # And store the new version
    self.writeFile(self.location)
    #
    # The active plugins will have been set to enabled by the writeFile
    # operation so we are now good to go again!
</t>
<t tx="pap.20051104221348">def values(self):
    """Return the values"""
    return [value for key, value in self.items]
</t>
<t tx="pap.20051104222141">def _updateItemState(self, name, state):
    """Update the state of an item"""
    # Get the filename for the new entry
    if state == "On":
        newentry = "%s.py" % name
    else:
        newentry = "#%s.py" % name 

    if name in self.all:
        # Plugin exists in the management file
        item = self.all[name]
        # TODO: Unicode issues with the following line??
        self.text = "%s%s%s" % (
            self.text[:item.start()],
            str(newentry),
            self.text[item.end():])      
    else:
        # Plugin doesn't exist - add it at a suitale place
        self.text = "%s%s\n%s" % (
            self.text[:self.manager.start()],
            str(newentry),
            self.text[self.manager.start():])

    self.writeFile(self.location)    </t>
<t tx="pap.20051104224544">def get(self, key, default=None):
    """Return the value"""
    try:
        self[key]
    except KeyError:
        return default</t>
<t tx="pap.20051104224633">def __setitem__(self, name, value):
    """Set an item"""
    self.items.append((name, value))
</t>
<t tx="rogererens.20041014110709">@

How about other plugins that create a status line? Should I test whether the status line is already created?

Don't know exactly yet about the interaction with other plugins. The info in the status line may be overwritten by them. That's fine with me: I can always click on the icon of the node again to show the info again.

Keep the pane of the UNL referred to on top (now the pane with the referring node stays on top).
Maybe this should be a settings-dependent behaviour. Could this be solved by using the 'onCreate' idiom and a UNLclass?

Find out about the difference between the event 'select2' and 'select3'.

A UNL checker script would be handy to check whether all references are still valid.

Deal with path-separators for various platforms?

Handle relative paths?

Introduce a menu item to improve documentation? By firing up a browser, directing it to leo on sourceforge (sourceforge userid needed?). EKR could start up a new thread beforehand, "documentation improvements", where a new message might be posted with the relevant UNL placed automatically in the text box. Then the user just needs to type in his/her comments and post the message.</t>
<t tx="rogererens.20041130095659">@ It is possible to link to nodes within the same file.  However clones might be better.
</t>
<t tx="tbrown.20090322083202.1"></t>
</tnodes>
</leo_file>
